/* ********************************************************************************
 * The content of this file is subject to the ParsVT.com Modules License("License");
 * You may not use this file except in compliance with the License
 * The Initial Developer of the Original Code is ParsVT.com
 * Portions created by ParsVT.com. are Copyright(C) ParsVT Team
 * All Rights Reserved.
 * ****************************************************************************** */
Highcharts.Chart.prototype.createCanvas=function(){var t=this.getSVG(),e=parseInt(t.match(/width="([0-9]+)"/)[1]),a=parseInt(t.match(/height="([0-9]+)"/)[1]),r=document.createElement("canvas");return r.setAttribute("width",e),r.setAttribute("height",a),r.getContext&&r.getContext("2d")?(canvg(r,t),r.toDataURL("image/png")):(alert("Your browser doesn't support this feature, please use a modern browser"),!1)},function(t){t.setOptions({colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#8d4653","#91e8e1","#ED1B42","#69BD44","#6A2D91","#42525D","#C88B11","#0A7CDA","#990099","#990033","#8C5B43","#FF9900","#00509D","#FF0099","#081833","#559E83","#FF6666","#712D8E","#DB4900","#4C1647","#547701","#242E8F","#574D29","#C3CB71","#CC0000","#004833","#008752","#5A5255","#F15B21","#1B85B8","#72243C","#EC4699","#999900","#F7BC19"]}),t.setOptions({lang:{decimalPoint:app.getDecimalSeparator(),thousandsSep:app.getGroupingSeparator()}})}(Highcharts);var parsvtHighChart={convertCurrencyToUserFormat:function(t,e){if(t.toString()!==t.toString().replace(/\D/g,""))return t;var a;return a=t%1!=0?Highcharts.numberFormat(t,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(t,"","",app.getGroupingSeparator()),e&&(a=app.appendUserCurrencySymbol(a)),a}},vtHighChartInterface=function(){this.helper=new function(){this.getLabelSteps=function(t,e){var a=1,r=t.length;if(r>20){var i="preview"===e.data("mode")?25:10;a=Math.round(r/i)}return a}},this.getDisplayValue=function(t,e){var a=this.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val();return"currency"===a||"currency"===e||"multicurrency"===a||"multicurrency"===e?parsvtHighChart.convertCurrencyToUserFormat(t,!0):t},this.renderPie=function(){var t=this,e=jQuery('input[name="isPrintPermitted"]').val(),a={chart:{type:"pie",zoomType:"xy",options3d:{enabled:!1,alpha:45,beta:0},backgroundColor:"white",events:{load:function(e){for(var a=0,r=0,i=this.series[0].yData.length;r<i;r++)a+=this.series[0].yData[r];a="currency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&"multicurrency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()?a%1!=0?Highcharts.numberFormat(a,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(a,"","",app.getGroupingSeparator()):t.getDisplayValue(a),this.renderer.text(app.vtranslate("JS_TOTAL_RECORDS")+" : "+a,this.plotLeft,this.plotTop+5).attr({zIndex:5,style:"font-size:12px;font-weight:bold;"}).add()}}},credits:{enabled:!1},title:{text:null},tooltip:{useHTML:!0,formatter:function(){var e=this.y,a=this.total,r=this.percentage;"currency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&"multicurrency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&(e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),a=a%1!=0?Highcharts.numberFormat(a,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(a,"","",app.getGroupingSeparator()),r=r%1!=0?Highcharts.numberFormat(r,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(r,"","",app.getGroupingSeparator()));var i=this.key;return void 0===this.key&&(i="Unavailable"),"fa"==jQuery("body").data("language").substring(0,2)||"ar"==jQuery("body").data("language").substring(0,2)?'<span style="font-size:12px">'+i+"</span><br><span style='font-weight: bold; direction: rtl;'>"+r+"% = "+t.getDisplayValue(e)+"/"+t.getDisplayValue(a)+"</span>":'<span style="font-size:12px">'+i+"</span><br><span style='font-weight: bold;'>"+t.getDisplayValue(e)+"/"+t.getDisplayValue(a)+" = "+r+"%</span>"},backgroundColor:"rgba(255,255,255,1)"},colors:this.data.colors&&this.data.colors.length?this.data.colors:Highcharts.defaultOptions.colors,plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,connectorPadding:0},showInLegend:!0},series:{dataLabels:{enabled:!0,formatter:function(){return"<b>"+Math.round(100*this.percentage)/100+" %</b>"}},cursor:"pointer",point:{events:{}}}},series:[{type:"pie",name:this.data.title,data:this.data.chartData}],legend:{verticalAlign:"bottom",y:10,labelFormatter:function(){var e=this.y,a=this.total,r=this.percentage;e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),a=a%1!=0?Highcharts.numberFormat(a,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(a,"","",app.getGroupingSeparator()),r=r%1!=0?Highcharts.numberFormat(r,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(r,"","",app.getGroupingSeparator());var i=this.name;return""==i.trim()&&(i="Unavailable"),'<span title="'+t.getDisplayValue(e)+"/"+t.getDisplayValue(a)+" = "+t.getDisplayValue(r)+'%">'+i+"</span>"},useHTML:!0},exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}}};e||(a.exporting=function(){return!1}),this.options.links&&(a.series[0].url=this.options.links,a.plotOptions.series.point.events.click=function(){var e=this.series.userOptions.url[this.x];e&&t.triggerClick({url:e})}),!1===this.options.options3d&&(a.chart.options3d.enabled=!1),jQuery.extend(!0,a,this.options.customChartOptions),this.element.highcharts(a)},this.renderFunnel=function(){for(var t=this,e=JSON.parse(this.data),a=[],r=[],i=0;i<e.length;i++){var n={name:e[i][0],y:parseFloat(e[i][1])};void 0!==e[i].color&&(n.color=e[i].color),a.push(n),r[e[i][0]]=e[i][3]}var s={chart:{type:"funnel",marginRight:8,backgroundColor:"white"},credits:{enabled:!1},title:{text:null,x:-50},tooltip:{headerFormat:'<span style="font-size:12px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0;padding:0;"><b>{point.y}</b></td></tr>',footerFormat:"</table>",shared:!1,useHTML:!0,backgroundColor:"rgba(255,255,255,1)"},plotOptions:{series:{dataLabels:{enabled:!0,format:"<b>{point.name}</b> ({point.y})",color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black",softConnector:!0},neckWidth:"30%",neckHeight:"25%",events:{},cursor:"pointer",width:"80%",center:["40%","50%"]}},legend:{enabled:!0,verticalAlign:"bottom",y:10},series:[{data:a,url:r}],exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}}};r&&(s.plotOptions.series.events.click=function(e){var a=this.chart.series[0].options.url[e.point.name];a&&t.triggerClick({url:a})}),this.element.highcharts(s)},this.renderMultibar=function(){for(var t=this,e=this.data.data,a=this.data.ticks,r=this.data.labels,i=this.data.links,n=[],s=0;s<r.length;s++){var o={name:r[s],data:e[s]};o.url=i[s],n.push(o)}var l={chart:{type:"column",zoomType:"xy",backgroundColor:"white",resetZoomButton:{position:{x:-10,y:10},relativeTo:"chart"}},credits:{enabled:!1},title:{text:null},xAxis:{useHTML:!0,categories:a},yAxis:{min:0,stackLabels:{enabled:!0,formatter:function(){var e=this.total;return e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),t.getDisplayValue(e)},style:{color:"black"}},labels:{useHTML:!0,formatter:function(){return t.getDisplayValue(this.value)}},title:{text:null}},tooltip:{useHTML:!0,formatter:function(){var e=this.y,a=this.point.stackTotal;return"currency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&"multicurrency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&(e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),a=a%1!=0?Highcharts.numberFormat(a,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(a,"","",app.getGroupingSeparator())),"<b>"+this.x+"</b><br/>"+this.series.name+": "+t.getDisplayValue(e)+"<br/>"+app.vtranslate("JS_TOTAL_RECORDS")+": "+t.getDisplayValue(a)},backgroundColor:"rgba(255,255,255,1)"},colors:this.data.colors&&this.data.colors.length?this.data.colors:Highcharts.defaultOptions.colors,plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white",style:{textShadow:"0 0 3px black, 0 0 3px black"},formatter:function(){var e=this.y;return e<=0?"":(e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),t.getDisplayValue(e))},crop:!1,overflow:"none"}},series:{cursor:"pointer",events:{}}},series:n,legend:{useHTML:!0,verticalAlign:"bottom",y:10},exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}},navigation:{buttonOptions:{verticalAlign:"top",y:-14,x:10}}};l.plotOptions.series.events.click=function(e){var a=this.options.url[e.point.x];a&&t.triggerClick({url:a})},this.options.hasOwnProperty("customChartOptions")&&jQuery.extend(!0,l,this.options.customChartOptions),this.element.highcharts(l)},this.renderHorizontalbar=function(){var t=this,e=null;this.data.labels.length>100&&(e=Math.ceil(this.data.labels.length/10));for(var a={chart:{type:"bar",zoomType:"xy",backgroundColor:"white",resetZoomButton:{position:{x:-10,y:10},relativeTo:"chart"}},credits:{enabled:!1},title:{text:null},xAxis:{tickInterval:e,categories:this.data.labels,title:{text:null},labels:{rotation:-20,overflow:"justify",useHTML:!0,step:this.helper.getLabelSteps(this.data.labels,this.element),formatter:function(){var t=this.value,e=t.length>30?t.substring(0,29)+"..":t;return""==e&&(e="Unavailable"),e}}},yAxis:{min:0,title:{text:null,align:"high"},labels:{overflow:"justify",useHTML:!0,formatter:function(){return t.getDisplayValue(this.value)}}},tooltip:{formatter:function(){var e=this.y;"currency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&"multicurrency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&(e=e%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()));var a=this.x;""==this.x&&(a="Unavailable");var r="";return t.data&&t.data.data_labels&&(t.data.data_labels.length>1?this.series.name&&(r=this.series.name):r=t.data.data_labels[0]),'<span style="font-size:12px">'+a+'</span><br><span style="font-size:12px">'+r+'</span><table><tr><td style="color:{series.color};padding:0;padding:0;"><b>'+t.getDisplayValue(e)+"</b></td></tr></table>"},shared:!1,useHTML:!0,backgroundColor:"rgba(255,255,255,1)"},colors:this.data.colors&&this.data.colors.length?this.data.colors:Highcharts.defaultOptions.colors,plotOptions:{bar:{dataLabels:{enabled:!0,formatter:function(){var e=this.y;return e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),t.getDisplayValue(e,this.series.userOptions.data_type)}}},series:{dataLabels:{enabled:!0,formatter:function(){var e=this.y;return e=e%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()),"<b>"+("currency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()||"multicurrency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()?t.getDisplayValue(this.y,!0):t.getDisplayValue(e))+"</b>"},style:{fontSize:"12px"}},cursor:"pointer",events:{},colorByPoint:!0}},series:[],legend:{verticalAlign:"bottom",y:10},exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}},navigation:{buttonOptions:{verticalAlign:"top",y:-14,x:10}}},r=this.data.chartData,i=[],n=0;n<r.length;n++){for(var s=[],o=0;o<r[n].length;o++)s.push(parseFloat(r[n][o][0]));var l={};l.name=this.data.data_labels[n],l.data=s,l.data_type=this.data.data_type[n],i.push(l)}a.series=i,this.options.links&&(a.plotOptions.series.events.click=function(e){var a=t.options.links[e.point.x];a&&t.triggerClick({url:a})}),this.options.hasOwnProperty("customChartOptions")&&jQuery.extend(!0,a,this.options.customChartOptions),this.element.highcharts(a)},this.renderLine=function(){for(var t=this,e={chart:{type:"line",zoomType:"xy",options3d:{enabled:!1},backgroundColor:"white",resetZoomButton:{position:{x:-10,y:10},relativeTo:"chart"}},credits:{enabled:!1},title:{text:this.data.graph_label,x:-20},xAxis:{categories:this.data.labels,labels:{useHTML:!0,rotation:-45,step:this.helper.getLabelSteps(this.data.labels,this.element),formatter:function(){var t=this.value,e=t.length>30?t.substring(0,29)+"..":t;return""==e&&(e="Unavailable"),e}}},yAxis:{title:{text:null},labels:{useHTML:!0,formatter:function(){return t.getDisplayValue(this.value)}},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{formatter:function(){var e=this.y;"currency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&"multicurrency"!=t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&(e=e%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()));var a=this.x;""==this.x&&(a="Unavailable");var r="";return t.data&&t.data.data_labels&&(t.data.data_labels.length>1?this.series.name&&(r=this.series.name):r=t.data.data_labels[0]),'<span style="font-size:12px">'+a+'</span><br><span style="font-size:12px">'+r+'</span><table><tr><td style="color:{series.color};padding:0;padding:0;"><b>'+t.getDisplayValue(e)+"</b></td></tr></table>"},shared:!1,useHTML:!0,backgroundColor:"rgba(255,255,255,1)"},legend:{verticalAlign:"bottom",y:10},plotOptions:{series:{cursor:"pointer",events:{}}},series:[],exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}},navigation:{buttonOptions:{verticalAlign:"top",y:-14,x:10}}},a=[],r=this.data.chartData,i=0;i<r.length;i++){var n={};n.name=this.data.data_labels[i],n.data=r[i],n.data_type=this.data.data_type[i],a.push(n)}e.series=a,this.options.links&&(e.plotOptions.series.events.click=function(e){var a=t.options.links[e.point.x];a&&t.triggerClick({url:a})}),this.options.customChartOptions&&jQuery.extend(e,this.options.customChartOptions),this.element.highcharts(e)},this.renderbar=function(){var t=this;if("Home"==app.getModuleName()&&"currency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()||"multicurrency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()&&this.data.labels.length>5||this.element.closest(".dashboardWidgetContent").width()<400)var e="fullscreen"===this.element.closest(".dashboardWidgetContent").data("displaymode");else e=!0;var a=null;this.data.labels.length>100&&(a=Math.ceil(this.data.labels.length/10));var r={chart:{type:"column",zoomType:"xy",margin:75,options3d:{enabled:!1,viewDistance:15,alpha:8,beta:8,depth:70},backgroundColor:"white",resetZoomButton:{position:{x:-10,y:10},relativeTo:"chart"}},credits:{enabled:!1},title:{text:null},xAxis:{tickInterval:a,categories:this.data.labels,labels:{rotation:-30,step:this.helper.getLabelSteps(this.data.labels,this.element),useHTML:!0,formatter:function(){var t=this.value,e=t.length>30?t.substring(0,29)+"..":t;return""==e&&(e="Unavailable"),e}}},yAxis:{min:0,max:this.data.yMaxValue,maxPadding:.1,labels:{useHTML:!0,formatter:function(){return"currency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()||"multicurrency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()?parsvtHighChart.convertCurrencyToUserFormat(this.value,!0):t.getDisplayValue(this.value)}},title:{text:null}},tooltip:{formatter:function(){var e,a=this.y;a=a%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()),e="currency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()||"multicurrency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()?t.getDisplayValue(this.y,!0):t.getDisplayValue(a);var r=this.x;""==this.x&&(r="Unavailable");var i="";return t.data&&t.data.data_labels&&(t.data.data_labels.length>1?this.series.name&&(i=this.series.name):i=t.data.data_labels[0]),'<span style="font-size:12px">'+r+'</span><br><span style="font-size:12px">'+i+'</span><table><tr><td style="color:{series.color};padding:0;padding:0;"><b>'+e+"</b></td></tr></table>"},shared:!1,useHTML:!0,backgroundColor:"rgba(255,255,255,1)"},colors:this.data.colors&&this.data.colors.length?this.data.colors:Highcharts.defaultOptions.colors,plotOptions:{column:{pointPadding:.2,borderWidth:0,depth:25,dataLabels:{enabled:e,crop:!1,overflow:"none",formatter:function(){var e=this.y;return e=e%1!=0?Highcharts.numberFormat(e,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(e,"","",app.getGroupingSeparator()),t.getDisplayValue(e,this.series.userOptions.data_type)}}},series:{dataLabels:{enabled:!0,formatter:function(){var e=this.y;return e=e%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()),"<b>"+("currency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()||"multicurrency"===t.element.closest("div.dashboardWidgetContent").find(".yAxisFieldType").val()?t.getDisplayValue(this.y,!0):t.getDisplayValue(e))+"</b>"},style:{fontSize:"12px"}},cursor:"pointer",point:{events:{}},colorByPoint:!0}},series:[],legend:{verticalAlign:"bottom",y:10},exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}}},i=[{showInLegend:!1,data:this.data.chartData[0]}];if(this.data.data_labels&&this.data.chartData.length>1){i=[];for(var n=0;n<this.data.data_labels.length;n++){var s={};s.name=this.data.data_labels[n],s.data=this.data.chartData[n],s.data_type=this.data.data_type[n],i.push(s)}delete r.xAxis.labels}r.series=i,!1===this.options.options3d&&(r.chart.options3d.enabled=!1),this.options.links&&(r.plotOptions.series.point.events.click=function(){var e=t.options.links[this.x];e&&t.triggerClick({url:e})}),this.options.hasOwnProperty("customStyles")&&jQuery.extend(r.chart,this.options.customStyles),jQuery.extend(!0,r,this.options.customStyles),jQuery.extend(!0,r,this.options.customChartOptions),this.element.highcharts(r)},this.renderColumn=function(){var t=this,e={chart:{type:"column",backgroundColor:"white",resetZoomButton:{position:{x:-10,y:10},relativeTo:"chart"}},title:{text:null},credits:{enabled:!1},xAxis:{categories:this.data.categories,step:this.helper.getLabelSteps(this.data.categories,this.element),labels:{useHTML:!0,formatter:function(){var t=this.value;return t.length>30?t.substring(0,29)+"..":t}}},yAxis:{min:0,labels:{useHTML:!0,formatter:function(){return t.getDisplayValue(this.value)}},title:{text:null}},tooltip:{formatter:function(){var e=this.y;return e=e%1!=0?Highcharts.numberFormat(this.y,app.getNumberOfDecimals(),app.getDecimalSeparator(),app.getGroupingSeparator()):Highcharts.numberFormat(this.y,"","",app.getGroupingSeparator()),'<span style="font-size:12px">'+this.x+'</span><table><tr><td style="color:{series.color};padding:0;padding:0;"><b>'+t.getDisplayValue(e)+"%</b></td></tr></table>"},shared:!1,useHTML:!0,backgroundColor:"rgba(255,255,255,1)"},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:this.data.chartData,exporting:{buttons:{contextButton:{menuItems:[{textKey:"viewFullscreen",text:app.vtranslate("View in full screen"),onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},{textKey:"printChart",text:app.vtranslate("JS_PRINT"),onclick:function(){this.print()}},{textKey:"downloadPNG",text:app.vtranslate("JS_SAVE_AS_IMAGE"),onclick:function(){this.exportChart()}},{textKey:"downloadPDF",text:app.vtranslate("Download PDF document"),onclick:function(){this.exportChart({type:"application/pdf"})}}]}}}};jQuery.extend(!0,e,this.options.customChartOptions),this.element.highcharts(e)},this.init=function(t,e,a){switch(this.element=t,this.data=e,this.options=a,a.renderer){case"pie":this.renderPie();break;case"bar":this.renderbar();break;case"funnel":this.renderFunnel();break;case"multibar":this.renderMultibar();break;case"horizontalbar":this.renderHorizontalbar();break;case"linechart":this.renderLine();break;case"column":this.renderColumn();break;default:console.log("highchart renderer not supported")}}};