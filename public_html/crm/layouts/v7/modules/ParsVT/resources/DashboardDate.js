/* ********************************************************************************
 * The content of this file is subject to the VTFarsi.ir Modules License("License");
 * You may not use this file except in compliance with the License
 * The Initial Developer of the Original Code is VTFarsi.ir
 * Portions created by VTFarsi.ir. are Copyright(C) VTFarsi Team
 * All Rights Reserved.
 * ****************************************************************************** */
function weekday_before(e,a){return a-jwday(a-e)}function search_weekday(e,a,n,r){return weekday_before(e,a+n*r)}function nearest_weekday(e,a){return search_weekday(e,a,1,3)}function next_weekday(e,a){return search_weekday(e,a,1,7)}function next_or_current_weekday(e,a){return search_weekday(e,a,1,6)}function previous_weekday(e,a){return search_weekday(e,a,-1,1)}function previous_or_current_weekday(e,a){return search_weekday(e,a,1,0)}function TestSomething(){}function leap_gregorian(e){return e%4==0&&!(e%100==0&&e%400!=0)}function gregorian_to_jd(e,a,n){return GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*a-362)/12+(2>=a?0:leap_gregorian(e)?-1:-2)+n)}function jd_to_gregorian(e){var a,n,r,o,t,u,i,d,l,_,c,m;return a=Math.floor(e-.5)+.5,n=a-GREGORIAN_EPOCH,r=Math.floor(n/146097),o=mod(n,146097),t=Math.floor(o/36524),u=mod(o,36524),i=Math.floor(u/1461),d=mod(u,1461),l=Math.floor(d/365),_=400*r+100*t+4*i+l,4!=t&&4!=l&&_++,c=a-gregorian_to_jd(_,1,1),m=a<gregorian_to_jd(_,3,1)?0:leap_gregorian(_)?1:2,month=Math.floor((12*(c+m)+373)/367),day=a-gregorian_to_jd(_,month,1)+1,new Array(_,month,day)}function n_weeks(e,a,n){var r=7*n;return r+=n>0?previous_weekday(e,a):next_weekday(e,a)}function iso_to_julian(e,a,n){return n+n_weeks(0,gregorian_to_jd(e-1,12,28),a)}function jd_to_iso(e){var a,n,r;return a=jd_to_gregorian(e-3)[0],e>=iso_to_julian(a+1,1,1)&&a++,n=Math.floor((e-iso_to_julian(a,1,1))/7)+1,r=jwday(e),0==r&&(r=7),new Array(a,n,r)}function iso_day_to_julian(e,a){return a-1+gregorian_to_jd(e,1,1)}function jd_to_iso_day(e){var a,n;return a=jd_to_gregorian(e)[0],n=Math.floor(e-gregorian_to_jd(a,1,1))+1,new Array(a,n)}function pad(e,a,n){for(var r=e.toString();r.length<a;)r=n+r;return r}function leap_julian(e){return e%4==(e>0?0:3)}function julian_to_jd(e,a,n){return 1>e&&e++,2>=a&&(e--,a+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(a+1))+n-1524.5}function jd_to_julian(e){var a,n,r,o,t,u,i,d,l;return e+=.5,a=Math.floor(e),n=a,r=n+1524,o=Math.floor((r-122.1)/365.25),t=Math.floor(365.25*o),u=Math.floor((r-t)/30.6001),d=Math.floor(14>u?u-1:u-13),i=Math.floor(d>2?o-4716:o-4715),l=r-t-Math.floor(30.6001*u),1>i&&i--,new Array(i,d,l)}function hebrew_leap(e){return mod(7*e+1,19)<7}function hebrew_year_months(e){return hebrew_leap(e)?13:12}function hebrew_delay_1(e){var a,n;return a=Math.floor((235*e-234)/19),n=12084+13753*a,day=29*a+Math.floor(n/25920),mod(3*(day+1),7)<3&&day++,day}function hebrew_delay_2(e){var a,n,r;return a=hebrew_delay_1(e-1),n=hebrew_delay_1(e),r=hebrew_delay_1(e+1),r-n==356?2:n-a==382?1:0}function hebrew_year_days(e){return hebrew_to_jd(e+1,7,1)-hebrew_to_jd(e,7,1)}function hebrew_month_days(e,a){return 2==a||4==a||6==a||10==a||13==a?29:12!=a||hebrew_leap(e)?8==a&&5!=mod(hebrew_year_days(e),10)?29:9==a&&3==mod(hebrew_year_days(e),10)?29:30:29}function hebrew_to_jd(e,a,n){var r,o,t;if(t=hebrew_year_months(e),r=HEBREW_EPOCH+hebrew_delay_1(e)+hebrew_delay_2(e)+n+1,7>a){for(o=7;t>=o;o++)r+=hebrew_month_days(e,o);for(o=1;a>o;o++)r+=hebrew_month_days(e,o)}else for(o=7;a>o;o++)r+=hebrew_month_days(e,o);return r}function jd_to_hebrew(e){var a,n,r,o,t,u;for(e=Math.floor(e)+.5,t=Math.floor(98496*(e-HEBREW_EPOCH)/35975351),a=t-1,o=t;e>=hebrew_to_jd(o,7,1);o++)a++;for(u=e<hebrew_to_jd(a,1,1)?7:1,n=u,o=u;e>hebrew_to_jd(a,o,hebrew_month_days(a,o));o++)n++;return r=e-hebrew_to_jd(a,n,1)+1,new Array(a,n,r)}function equinoxe_a_paris(e){var a,n,r,o,t;return a=equinox(e,2),n=a-deltat(e)/86400,r=n+equationOfTime(a),t=.006493055555555557,o=r+t}function paris_equinoxe_jd(e){var a,n;return a=equinoxe_a_paris(e),n=Math.floor(a-.5)+.5}function annee_da_la_revolution(e){var a,n,r,o=jd_to_gregorian(e)[0]-2;for(a=paris_equinoxe_jd(o);a>e;)o--,a=paris_equinoxe_jd(o);for(n=a-1;!(e>=a&&n>e);)a=n,o++,n=paris_equinoxe_jd(o);return r=Math.round((a-FRENCH_REVOLUTIONARY_EPOCH)/TropicalYear)+1,new Array(r,a)}function jd_to_french_revolutionary(e){var a,n,r,o,t,u;return e=Math.floor(e)+.5,t=annee_da_la_revolution(e),a=t[0],u=t[1],n=Math.floor((e-u)/30)+1,o=(e-u)%30,r=Math.floor(o/10)+1,o=o%10+1,new Array(a,n,r,o)}function french_revolutionary_to_jd(e,a,n,r){var o,t,u,i;for(u=FRENCH_REVOLUTIONARY_EPOCH+TropicalYear*(e-1-1),o=new Array(e-1,0);o[0]<e;)o=annee_da_la_revolution(u),u=o[1]+(TropicalYear+2);return t=o[1],i=t+30*(a-1)+10*(n-1)+(r-1)}function leap_islamic(e){return 11>(11*e+14)%30}function islamic_to_jd(e,a,n){return n+Math.ceil(29.5*(a-1))+354*(e-1)+Math.floor((3+11*e)/30)+ISLAMIC_EPOCH-1}function jd_to_islamic(e){var a,n,r;return e=Math.floor(e)+.5,a=Math.floor((30*(e-ISLAMIC_EPOCH)+10646)/10631),n=Math.min(12,Math.ceil((e-(29+islamic_to_jd(a,1,1)))/29.5)+1),r=e-islamic_to_jd(a,n,1)+1,new Array(a,n,r)}function leap_persian(e){return 682>682*((e-(e>0?474:473))%2820+474+38)%2816}function leap_kpersian(e){return 682>682*((e-1180-(e>0?474:473))%2820+474+38)%2816}function kpersian_to_jd(e,a,n){var r,o;return r=e-1180-(e>=0?474:473),o=474+mod(r,2820),n+(7>=a?31*(a-1):30*(a-1)+6)+Math.floor((682*o-110)/2816)+365*(o-1)+1029983*Math.floor(r/2820)+(PERSIAN_EPOCH-1)}function persian_to_jd(e,a,n){var r,o;return r=e-(e>=0?474:473),o=474+mod(r,2820),n+(7>=a?31*(a-1):30*(a-1)+6)+Math.floor((682*o-110)/2816)+365*(o-1)+1029983*Math.floor(r/2820)+(PERSIAN_EPOCH-1)}function apersian_to_jd(e,a,n){var r,o;return r=e-(e>=0?474:473),o=474+mod(r,2820),n+(7>=a?31*(a-1):30*(a-1)+6)+Math.floor((682*o-110)/2816)+365*(o-1)+1029983*Math.floor(r/2820)+(PERSIAN_EPOCH-1)}function jd_to_kpersian(e){var a,n,r,o,t,u,i,d,l,_;return e=Math.floor(e)+.5,o=e-persian_to_jd(475,1,1),t=Math.floor(o/1029983),u=mod(o,1029983),1029982==u?i=2820:(d=Math.floor(u/366),l=mod(u,366),i=Math.floor((2134*d+2816*l+2815)/1028522)+d+1),a=i+2820*t+474,0>=a&&a--,_=e-persian_to_jd(a,1,1)+1,n=186>=_?Math.ceil(_/31):Math.ceil((_-6)/30),r=e-persian_to_jd(a,n,1)+1,new Array(a+1180,n,r)}function jd_to_persian(e){var a,n,r,o,t,u,i,d,l,_;return e=Math.floor(e)+.5,o=e-persian_to_jd(475,1,1),t=Math.floor(o/1029983),u=mod(o,1029983),1029982==u?i=2820:(d=Math.floor(u/366),l=mod(u,366),i=Math.floor((2134*d+2816*l+2815)/1028522)+d+1),a=i+2820*t+474,0>=a&&a--,_=e-persian_to_jd(a,1,1)+1,n=186>=_?Math.ceil(_/31):Math.ceil((_-6)/30),r=e-persian_to_jd(a,n,1)+1,new Array(a,n,r)}function jd_to_apersian(e){var a,n,r,o,t,u,i,d,l,_;return e=Math.floor(e)+.5,o=e-apersian_to_jd(475,1,1),t=Math.floor(o/1029983),u=mod(o,1029983),1029982==u?i=2820:(d=Math.floor(u/366),l=mod(u,366),i=Math.floor((2134*d+2816*l+2815)/1028522)+d+1),a=i+2820*t+474,0>=a&&a--,_=e-apersian_to_jd(a,1,1)+1,n=186>=_?Math.ceil(_/31):Math.ceil((_-6)/30),r=e-apersian_to_jd(a,n,1)+1,new Array(a,n,r)}function mayan_count_to_jd(e,a,n,r,o){return MAYAN_COUNT_EPOCH+144e3*e+7200*a+360*n+20*r+o}function jd_to_mayan_count(e){var a,n,r,o,t,u;return a=e-MAYAN_COUNT_EPOCH,n=Math.floor(a/144e3),a=mod(a,144e3),r=Math.floor(a/7200),a=mod(a,7200),o=Math.floor(a/360),a=mod(a,360),t=Math.floor(a/20),u=mod(a,20),new Array(n,r,o,t,u)}function jd_to_mayan_haab(e){var a,n;return a=e-MAYAN_COUNT_EPOCH,n=mod(a+8+340,365),new Array(Math.floor(n/20)+1,mod(n,20))}function jd_to_mayan_tzolkin(e){var a=e-MAYAN_COUNT_EPOCH;return new Array(amod(a+20,20),amod(a+4,13))}function bahai_to_jd(e,a,n,r,o){var t;return t=361*(e-1)+19*(a-1)+(n-1)+jd_to_gregorian(BAHAI_EPOCH)[0],gregorian_to_jd(t,3,20)+19*(r-1)+(20!=r?0:leap_gregorian(t+1)?-14:-15)+o}function jd_to_bahai(e){var a,n,r,o,t,u,i,d,l,_;return e=Math.floor(e)+.5,u=jd_to_gregorian(e)[0],i=jd_to_gregorian(BAHAI_EPOCH)[0],d=u-(i+(gregorian_to_jd(u,1,1)<=e&&e<=gregorian_to_jd(u,3,20)?1:0)),a=Math.floor(d/361)+1,n=Math.floor(mod(d,361)/19)+1,r=mod(d,19)+1,l=e-bahai_to_jd(a,n,r,1,1),_=bahai_to_jd(a,n,r,20,1),o=e>=_?20:Math.floor(l/19)+1,t=e+1-bahai_to_jd(a,n,r,o,1),new Array(a,n,r,o,t)}function indian_civil_to_jd(e,a,n){var r,o,t,u,i,d;return o=e+78,t=leap_gregorian(o),u=gregorian_to_jd(o,3,t?21:22),r=t?31:30,1==a?i=u+(n-1):(i=u+r,d=a-2,d=Math.min(d,5),i+=31*d,a>=8&&(d=a-7,i+=30*d),i+=n-1),i}function jd_to_indian_civil(e){var a,n,r,o,t,u,i,d,l;return n=78,u=80,e=Math.floor(e)+.5,r=jd_to_gregorian(e),t=leap_gregorian(r[0]),i=r[0]-n,o=gregorian_to_jd(r[0],1,1),d=e-o,a=t?31:30,u>d&&(i--,d+=a+155+90+10+u),d-=u,a>d?(month=1,day=d+1):(l=d-a,155>l?(month=Math.floor(l/31)+2,day=l%31+1):(l-=155,month=Math.floor(l/30)+7,day=l%30+1)),new Array(i,month,day)}function updateFromGregorian(){var e,a,n,r,o,t,u,i,d;a=new Number(document.gregorian.year.value),n=document.gregorian.month.selectedIndex,r=new Number(document.gregorian.day.value),o=t=u=0,o=new Number(document.gregorian.hour.value),t=new Number(document.gregorian.min.value),u=new Number(document.gregorian.sec.value),e=gregorian_to_jd(a,n+1,r)+Math.floor(u+60*(t+60*o)+.5)/86400,document.julianday.day.value=e,document.modifiedjulianday.day.value=e-JMJD,i=jwday(e),document.gregorian.wday.value=Weekdays[i],document.gregorian.leap.value=NormLeap[leap_gregorian(a)?1:0];var l=document.gregorian.leap.value+" - "+a+"/"+(n+1)+"/"+r;d=jd_to_islamic(e),document.islamic.year.value=d[0],document.islamic.month.selectedIndex=d[1]-1,document.islamic.day.value=d[2],document.islamic.wday.value=ISLAMIC_WEEKDAYS[i],document.islamic.leap.value=NormLeap[leap_islamic(d[0])?1:0];var _=document.islamic.leap.value+" - "+d[0]+"/"+d[1]+"/"+d[2];perscal=jd_to_persian(e),document.persian.year.value=perscal[0],document.persian.month.selectedIndex=perscal[1]-1,document.persian.day.value=perscal[2],document.persian.wday.value=PERSIAN_WEEKDAYS[i],document.persian.leap.value=NormLeap[leap_persian(perscal[0])?1:0],document.getElementById("outputdate").innerText="روز "+document.persian.wday.value+" \nشمسی:"+document.persian.leap.value+" - "+perscal[0]+"/"+perscal[1]+"/"+perscal[2]+"\n قمری:"+_+"\n میلادی:"+l}function calcGregorian(){updateFromGregorian()}function calcJulian(){var e,a,n;e=new Number(document.julianday.day.value),a=jd_to_gregorian(e),n=jhms(e),document.gregorian.year.value=a[0],document.gregorian.month.selectedIndex=a[1]-1,document.gregorian.day.value=a[2],document.gregorian.hour.value=pad(n[0],2," "),document.gregorian.min.value=pad(n[1],2,"0"),document.gregorian.sec.value=pad(n[2],2,"0"),updateFromGregorian()}function setJulian(e){document.julianday.day.value=new Number(e),calcJulian()}function calcModifiedJulian(){setJulian(new Number(document.modifiedjulianday.day.value)+JMJD)}function calcJulianCalendar(){setJulian(julian_to_jd(new Number(document.juliancalendar.year.value),document.juliancalendar.month.selectedIndex+1,new Number(document.juliancalendar.day.value)))}function calcHebrew(){setJulian(hebrew_to_jd(new Number(document.hebrew.year.value),document.hebrew.month.selectedIndex+1,new Number(document.hebrew.day.value)))}function calcIslamic(){setJulian(islamic_to_jd(new Number(document.islamic.year.value),document.islamic.month.selectedIndex+1,new Number(document.islamic.day.value)))}function calcPersian(){setJulian(persian_to_jd(new Number(document.persian.year.value),document.persian.month.selectedIndex+1,new Number(document.persian.day.value))),Shday=document.persian.year.value,Shmonth=document.persian.month.selectedIndex+1,Shyear=document.persian.day.value}function calckPersian(){setJulian(kpersian_to_jd(new Number(document.kpersian.year.value),document.kpersian.month.selectedIndex+1,new Number(document.kpersian.day.value)))}function calcaPersian(){setJulian(persian_to_jd(new Number(document.apersian.year.value),document.apersian.month.selectedIndex+1,new Number(document.apersian.day.value)))}function calckordiPersian(){setJulian(persian_to_jd(new Number(document.kordipersian.year.value),document.kordipersian.month.selectedIndex+1,new Number(document.kordipersian.day.value)))}function calcpashtoPersian(){setJulian(persian_to_jd(new Number(document.pashtopersian.year.value),document.pashtopersian.month.selectedIndex+1,new Number(document.pashtopersian.day.value)))}function calcMayanCount(){setJulian(mayan_count_to_jd(new Number(document.mayancount.baktun.value),new Number(document.mayancount.katun.value),new Number(document.mayancount.tun.value),new Number(document.mayancount.uinal.value),new Number(document.mayancount.kin.value)))}function calcBahai(){setJulian(bahai_to_jd(new Number(document.bahai.kull_i_shay.value),new Number(document.bahai.vahid.value),document.bahai.year.selectedIndex+1,document.bahai.month.selectedIndex+1,document.bahai.day.selectedIndex+1))}function calcIndianCivilCalendar(){setJulian(indian_civil_to_jd(new Number(document.indiancivilcalendar.year.value),document.indiancivilcalendar.month.selectedIndex+1,new Number(document.indiancivilcalendar.day.value)))}function calcFrench(){var e,a,n;a=document.french.jour.selectedIndex,e=document.french.decade.selectedIndex,n=document.french.mois.selectedIndex,a>9&&(a-=11,e=0,n=12),12==n&&(e=0,a>5&&(a=0)),setJulian(french_revolutionary_to_jd(new Number(document.french.an.value),n+1,e+1,a+1))}function calcGregSerial(){setJulian(new Number(document.gregserial.day.value)+J0000)}function calcExcelSerial1900(){var e=new Number(document.excelserial1900.day.value);e>60&&e--,setJulian(e-1+J1900)}function calcExcelSerial1904(){setJulian(new Number(document.excelserial1904.day.value)+J1904)}function calcUnixTime(){var e=new Number(document.unixtime.time.value);setJulian(J1970+e/86400)}function calcIsoWeek(){var e=new Number(document.isoweek.year.value),a=new Number(document.isoweek.week.value),n=new Number(document.isoweek.day.value);setJulian(iso_to_julian(e,a,n))}function calcIsoDay(){var e=new Number(document.isoday.year.value),a=new Number(document.isoday.day.value);setJulian(iso_day_to_julian(e,a))}function switchCalendar(e){document.islamic.style.display="none",document.gregorian.style.display="none",document.persian.style.display="none",document.forms[e].style.display="block"}var J0000=1721424.5,J1970=2440587.5,JMJD=2400000.5,J1900=2415020.5,J1904=2416480.5,SolarMonth=new Array("","Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfanad"),NormLeap=new Array("سال عادی","سال کبیسه"),GREGORIAN_EPOCH=1721425.5,JULIAN_EPOCH=1721423.5,HEBREW_EPOCH=347995.5,FRENCH_REVOLUTIONARY_EPOCH=2375839.5,ISLAMIC_EPOCH=1948439.5,ISLAMIC_WEEKDAYS=new Array("‫الأحد‬ (یکشنبه)","‫الاثنين‬ (دوشنبه)","‫الثلاثاء‬ (سه شنبه)'","‫الأربعاء‬ (چهارشنبه)","‫الخميس‬ (پنج شنبه)","‫الجمعة‬ (جمعه)","‫السبت‬ (شنبه)"),PERSIAN_EPOCH=1948320.5,PERSIAN_WEEKDAYS=new Array("یک شنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","آدینه‏","شنبه"),KORDIPERSIAN_WEEKDAYS=new Array("یه ک شه م","دو شه م","سی شه م","چارشه م","پنج شه م","ئین","شه می"),PASHTOPERSIAN_WEEKDAYS=new Array("یکشنبه","دوشنبه","سې شنبه","چهارشنبه","پنجشنبه","جمعه","شنبې"),MAYAN_COUNT_EPOCH=584282.5,MAYAN_HAAB_MONTHS=new Array("Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"),MAYAN_TZOLKIN_MONTHS=new Array("Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"),BAHAI_EPOCH=2394646.5,BAHAI_WEEKDAYS=new Array("یوم الجمال","یوم الکمال","یوم الفضال","یوم العدال","یوم الاستجلال","یوم الاستقلال","یوم الجلال"),INDIAN_CIVIL_WEEKDAYS=new Array("یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه","شنبه");function astor(n){return n*(Math.PI/648e3)}function dtr(n){return n*Math.PI/180}function rtd(n){return 180*n/Math.PI}function fixangle(n){return n-360*Math.floor(n/360)}function fixangr(n){return n-2*Math.PI*Math.floor(n/(2*Math.PI))}function dsin(n){return Math.sin(dtr(n))}function dcos(n){return Math.cos(dtr(n))}function mod(n,r){return n-r*Math.floor(n/r)}function amod(n,r){return mod(n-1,r)+1}function jhms(n){var r;return n+=.5,r=86400*(n-Math.floor(n))+.5,new Array(Math.floor(r/3600),Math.floor(r/60%60),Math.floor(r%60))}function jwday(n){return mod(Math.floor(n+1.5),7)}function obliqeq(n){var r,t,a,e;if(a=t=(n-J2000)/(100*JulianCentury),r=23.43929111111111,Math.abs(t)<1)for(e=0;e<10;e++)r+=oterms[e]/3600*a,a*=t;return r}function nutation(n){var r,t,a,e,o,i,u,d,s=(n-2451545)/36525,f=new Array,M=0,l=0;for(i=s*(o=s*s),f[0]=dtr(297.850363+445267.11148*s-.0019142*o+i/189474),f[1]=dtr(357.52772+35999.05034*s-1603e-7*o-i/3e5),f[2]=dtr(134.96298+477198.867398*s+.0086972*o+i/56250),f[3]=dtr(93.27191+483202.017538*s-.0036825*o+i/327270),f[4]=dtr(125.04452-1934.136261*s+.0020708*o+i/45e4),a=0;a<5;a++)f[a]=fixangr(f[a]);for(u=s/10,a=0;a<63;a++){for(d=0,e=0;e<5;e++)0!=nutArgMult[5*a+e]&&(d+=nutArgMult[5*a+e]*f[e]);M+=(nutArgCoeff[4*a+0]+nutArgCoeff[4*a+1]*u)*Math.sin(d),l+=(nutArgCoeff[4*a+2]+nutArgCoeff[4*a+3]*u)*Math.cos(d)}return r=M/36e6,t=l/36e6,new Array(r,t)}function ecliptoeq(n,r,t){var a,e,o;return a=dtr(obliqeq(n)),log+="Obliquity: "+rtd(a)+"\n",e=rtd(Math.atan2(Math.cos(a)*Math.sin(dtr(r))-Math.tan(dtr(t))*Math.sin(a),Math.cos(dtr(r)))),log+="RA = "+e+"\n",e=fixangle(rtd(Math.atan2(Math.cos(a)*Math.sin(dtr(r))-Math.tan(dtr(t))*Math.sin(a),Math.cos(dtr(r))))),o=rtd(Math.asin(Math.sin(a)*Math.sin(dtr(r))*Math.cos(dtr(t))+Math.sin(dtr(t))*Math.cos(a))),new Array(e,o)}function deltat(n){var r,t,a,e;return n>=1620&&n<=2e3?(t=(n-1620)/2-(a=Math.floor((n-1620)/2)),r=deltaTtab[a]+(deltaTtab[a+1]-deltaTtab[a])*t):(e=(n-2e3)/100,n<948?r=2177+497*e+44.1*e*e:(r=102+102*e+25.3*e*e,n>2e3&&n<2100&&(r+=.37*(n-2100)))),r}function equinox(n,r){var t,a,e,o,i,u,d,s,f;for(n<1e3?(i=JDE0tab1000,f=n/1e3):(i=JDE0tab2000,f=(n-2e3)/1e3),t=1+.0334*dcos(s=35999.373*(d=((o=i[r][0]+i[r][1]*f+i[r][2]*f*f+i[r][3]*f*f*f+i[r][4]*f*f*f*f)-2451545)/36525)-2.47)+7e-4*dcos(2*s),u=0,a=e=0;a<24;a++)u+=EquinoxpTerms[e]*dcos(EquinoxpTerms[e+1]+EquinoxpTerms[e+2]*d),e+=3;return o+1e-5*u/t}function sunpos(n){var r,t,a,e,o,i,u,d,s,f,M,l,h,c,y,A,w;return r=(n-J2000)/JulianCentury,t=r*r,a=280.46646+36000.76983*r+3032e-7*t,a=fixangle(a),e=357.52911+35999.05029*r+-1537e-7*t,e=fixangle(e),o=.016708634+-42037e-9*r+-1.267e-7*t,i=(1.914602+-.004817*r+-14e-6*t)*dsin(e)+(.019993-101e-6*r)*dsin(2*e)+289e-6*dsin(3*e),u=a+i,d=e+i,s=1.000001018*(1-o*o)/(1+o*dcos(d)),f=125.04-1934.136*r,M=u+-.00569+-.00478*dsin(f),h=obliqeq(n),l=h+.00256*dcos(f),c=rtd(Math.atan2(dcos(h)*dsin(u),dcos(u))),c=fixangle(c),y=rtd(Math.asin(dsin(h)*dsin(u))),A=rtd(Math.atan2(dcos(l)*dsin(M),dcos(M))),A=fixangle(A),w=rtd(Math.asin(dsin(l)*dsin(M))),new Array(a,e,o,i,u,d,s,M,c,y,A,w)}function equationOfTime(n){var r,t,a,e,o,i;return i=(n-J2000)/JulianMillennium,o=280.4664567+360007.6982779*i+.03032028*i*i+i*i*i/49931+-i*i*i*i/15300+-i*i*i*i*i/2e6,o=fixangle(o),r=sunpos(n)[10],t=nutation(n)[0],e=obliqeq(n)+nutation(n)[1],a=o+-.0057183+-r+t*dcos(e),a-=20*Math.floor(a/20),a/=1440}var J2000=2451545,JulianCentury=36525,JulianMillennium=10*JulianCentury,AstronomicalUnit=149597870,TropicalYear=365.24219878,Weekdays=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),oterms=new Array(-4680.93,-1.55,1999.25,-51.38,-249.67,-39.05,7.12,27.87,5.79,2.45),nutArgMult=new Array(0,0,0,0,1,-2,0,0,2,2,0,0,0,2,2,0,0,0,0,2,0,1,0,0,0,0,0,1,0,0,-2,1,0,2,2,0,0,0,2,1,0,0,1,2,2,-2,-1,0,2,2,-2,0,1,0,0,-2,0,0,2,1,0,0,-1,2,2,2,0,0,0,0,0,0,1,0,1,2,0,-1,2,2,0,0,-1,0,1,0,0,1,2,1,-2,0,2,0,0,0,0,-2,2,1,2,0,0,2,2,0,0,2,2,2,0,0,2,0,0,-2,0,1,2,2,0,0,0,2,0,-2,0,0,2,0,0,0,-1,2,1,0,2,0,0,0,2,0,-1,0,1,-2,2,0,2,2,0,1,0,0,1,-2,0,1,0,1,0,-1,0,0,1,0,0,2,-2,0,2,0,-1,2,1,2,0,1,2,2,0,1,0,2,2,-2,1,1,0,0,0,-1,0,2,2,2,0,0,2,1,2,0,1,0,0,-2,0,2,2,2,-2,0,1,2,1,2,0,-2,0,1,2,0,0,0,1,0,-1,1,0,0,-2,-1,0,2,1,-2,0,0,0,1,0,0,2,2,1,-2,0,2,0,1,-2,1,0,2,1,0,0,1,-2,0,-1,0,1,0,0,-2,1,0,0,0,1,0,0,0,0,0,0,1,2,0,-1,-1,1,0,0,0,1,1,0,0,0,-1,1,2,2,2,-1,-1,2,2,0,0,-2,2,2,0,0,3,2,2,2,-1,0,2,2),nutArgCoeff=new Array(-171996,-1742,92095,89,-13187,-16,5736,-31,-2274,-2,977,-5,2062,2,-895,5,1426,-34,54,-1,712,1,-7,0,-517,12,224,-6,-386,-4,200,0,-301,0,129,-1,217,-5,-95,3,-158,0,0,0,129,1,-70,0,123,0,-53,0,63,0,0,0,63,1,-33,0,-59,0,26,0,-58,-1,32,0,-51,0,27,0,48,0,0,0,46,0,-24,0,-38,0,16,0,-31,0,13,0,29,0,0,0,29,0,-12,0,26,0,0,0,-22,0,0,0,21,0,-10,0,17,-1,0,0,16,0,-8,0,-16,1,7,0,-15,0,9,0,-13,0,7,0,-12,0,6,0,11,0,0,0,-10,0,5,0,-8,0,3,0,7,0,-3,0,-7,0,0,0,-7,0,3,0,-7,0,3,0,6,0,0,0,6,0,-3,0,6,0,-3,0,-6,0,3,0,-6,0,3,0,5,0,0,0,-5,0,3,0,-5,0,3,0,-5,0,3,0,4,0,0,0,4,0,0,0,4,0,0,0,-4,0,0,0,-4,0,0,0,-4,0,0,0,3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0),deltaTtab=new Array(121,112,103,95,88,82,77,72,68,63,60,56,53,51,48,46,44,42,40,38,35,33,31,29,26,24,22,20,18,16,14,12,11,10,9,8,7,7,7,7,7,7,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,16,16,15,15,14,13,13.1,12.5,12.2,12,12,12,12,12,12,11.9,11.6,11,10.2,9.2,8.2,7.1,6.2,5.6,5.4,5.3,5.4,5.6,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.6,7.7,7.3,6.2,5.2,2.7,1.4,-1.2,-2.8,-3.8,-4.8,-5.5,-5.3,-5.6,-5.7,-5.9,-6,-6.3,-6.5,-6.2,-4.7,-2.8,-.1,2.6,5.3,7.7,10.4,13.3,16,18.2,20.2,21.1,22.4,23.5,23.8,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3,60,61.6,63,65,66.6),EquinoxpTerms=new Array(485,324.96,1934.136,203,337.23,32964.467,199,342.08,20.186,182,27.85,445267.112,156,73.14,45036.886,136,171.52,22518.443,77,222.54,65928.934,74,296.72,3034.906,70,243.58,9037.513,58,119.81,33718.147,52,297.17,150.678,50,21.02,2281.226,45,247.54,29929.562,44,325.15,31555.956,29,60.93,4443.417,18,155.12,67555.328,17,288.79,4562.452,16,198.04,62894.029,14,199.76,31436.921,12,95.39,14577.848,12,287.11,31931.756,12,320.81,34777.259,9,227.73,1222.114,8,15.45,16859.074);JDE0tab1000=new Array(new Array(1721139.29189,365242.1374,.06134,.00111,-71e-5),new Array(1721233.25401,365241.72562,-.05323,.00907,25e-5),new Array(1721325.70455,365242.49558,-.11677,-.00297,74e-5),new Array(1721414.39987,365242.88257,-.00769,-.00933,-6e-5)),JDE0tab2000=new Array(new Array(2451623.80984,365242.37404,.05169,-.00411,-57e-5),new Array(2451716.56767,365241.62603,.00325,.00888,-3e-4),new Array(2451810.21715,365242.01767,-.11575,.00337,78e-5),new Array(2451900.05952,365242.74049,-.06223,-.00823,32e-5));
