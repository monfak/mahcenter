/* ********************************************************************************
 * The content of this file is subject to the ParsVT.com Modules License("License");
 * You may not use this file except in compliance with the License
 * The Initial Developer of the Original Code is ParsVT.com
 * Portions created by ParsVT.com. are Copyright(C) ParsVT Team
 * All Rights Reserved.
 * ****************************************************************************** */
var supportedParsVTCustomFields={Salutation_Field:{uitype:55,name:"Salutation Field",prefix:"cf_pcf_snf"},Radio_Field:{uitype:16,name:"Radio",prefix:"cf_pcf_rbf"},Global_Picklist_Field:{uitype:1,name:"Global Picklist Field",prefix:"cf_pcf_gpf"},AutoNumber_Field:{uitype:786,name:"Auto Number Field",prefix:"cf_pcf_anf"},Formula_Field:{uitype:1,name:"Formula Field",prefix:"cf_pcf_aff"},Rollup_Field:{uitype:1,name:"Rollup Field",prefix:"cf_pcf_ruf"},Grid_Field:{uitype:35,name:"Grid",prefix:"cf_pcf_vgf"},Validated_Field:{uitype:781,name:"Validated Field",prefix:"cf_pcf_cvf"},Related_Field:{uitype:10,name:"Related Field",prefix:"rf_pcf_rmf"},Multi_Related_Field:{uitype:10,name:"Multi Related Field",prefix:"rf_pcf_mrf"},Gdate_Field:{uitype:1,name:"Gregorian Date",prefix:"cf_pcf_gdt"},National_ID:{uitype:1,name:"National ID",prefix:"cf_pcf_irc"},National_CODE:{uitype:1,name:"Legal National Code",prefix:"cf_pcf_lid"},IRAN_VAT_ID:{uitype:1,name:"Iran Vat ID",prefix:"cf_pcf_irv"},TAX_FILE_NUMBER:{uitype:1,name:"Tax File Number",prefix:"cf_pcf_irf"},IRAN_POSTAL_CODE:{uitype:1,name:"Iran Postal Code",prefix:"cf_pcf_irp"},Iran_Mobile:{uitype:11,name:"Iran Mobile Number",prefix:"cf_pcf_irm"},Telegram_ID:{uitype:1,name:"Telegram ID",prefix:"cf_pcf_tcf"},Whatsapp_ID:{uitype:11,name:"Whatsapp Number",prefix:"cf_pcf_wcf"},Instagram:{uitype:1,name:"Instagram ID",prefix:"cf_pcf_igf"},Twitter:{uitype:1,name:"Twitter ID/Hashtag",prefix:"cf_pcf_twf"},RTF_Description_Field:{uitype:19,name:"RTF Description",prefix:"cf_pcf_ecf"},IBAN_Code:{uitype:1,name:"IBAN Code",prefix:"cf_pcf_ibn"},Credit_Card_Number:{uitype:1,name:"Credit Card Number",prefix:"cf_pcf_ccn"},QR_Code:{uitype:19,name:"QR Code",prefix:"cf_pcf_qrc"},Assigned_To:{uitype:53,name:"Assigned to",prefix:"cf_pcf_atf"},UsersList:{uitype:780,name:"Users List",prefix:"cf_pcf_cul"},Cities_field:{uitype:777,name:"Cities field",prefix:"cf_pcf_icf"},Countries_field:{uitype:788,name:"Countries field",prefix:"cf_pcf_csf"},Date_Time_Field:{uitype:778,name:"DateTime",prefix:"cf_pcf_dtf"},Advanced_Date_Field:{uitype:5,name:"Anniversary Date",prefix:"cf_pcf_adf"},Barcode_Field:{uitype:779,name:"Barcode",prefix:"cf_pcf_bcf"},DigitalSignature_Field:{uitype:776,name:"Digital Signature",prefix:"cf_pcf_dsf"},Capture_Field:{uitype:1,name:"Capture image field",prefix:"cf_pcf_ccf"},Video_Field:{uitype:1,name:"Record video field",prefix:"cf_pcf_rvf"},Voice_Recorder_Field:{uitype:21,name:"Voice Recorder Field",prefix:"cf_pcf_vrf"},Upload_Field:{uitype:1,name:"Upload field",prefix:"cf_pcf_ulf"},Upload_Fields:{uitype:19,name:"Upload fields",prefix:"cf_pcf_muf"},Password_Field:{uitype:21,name:"Password",prefix:"cf_pcf_pwd"},Encrypted_Field:{uitype:787,name:"Encrypted Field",prefix:"cf_pcf_sef"},Multicurrency_Field:{uitype:74,name:"Multi Currency Field",prefix:"cf_pcf_mcf"},Currency_Name:{uitype:117,name:"Currency name",prefix:"cf_pcf_cnf"},Coordinate:{uitype:1,name:"Coordinate",prefix:"cf_pcf_gps"},Rating_Field:{uitype:7,name:"Rating Field",prefix:"cf_pcf_srf"},Emotion_Rating_Field:{uitype:7,name:"Customer Satisfaction Field",prefix:"cf_pcf_erf"},Color_Picker_Field:{uitype:1,name:"Color Picker",prefix:"cf_pcf_cpf"},Repeater_Field:{uitype:21,name:"Repeater Field",prefix:"cf_pcf_arf"},Weather_Field:{uitype:1,name:"Weather Field",prefix:"cf_pcf_pwf"},Plaque_Field:{uitype:782,name:"Plaque Field",prefix:"cf_pcf_ipf"},MPlaque_Field:{uitype:785,name:"Motorcycle Plaque Field",prefix:"cf_pcf_mpf"},Futronic_Field:{uitype:783,name:"Futronic Field",prefix:"cf_pcf_fcf"},Signotec_Field:{uitype:784,name:"Signotec Field",prefix:"cf_pcf_scf"},IP2LOCATION_Field:{uitype:1,name:"IP Address Field",prefix:"cf_pcf_ipl"},System_Field:{uitype:1,name:"System Field",prefix:"cf_pcf_vsf"}},parsvt_decimalseparator=jQuery("body").data("user-decimalseparator"),parsvt_groupingseparator=jQuery("body").data("user-groupingseparator"),parsvt_page_language=jQuery("body").data("language").substring(0,2),defaultFirstDay=jQuery("#start_day").val(),weekDaysArray={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};if(""===defaultFirstDay||void 0===defaultFirstDay)var first_day_of_week=1;else first_day_of_week=this.weekDaysArray[defaultFirstDay];Vtiger.Class("ParsVTCustomFields_Js",{loadScript:function(e,a){var t=document.getElementsByTagName("body")[0],r=document.createElement("script");r.type="text/javascript",r.src=e,r.crossorigin="anonymous",r.onreadystatechange=a,r.onload=a,t.appendChild(r)},loadCSS:function(e,a){var t=document.getElementsByTagName("head")[0],r=document.createElement("link");r.id=a,r.rel="stylesheet",r.type="text/css",r.href=e,r.media="all",t.appendChild(r)},opentWhatsapp:function(e){document.location="whatsapp://send/?phone="+e,setTimeout((function(){window.open("https://api.whatsapp.com/send?phone="+e+"&text=&source=&data=&app_absent=")}),300)},openSsaa:function(e){return window.open("https://ilenc.ssaa.ir/ReportViewer.aspx?reportname=CLPLegalPersonReportNew&extension=pdf&@NationalCode="+e),!0},openEVAT:function(e){var a=document.createElement("form");a.target="Map",a.method="POST",a.action="https://www.evat.ir/frmNewvalidationofregistration.aspx";var t=document.createElement("input"),r=document.createElement("input");t.type="text",t.name="txtTINNo",t.value=e,r.type="text",r.name="__VIEWSTATE",r.value="/wEPDwUJNDQyMjM1MTY3D2QWAgIED2QWBAIrDzwrABECARAWABYAFgAMFCsAAGQCLw88KwARAgEQFgAWABYADBQrAABkGAMFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBQpSZWZyZXNoSW1nBQpncnZIaXN0b3J5D2dkBRNncmRNYW5hZ2VyUmVnUmVwb3J0D2dkif/a+NX9eCMg07ou9WS8lsp+soI=",a.appendChild(t),a.appendChild(r),document.body.appendChild(a),map=window.open("","Map","status=0,title=0,fullscreen=yes,scrollbars=1"),map?a.submit():app.helper.showErrorNotification({message:"You must allow popups for this map to work."})},checkADVCF:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,1,1);var e="index.php?module=ParsVT&action=Fields&mode=checkADVCF&sourceModule="+$("#selectedModuleName").val();$.ajax({url:e,type:"GET",dataType:"json",error:function(e){ParsVTCustomFields_Js.cleanCreateCustomField(0,1,1)},success:function(e){e.success&&e.result&&""!=e.result?$(".createCustomFieldForm > div.modal-body.model-body-scrollenabled div.picklistOption").after(e.result):ParsVTCustomFields_Js.cleanCreateCustomField(0,1,1)}})},updatePlaqueVal:function(e){var a=$("#"+e+"_plaquePart1").val(),t=$("#"+e+"_plaquePart2").val(),r=$("#"+e+"_plaquePart3").val(),s=$("#"+e+"_plaquePart4").val();3==r.length&&2==a.length&&2==s.length&&""!=t&&$("[name="+e+"]").val(a+"-"+t+"-"+r+"-"+s)},OpenGpsWindow:function(e,a,t){switch("id"==t&&(a=$("#"+a).val()),e){case"parsvt":app.getRecordId()?link="index.php?module=ParsVT&view=Map&source_module="+app.getModuleName()+"&ll="+a+"&recordid="+app.getRecordId()+"&title="+$(".recordLabel").attr("title"):link="index.php?module=ParsVT&view=Map&source_module="+app.getModuleName()+"&ll="+a;break;case"google":link="https://maps.google.com/maps?q="+a;break;case"waze":link="https://www.waze.com/ul?ll="+a+"&navigate=yes&zoom=15";break;case"osm":link="https://www.openstreetmap.org/#map=18/"+a.replace(",","/");break;case"yandex":a=a.split(",").reverse().join(),link="https://yandex.com/maps/?from=api-maps&l=map&ll="+a+"&z=15";break;case"apple":link="http://maps.apple.com/?ll="+a;break;case"parsijoo":a=a.split(","),link="https://map.parsijoo.ir/?lat="+a[0]+"&lon="+a[1]+"&q=&z=17";break;case"map.ir":a=a.split(","),link="https://map.ir/lat/"+a[0]+"/lng/"+a[1]+"/z/17";break;case"Android":link="geo:"+a+";u=35";break;case"iOS":link="maps:?q="+a;break;case"Windows":link="ms-windows-store://pdp/?ProductId=9wzdncrdtbvb&?cp="+a.replace(",","~")}window.open(link,"_blank")},pvcf_upload_files:function(e,a,t){var r=document.getElementsByName("upload_"+e+"[]");if(1==r.length)var s=document.getElementsByName(e);else{r=document.getElementsByClassName(a);s=document.getElementsByClassName("upload"+a)}app.helper.showProgress();var i=r[0].files;0===i.length&&void 0!==r[1]&&(i=r[1].files);for(var l=new FormData,d=0;d<i.length;d++){var n=i[d];l.append("upload_"+e+"[]",n,n.name)}return l.append("field_name",e),$.ajax({url:"index.php?module=ParsVT&action=ActionAjax&mode=ajaxUploadFromForm",type:"POST",data:l,processData:!1,contentType:!1}).done((function(a){if(a.result.list_file){var r=a.result.list_file;jQuery(s).val(r[0]);var i=r[0].split("$$");if(i.length>0){var l=jQuery(s).closest(t);if(l.find("img").remove(),l.find("span").remove(),i[2].indexOf("image")>-1){var d=i[0].replace(/\s+/g," ").trim(),n=["<span>","<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(r[0])+"','"+d+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download><img style="max-width:150px;max-height:150px;" src="'+d+'" /></a>','<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-field_name = "'+e+'" data-file="'+r[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeThis(this)">',"</span>"].join("");l.append(n)}else{var o=i[0].replace(/\s+/g," ").trim(),u=(p=(p=o.split("/"))[p.length-1]).indexOf("_"),p=p.substr(u+1);n=["<span>","<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(r[0])+"','"+o+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download>'+p+"</a>",'<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-field_name = "'+e+'"  data-file="'+r[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeThis(this)">',"</span>"].join("");l.append(n)}$('[name="upload_'+e+'[]"]').val("")}app.helper.hideProgress(),app.helper.showSuccessNotification({message:app.vtranslate("JS_UPLOAD_SUCCESSFUL")})}else app.helper.hideProgress(),errorMessage=app.vtranslate("JS_UPLOAD_FAILED"),app.helper.showErrorNotification({message:errorMessage})})).fail((function(){app.helper.hideProgress(),errorMessage=app.vtranslate("JS_UPLOAD_FAILED"),app.helper.showErrorNotification({message:errorMessage})})),!1},pvcf_upload_multiple_files:function(e,a,t){var r=document.getElementsByName("upload_"+e+"[]");if(app.helper.showProgress(),1==r.length)var s=document.getElementsByName(e);else{r=document.getElementsByClassName(a);s=document.getElementsByClassName("upload"+a)}for(var i=r[0].files,l=new FormData,d=0;d<i.length;d++){var n=i[d];l.append("upload_"+e+"[]",n,n.name)}return l.append("field_name",e),$.ajax({url:"index.php?module=ParsVT&action=ActionAjax&mode=ajaxUploadFromForm",type:"POST",data:l,processData:!1,contentType:!1}).done((function(a){var r=a.result.list_file;if(a.result.list_file){var i,l=jQuery(s).val().split("||");i=jQuery(s).closest(t),$.each(r,(function(a,t){if(0!=t.length){l.push(t);var r=t.split("$$");if(r.length>0)if(r[2].indexOf("image")>-1){var s=r[0].replace(/\s+/g," ").trim(),d=['<div class="col-lg-1" style="width: 150px; height: 182px; max-width:150px;max-height:182px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;">',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(t)+"','"+s+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><img style="max-width:120px;max-height:150px;" src="'+s+'" /></a>','<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-target_field= "'+e+'"  data-field_name = "'+e+'"  data-field_value = "'+t+'"   data-file="'+r[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeFile(this)">',"</div>"].join("");i.append(d)}else{var n=r[0].replace(/\s+/g," ").trim(),o=(u=(u=n.split("/"))[u.length-1]).indexOf("_"),u=u.substr(o+1);d=['<div class="col-lg-1" style="width: 150px; height: 182px; max-width:150px;max-height:182px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;padding-top: 20px;">',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(t)+"','"+n+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><BR>'+u+"</a>",'<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-target_field= "'+e+'" data-field_name = "'+e+'"  data-field_value = "'+t+'"  data-file="'+r[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeFile(this)">',"</div>"].join("");i.append(d)}}})),jQuery(s).val(l.join("||")),$('[name="upload_'+e+'[]"]').val(""),app.helper.hideProgress(),app.helper.showSuccessNotification({message:app.vtranslate("JS_UPLOAD_SUCCESSFUL")})}else app.helper.hideProgress(),errorMessage=app.vtranslate("JS_UPLOAD_FAILED"),app.helper.showErrorNotification({message:errorMessage})})).fail((function(){app.helper.hideProgress(),errorMessage=app.vtranslate("JS_UPLOAD_FAILED"),app.helper.showErrorNotification({message:errorMessage})})),!1},removeThis:function(e){app.helper.showProgress();var a=jQuery(e).data("file"),t=jQuery(e).data("field_name");if(jQuery('input[name="record"]').length)var r=jQuery('input[name="record"]').val();else r=app.getRecordId();var s=jQuery(e).parent("span").parent("td");0==s.length&&"PurchaseOrder"==app.getModuleName()&&(s=jQuery(e).closest("td"));jQuery.ajax({url:"index.php?module=ParsVT&action=ActionAjax&mode=removeFile",data:{file_path:a,parrent_record_id:r,field_name:t},async:!1,success:function(e){s.find("input[name^='"+supportedParsVTCustomFields.Upload_Field.prefix+"']").val(""),s.find("img").remove(),s.find("span").remove(),app.helper.hideProgress()},error:function(e,a,t){app.helper.hideProgress()}})},removeFile:function(e){app.helper.showProgress();var a=jQuery(e).data("file"),t=jQuery(e).data("field_name"),r=jQuery(e).data("target_field"),s=jQuery(e).data("field_value");if(jQuery('input[name="record"]').length)var i=jQuery('input[name="record"]').val();else i=app.getRecordId();var l=jQuery(e).parent("div");0==l.length&&"PurchaseOrder"==app.getModuleName()&&(l=jQuery(e).closest("td"));jQuery.ajax({url:"index.php?module=ParsVT&action=ActionAjax&mode=removeFile",data:{file_path:a,parrent_record_id:i,field_name:t},async:!1,success:function(e){var a=jQuery("textarea[name^='"+r+"']").val().split("||");jQuery("textarea[name^='"+r+"']").val(ParsVTCustomFields_Js.arrayRemove(a,s).join("||")),l.remove(),app.helper.hideProgress()},error:function(e,a,t){app.helper.hideProgress()}})},arrayRemove:function(e,a){return e.filter((function(e){return e!=a}))},setFieldFormulaExpression:function(e,a){var t=jQuery("textarea[name='"+e+"']");t.val(t.val()+" "+a)},registerSelect2:function(e){if(jQuery("#gridColumnsUi").length>0){var a={tags:[],tokenSeparators:[","]};app.showSelect2ElementView($("#gridColumnsUi"),a),app.showSelect2ElementView($("#gridRowsUi"),a),e&&clearInterval(e)}},changeGlobalPicklistModule:function(e){if(ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0),void 0===e)var a="index.php?module=ParsVT&action=Fields&mode=getGlobalPicklistField&targetModule="+$("#selectedModuleName").val();else a="index.php?module=ParsVT&action=Fields&mode=getGlobalPicklistField&sourceModule="+e+"&targetModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:a,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='picklistModule']").select2(),$("select[name='picklistField']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeFormulaField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getFormulaField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='expressionFieldType']").select2(),$("select[name='expressionField']").select2(),$("select[name='expressionFormula']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeAutoNumberField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getAutoNumberField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='expressionFieldType']").select2(),$("select[name='expressionField']").select2(),$("select[name='expressionFormula']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeEncryptedField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getEncryptedField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result)):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeBarcodeField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getBarcodeField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='barcodeType']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeSystemField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getSystemField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,0,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='systemField']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},changeRollupField:function(){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var e="index.php?module=ParsVT&action=Fields&mode=getRollupField&sourceModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:e,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='rollup_source_field']").select2(),$("select[name='rollup_method_field']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})},registerEditFieldButton:function(){$("body").delegate(".editFieldDetails","click",(function(e){ParsVTCustomFields_Js.hideOptionsOnEditPopup()}))},hideAllSmartChangeButtonForACF:function(){var e=$("[data-field-name*='cf_pcf_']").closest(".ui-sortable-handle");e.find(".summary").hide(),e.find(".defaultValue").hide()},hideOptionsOnEditPopup:function(){if($("#createFieldForm [name='fieldType']").length>0){for(var e in supportedParsVTCustomFields)supportedParsVTCustomFields.hasOwnProperty(e)&&$("#createFieldForm [name='fieldType']").append(new Option(app.vtranslate(supportedParsVTCustomFields[e].name),e,!1,!1));var a=$("#createFieldForm [name='fieldname']").val().substring(0,10);a==supportedParsVTCustomFields.Gdate_Field.prefix?$("#createFieldForm [name='fieldType']").val("Gdate_Field"):a==supportedParsVTCustomFields.National_ID.prefix?$("#createFieldForm [name='fieldType']").val("National_ID"):a==supportedParsVTCustomFields.National_CODE.prefix?$("#createFieldForm [name='fieldType']").val("National_CODE"):a==supportedParsVTCustomFields.IRAN_VAT_ID.prefix?$("#createFieldForm [name='fieldType']").val("IRAN_VAT_ID"):a==supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix?$("#createFieldForm [name='fieldType']").val("IRAN_POSTAL_CODE"):a==supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix?$("#createFieldForm [name='fieldType']").val("TAX_FILE_NUMBER"):a==supportedParsVTCustomFields.IP2LOCATION_Field.prefix?$("#createFieldForm [name='fieldType']").val("IP2LOCATION_Field"):a==supportedParsVTCustomFields.Radio_Field.prefix?$("#createFieldForm [name='fieldType']").val("Radio_Field"):a==supportedParsVTCustomFields.Global_Picklist_Field.prefix?$("#createFieldForm [name='fieldType']").val("Global_Picklist_Field"):a==supportedParsVTCustomFields.Salutation_Field.prefix?$("#createFieldForm [name='fieldType']").val("Salutation_Field"):a==supportedParsVTCustomFields.Formula_Field.prefix?$("#createFieldForm [name='fieldType']").val("Formula_Field"):a==supportedParsVTCustomFields.AutoNumber_Field.prefix?$("#createFieldForm [name='fieldType']").val("AutoNumber_Field"):a==supportedParsVTCustomFields.Rollup_Field.prefix?$("#createFieldForm [name='fieldType']").val("Rollup_Field"):a==supportedParsVTCustomFields.Iran_Mobile.prefix?$("#createFieldForm [name='fieldType']").val("Iran_Mobile"):a==supportedParsVTCustomFields.Telegram_ID.prefix?$("#createFieldForm [name='fieldType']").val("Telegram_ID"):a==supportedParsVTCustomFields.Whatsapp_ID.prefix?$("#createFieldForm [name='fieldType']").val("Whatsapp_ID"):a==supportedParsVTCustomFields.Instagram.prefix?$("#createFieldForm [name='fieldType']").val("Instagram"):a==supportedParsVTCustomFields.Weather_Field.prefix?$("#createFieldForm [name='fieldType']").val("Weather_Field"):a==supportedParsVTCustomFields.Twitter.prefix?$("#createFieldForm [name='fieldType']").val("Twitter"):a==supportedParsVTCustomFields.RTF_Description_Field.prefix?$("#createFieldForm [name='fieldType']").val("RTF_Description_Field"):a==supportedParsVTCustomFields.IBAN_Code.prefix?$("#createFieldForm [name='fieldType']").val("IBAN_Code"):a==supportedParsVTCustomFields.Credit_Card_Number.prefix?$("#createFieldForm [name='fieldType']").val("Credit_Card_Number"):a==supportedParsVTCustomFields.Assigned_To.prefix?$("#createFieldForm [name='fieldType']").val("Assigned_To"):a==supportedParsVTCustomFields.QR_Code.prefix?$("#createFieldForm [name='fieldType']").val("QR_Code"):a==supportedParsVTCustomFields.Cities_field.prefix?$("#createFieldForm [name='fieldType']").val("Cities_field"):a==supportedParsVTCustomFields.Countries_field.prefix?$("#createFieldForm [name='fieldType']").val("Countries_field"):a==supportedParsVTCustomFields.Date_Time_Field.prefix?$("#createFieldForm [name='fieldType']").val("Date_Time_Field"):a==supportedParsVTCustomFields.DigitalSignature_Field.prefix?$("#createFieldForm [name='fieldType']").val("DigitalSignature_Field"):a==supportedParsVTCustomFields.Capture_Field.prefix?$("#createFieldForm [name='fieldType']").val("Capture_Field"):a==supportedParsVTCustomFields.Video_Field.prefix?$("#createFieldForm [name='fieldType']").val("Video_Field"):a==supportedParsVTCustomFields.Futronic_Field.prefix?$("#createFieldForm [name='fieldType']").val("Futronic_Field"):a==supportedParsVTCustomFields.Encrypted_Field.prefix?$("#createFieldForm [name='fieldType']").val("Encrypted_Field"):a==supportedParsVTCustomFields.Signotec_Field.prefix?$("#createFieldForm [name='fieldType']").val("Signotec_Field"):a==supportedParsVTCustomFields.Plaque_Field.prefix?$("#createFieldForm [name='fieldType']").val("Plaque_Field"):a==supportedParsVTCustomFields.MPlaque_Field.prefix?$("#createFieldForm [name='fieldType']").val("MPlaque_Field"):a==supportedParsVTCustomFields.Barcode_Field.prefix?$("#createFieldForm [name='fieldType']").val("Barcode_Field"):a==supportedParsVTCustomFields.Password_Field.prefix?$("#createFieldForm [name='fieldType']").val("Password_Field"):a==supportedParsVTCustomFields.Multicurrency_Field.prefix?$("#createFieldForm [name='fieldType']").val("Multicurrency_Field"):a==supportedParsVTCustomFields.Upload_Field.prefix?$("#createFieldForm [name='fieldType']").val("Upload_Field"):a==supportedParsVTCustomFields.Coordinate.prefix?$("#createFieldForm [name='fieldType']").val("Coordinate"):a==supportedParsVTCustomFields.Rating_Field.prefix?$("#createFieldForm [name='fieldType']").val("Rating_Field"):a==supportedParsVTCustomFields.Emotion_Rating_Field.prefix?$("#createFieldForm [name='fieldType']").val("Emotion_Rating_Field"):a==supportedParsVTCustomFields.Color_Picker_Field.prefix||a==supportedParsVTCustomFields.Color_Picker_Field.prefix?$("#createFieldForm [name='fieldType']").val("Color_Picker_Field"):a==supportedParsVTCustomFields.Repeater_Field.prefix?$("#createFieldForm [name='fieldType']").val("Repeater_Field"):a==supportedParsVTCustomFields.Voice_Recorder_Field.prefix?$("#createFieldForm [name='fieldType']").val("Voice_Recorder_Field"):a==supportedParsVTCustomFields.Advanced_Date_Field.prefix?$("#createFieldForm [name='fieldType']").val("Advanced_Date_Field"):a==supportedParsVTCustomFields.UsersList.prefix?$("#createFieldForm [name='fieldType']").val("UsersList"):a==supportedParsVTCustomFields.Upload_Fields.prefix?$("#createFieldForm [name='fieldType']").val("Upload_Fields"):a==supportedParsVTCustomFields.Validated_Field.prefix?$("#createFieldForm [name='fieldType']").val("Validated_Field"):a==supportedParsVTCustomFields.System_Field.prefix?$("#createFieldForm [name='fieldType']").val("System_Field"):a==supportedParsVTCustomFields.Related_Field.prefix?$("#createFieldForm [name='fieldType']").val("Related_Field"):a==supportedParsVTCustomFields.Multi_Related_Field.prefix?$("#createFieldForm [name='fieldType']").val("Multi_Related_Field"):a==supportedParsVTCustomFields.Grid_Field.prefix&&$("#createFieldForm [name='fieldType']").val("Grid_Field"),$("#createFieldForm [name='fieldType']").trigger("change")}else setTimeout((function(){ParsVTCustomFields_Js.hideOptionsOnEditPopup()}),10)},overwriteFunctionAddCustomField:function(){"function"==typeof Settings_LayoutEditor_Js?(Settings_LayoutEditor_Js.prototype.addCustomField=function(e,a){var t=this,r=jQuery.Deferred();app.helper.showProgress();var s=a.serializeFormData();return Object.keys(supportedParsVTCustomFields).indexOf(s.fieldType)>-1?(s.module="ParsVT",s.action="ActionAjax",s.mode="addField",s.masseditable="2"):(s.module=t.getModuleName(),s.parent=app.getParentModuleName(),s.action="Field",s.mode="add"),s.blockid=e,s.sourceModule=jQuery("#selectedModuleName").val(),s.fieldLength=parseInt(s.fieldLength),s.decimal&&(s.decimal=parseInt(s.decimal)),this.isHeaderAllowed()||1!=s.headerfield?(this.updateHeaderFieldMeta(s),app.request.post({data:s}).then((function(e,a){if(app.helper.hideProgress(),null===e){var s=a.id,i=a.isHeaderField?1:0;t.headerFieldsMeta[s]=i,r.resolve(a),location.reload()}else r.reject(e)}))):r.reject(),r.promise()},$("body").delegate("#createFieldForm #expressionValue, #createFieldForm #suffixValue, #createFieldForm #prefixValue","focusout",(function(e){if($("#createFieldForm.createCustomFieldForm").length>0){var a=jQuery(e.currentTarget).val();""!=a?$.ajax({url:"index.php?module=ParsVT&action=Fields&mode=checkExpression",type:"POST",data:{value:a}}).done((function(e){app.helper.hideProgress(),e.success?$("#createFieldForm.createCustomFieldForm").find('[name="saveButton"]').removeAttr("disabled"):(app.helper.showErrorNotification({message:e.error}),$("#createFieldForm.createCustomFieldForm").find('[name="saveButton"]').attr("disabled","disabled"))})).fail((function(){app.helper.hideProgress(),$("#createFieldForm.createCustomFieldForm").find('[name="saveButton"]').removeAttr("disabled")})):$("#createFieldForm.createCustomFieldForm").find('[name="saveButton"]').removeAttr("disabled")}})),$("body").delegate("#createFieldForm [name='fieldType']","change",(function(){var e=Object.keys(supportedParsVTCustomFields);$("#createFieldForm.createCustomFieldForm").find('[name="saveButton"]').removeAttr("disabled"),fieldType=$(this).val();var a=jQuery("#createFieldForm input[name=fieldid]").val();if("Grid_Field"==fieldType&&""==a){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);var t="index.php?module=ParsVT&action=Fields&mode=getGridField";app.helper.showProgress(),$.ajax({url:t,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){if(app.helper.hideProgress(),e.success&&e.result)if(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),jQuery("#gridColumnsUi").length>0){var a={tags:[],tokenSeparators:[","]};app.showSelect2ElementView($("#gridColumnsUi"),a),app.showSelect2ElementView($("#gridRowsUi"),a)}else interval=setInterval((function(){ParsVTCustomFields_Js.registerSelect2(interval)}),500);else ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})}else if("Validated_Field"==fieldType&&""==a){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);t="index.php?module=ParsVT&action=Fields&mode=getValidatedField";app.helper.showProgress(),$.ajax({url:t,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result)):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})}else if("Radio_Field"==fieldType&&""==a){var r=$("#createFieldForm");r.find(".preDefinedValueExists").removeClass("hide"),r.find(".picklistOption").removeClass("hide")}else if("Global_Picklist_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeGlobalPicklistModule();else if("Rollup_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeRollupField();else if("Formula_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeFormulaField();else if("AutoNumber_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeAutoNumberField();else if("Encrypted_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeEncryptedField();else if("System_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeSystemField();else if("Barcode_Field"==fieldType&&""==a)ParsVTCustomFields_Js.changeBarcodeField();else if("Multi_Related_Field"==fieldType&&""==a){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);t="index.php?module=ParsVT&action=Fields&mode=getEntityModules&fieldType=Multi_Related_Field&targetModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:t,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,0,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='relatedModule']").select2(),$("select[name='createrelatedlist']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})}else if("Related_Field"==fieldType&&""==a){ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0);t="index.php?module=ParsVT&action=Fields&mode=getEntityModules&fieldType=Related_Field&targetModule="+$("#selectedModuleName").val();app.helper.showProgress(),$.ajax({url:t,type:"GET",dataType:"json",error:function(e){app.helper.hideProgress(),ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)},success:function(e){app.helper.hideProgress(),e.success&&e.result?(ParsVTCustomFields_Js.cleanCreateCustomField(1,0,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after(e.result),$("select[name='relatedModule']").select2(),$("select[name='createrelatedlist']").select2()):ParsVTCustomFields_Js.cleanCreateCustomField(0,0,0)}})}else if("Futronic_Field"!=fieldType&&"Signotec_Field"!=fieldType||""!=a)supportedParsVTCustomFields.hasOwnProperty(fieldType)?ParsVTCustomFields_Js.cleanCreateCustomField(0,1,0):ParsVTCustomFields_Js.cleanCreateCustomField(0,1,1);else{if("Futronic_Field"==fieldType)var s="http://vtfarsi.ir/knowledgebase/Fingerprint-scanner-integration";else s="http://vtfarsi.ir/knowledgebase/signature-pad-integration/";ParsVTCustomFields_Js.cleanCreateCustomField(0,1,0),$("#createFieldForm > div.modal-body.model-body-scrollenabled > div:nth-child(3)").after("<div class='form-group supportedType gridHeaders1' id='gridHeaders1'><label class='control-label fieldLabel col-sm-5'>"+app.vtranslate("More Information")+"</label><div class='controls col-lg-6 col-md-6 col-sm-6' style='direction: ltr; text-align: left'><a href='"+s+"' target='_blank'>"+s+"</a></div></div>")}e.indexOf(fieldType)>-1?($("#createFieldForm [name='masseditable']").trigger("click"),$("#createFieldForm [name='fieldDefaultValue']").closest(".form-group").hide(),$("#createFieldForm .fieldProperty .properties > div:nth-child(3) > div:nth-child(1) label").hide(),$("#createFieldForm .fieldProperty .properties > div:nth-child(3) > div:nth-child(1) div").hide()):($("#createFieldForm [name='fieldDefaultValue']").closest(".form-group").show(),$("#createFieldForm .fieldProperty div > div:nth-child(3) > div:nth-child(1) label").show(),$("#createFieldForm .fieldProperty div > div:nth-child(3) > div:nth-child(1) div").show())})),ParsVTCustomFields_Js.registerEditFieldButton()):setTimeout((function(){ParsVTCustomFields_Js.overwriteFunctionAddCustomField()}),10)},getPreviewType:function(e,a){var t=["txt","csv","ics","image/gif","image/png","image/jpeg","video/mp4","video/ogg","audio/ogg","video/webm","audio/mp3","audio/mpeg","audio/wav","odt","ods","odp","fodt"],r=e.split(".").pop(),s="D";return(t.includes(a)||t.includes(r)||"pdf"==r)&&(s="I"),s},previewFile:function(e,a,t,r){var s=["txt","csv","ics","image/gif","image/png","image/jpeg","video/mp4","video/ogg","audio/ogg","video/webm","audio/mp3","audio/mpeg","audio/wav","odt","ods","odp","fodt"],i=a.split(".").pop(),l="D";if((s.includes(r)||s.includes(i)||"pdf"==i)&&(l="I"),"I"==l){var d={module:"ParsVT",view:"FilePreview",FullPath:e,FileSize:t,FilePath:a,FileType:r};app.request.post({data:d}).then((function(e,a){app.helper.showModal(a)}))}else{window.open("index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file="+a,"_blank").focus()}},cleanCreateCustomField:function(e,a,t){void 0!==e&&0==e&&(jQuery("#gridHeaders1").remove(),jQuery("#gridHeaders2").remove(),jQuery("#maskHeaders1").remove(),jQuery("#maskHeaders2").remove(),jQuery("#maskHeaders3").remove(),jQuery("#maskHeaders4").remove(),jQuery("#maskHeaders5").remove(),jQuery(".relatedHeaders1").remove(),jQuery(".relatedHeaders2").remove(),jQuery(".relatedHeaders3").remove(),jQuery(".relatedHeaders4").remove()),void 0!==a&&(0==a?(jQuery(".parsvt_tablename").addClass("hide"),jQuery("select[name=fieldTableList]").val("").trigger("change")):(jQuery(".parsvt_tablename").removeClass("hide"),jQuery("select[name=fieldTableList]").val(jQuery("select[name=fieldTableList]").attr("data-value")).trigger("change"))),void 0!==t&&(0==t?(jQuery(".parsvt_fieldname").addClass("hide"),jQuery("input[name=fieldName]").val("").trigger("change")):(jQuery(".parsvt_fieldname").removeClass("hide"),jQuery("input[name=fieldName]").val(jQuery("input[name=fieldName]").attr("data-value")).trigger("change"))),jQuery("input[name=fieldDefaultValue]").val("").trigger("change")},convertToDollar:function(e,a){return 0==a?0:e*a},PlayVideo:function(e){app.helper.showProgress(),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/Player/ionicons.min.css","videoplayer"),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/Player/Video.css","videoplayer"),ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/Player/Video.js",(function(){var a="<video class='video-js' controls preload='auto' data-setup='' loop>\n    <source src='"+e+"' type='video/webm'/>\n    Your browser does not support the video tag.\n</video>",t='<div class="modal-dialog" style="min-width: 740px;"> <div class="modal-header"> <div class="clearfix"> <div class="pull-right " ><button type="button" class="close" aria-label="Close" data-dismiss="modal"><span aria-hidden="true" class="fa fa-close"></span></button></div><h4 class="pull-left" style="direction: ltr">'+e.substring(e.lastIndexOf("/")+1)+'</h4> </div></div><div class="modal-content" style="min-height: 480px">'+a+"</div></div>";app.helper.showModal(t),app.helper.hideProgress()}))},getIPInfo:function(e){app.helper.showProgress(),$.ajax("https://ipapi.co/"+e+"/json/").then((function(a){var t='<table class="table  table-bordered table-striped table-hover"><tbody>';Object.entries(a).forEach((e=>{var[a,r]=e;["currency","in_eu","region_code","region","languages","country_tld","country_population","country_code_iso3","country_code","country_calling_code","country_area","continent_code","asn","currency_name"].includes(a)||null==r||(a=(a=a.replace("_"," ")).replace(/\b\w/g,(function(e){return e.toUpperCase()})),t+="<tr><td>"+a+"</td><td>"+r+"</td></tr>")})),a.hasOwnProperty("latitude")&&(t+='<tr><td>View On Map</td><td><a href="https://maps.google.com/maps?q='+a.latitude+","+a.longitude+'" target="_blank">'+a.latitude+","+a.longitude+"</a></td></tr>");var r='<div class="modal-dialog" style="width: 450px;"> <div class="modal-header"> <div class="clearfix"> <div class="pull-right " ><button type="button" class="close" aria-label="Close" data-dismiss="modal"><span aria-hidden="true" class="fa fa-close"></span></button></div><h4 class="pull-left">'+e+'</h4> </div></div><div class="modal-content">'+(t+="</tbody></table>")+"</div></div>";app.helper.showModal(r),app.helper.hideProgress()}),(function(e,a){app.helper.hideProgress(),app.helper.showErrorNotification({message:app.vtranslate("Failed to send validate IP Address")})}))},viewSensitiveFieldValue:function(e,a,t,r){app.helper.showProgress();var s={module:"ParsVT",view:"EncryptedValueModalAjax",record:e,source_module:a,fieldname:t,fieldvalue:r};app.request.post({data:s}).then((function(e,a){null==e&&(app.helper.showModal(a),app.helper.hideProgress())}))},initData_MapView:function(){for(var e=app.view(),a=window.location.search.substring(1),t=l="",r=a.split("&"),s=0;s<r.length;s++){var i=r[s].split("=");"module"==i[0]?t=i[1]:"source_module"==i[0]?l=i[1]:"cvid"==i[0]?i[1]:"goback"==i[0]&&i[1]}if("ParsVT"!=t)var l=t;if(t&&l||(l=app.getModuleName()),"List"==e&&"ParsVT"!=t){var d={module:"ParsVT",action:"ACF",mode:"checkMapViewEnable",source_module:l};app.request.post({data:d}).then((function(e,a){if(null==e&&1==a.isEnable){url="index.php?module=ParsVT&view=Map";var t=jQuery(".listViewFilter.active a").data("filter-id");null!=t&&(url+="&viewname="+t);var r=jQuery("#alphabetSearchKey").val();url+="&search_key="+r+"&search_value=&search_params=";var s=jQuery("#pageNumber").val();url+="&page="+s;var i=app.getParentModuleName();url+="&parent="+i,url+="&source_module="+l;var d=app.getAppName();url+="&app="+d,window.location.href=url}}))}},CheckCardDigits:function(e){var a,t,r,s=e.substring(0,6);if("627,353,636,949,505,000,000,000".indexOf(s)>-1)return!0;for(a=0,t=0,r=0;r<16;r++)(t=r%2==0?2*e.charAt(r):1*e.charAt(r))>9&&(t-=9),a+=t;return!(a%10!=0||a<20)}},{instance:!1,getInstance:function(){if(!1===ParsVTCustomFields_Js.instance){var e=new ParsVTCustomFields_Js;return ParsVTCustomFields_Js.instance=e,e}return ParsVTCustomFields_Js.instance},validURL:function(e){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&amp;a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},checkURL:function(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},fixjson:function(e,a){return a?"_"==e.slice(-1)?e.substring(0,e.length-1):e:e.concat("_")},registerJSGridTableFields:function(e){var a=this,t=e.find("textarea.gridElement"),r=[],s=t.data("headers"),i=t.val(),l=!1;try{0!==i.length?(i=a.fixjson(i,!0),l=jQuery.parseJSON(i)):l=!1}catch(e){l=!1}var d=[];s.rowNames&&d.push({name:"#",css:"jsgrid-td-wrap",type:"text",validate:"required",width:100,editing:!1,align:"center"}),jQuery.each(s.columnNames,(function(e,a){"object"==typeof a&&void 0!==a.name&&void 0!==a.type?(void 0!==a.value&&(jQuery.each(a.value,(function(e,t){void 0===r[e]&&(r[e]={}),r[e][a.name]=t})),delete a.value),d.push(a)):d.push({name:a,type:"text",width:100,css:"jsgrid-td-wrap"})})),s.rowNames&&!l?jQuery.each(s.rowNames,(function(e,a){void 0===r[e]&&(r[e]={}),r[e]["#"]=a})):l&&(r=l),d.push({type:"control",editButton:!0,deleteButton:!s.rowNames});var n={loadData:function(e){return $.grep(this.data_rows,(function(a){var t=1;return $.each(a,(function(a,r){e[a]&&"string"==typeof r&&-1==r.indexOf(e[a])&&(t=0)})),t}))},insertItem:function(e){this.data_rows.push(e);var r=this.data_rows;setTimeout((function(){var e=JSON.stringify(r);t.val(a.fixjson(e,!1))}),1e3)},updateItem:function(e){var r=this.data_rows;setTimeout((function(){var e=JSON.stringify(r);t.val(a.fixjson(e,!1))}),1e3)},deleteItem:function(e){var r=$.inArray(e,this.data_rows);this.data_rows.splice(r,1);var s=this.data_rows;setTimeout((function(){var e=JSON.stringify(s);t.val(a.fixjson(e,!1))}),1e3)}};window.dbJSGrid=n,n.data_rows=r,e.find("div.dataTable").css("max-width",e.width()+"px"),e.find("div.dataTable").jsGrid({width:"100%",height:"auto",filtering:!0,editing:!0,inserting:!s.rowNames,sorting:!0,paging:!0,autoload:!0,pageSize:10,pageButtonCount:5,controller:n,fields:d})},DisplayCurrentTime:function(e){var a=new Date,t=a.getHours(),r=a.getMinutes(),s=t>=12?"PM":"AM";if(12==e&&(t=(t%=12)||12),r=r<10?"0"+r:r,t=t<10?"0"+t:t,12==e)var i=t+":"+r+" "+s;else i=t+":"+r;return i},LoadDatePicker:function(e,a,t){var r=this;setTimeout((function(){void 0!==$.fn.Zebra_DatePicker?jQuery(e).Zebra_DatePicker({first_day_of_week:first_day_of_week}):(ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/datepicker/datepicker.min.js",(function(){r.LoadDatePicker(e,a,t)})),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/datepicker/datepicker.min.css","parsvtdatepicker"))}),1e3)},LoadRateJS:function(e,a,t,r,s,i){var l=this;setTimeout((function(){void 0!==$.fn.rating?"hidden"!=jQuery(e).attr("type")&&jQuery(jQuery(e)).rating({readonly:a,emotion:s,listview:i}):(ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/rating/js/simple-rating.js",(function(){l.LoadRateJS(e,a,t,r,s,i)})),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/rating/css/simple-rating.css","parsvtrating"))}),1e3)},LoadInstagramFeed:function(e,a,t,r,s){var i=this;setTimeout((function(){void 0!==$.instagramFeed?"hidden"!=jQuery(e).attr("type")&&$.instagramFeed({username:s,container:"#"+r,display_profile:!0,display_biography:!0,display_igtv:!1,items:12,items_per_row:4,display_gallery:!0,image_size:150}):ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/instagramFeed/jquery.instagramFeed.js",(function(){i.LoadInstagramFeed(e,a,t,r,s)}))}),1e3)},LoadTwitterFeed:function(e,a,t,r,s){var i=this;setTimeout((function(){void 0!==$.fn.tweetie?"hidden"!=jQuery(e).attr("type")&&(s.includes("#")?$(r).tweetie({url:"index.php?module=ParsVT&action=Fields&mode=tweetie",type:"hashtag",template:"<li>{{tweet.created_at}} - {{tweet.text}}</li>",dateFormat:"%b %d, %Y",params:{count:5,screen_name:s.replace("#",""),q:s.replace("#","")}}):$(r).tweetie({url:"index.php?module=ParsVT&action=Fields&mode=tweetie",type:"timeline",template:"<li>{{tweet.created_at}} - {{tweet.text}}</li>",dateFormat:"%b %d, %Y",params:{count:5,screen_name:s.replace("#",""),exclude_replies:!0,include_rts:!0}})):ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/tweetie/tweetie.min.js",(function(){i.LoadTwitterFeed(e,a,t,r,s)}))}),500)},LoadColorPicker:function(e,a,t,r){var s=this;setTimeout((function(){void 0!==$.fn.parsvtcolorpicker?"color"!=jQuery(e).attr("type")&&jQuery(jQuery(e)).parsvtcolorpicker(r):ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/tinycolor/tinycolor.js",(function(){s.LoadColorPicker(e,a,t,r)}))}),1e3)},isJson:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},setRepeaterValue:function(e,a,t){var r=this;setTimeout((function(){if(t){var s=jQuery("textarea[name='"+a+"']").val();if(s=(s=(s=s.trim()).replace(/\(\(\(/g,"{")).replace(/\)\)\)/g,"}"),s=r.fixjson(s,!0),!r.isJson(s))return void jQuery("textarea[name='"+a+"']").val("");if(jQuery.parseJSON(s).length<=1)return void jQuery("textarea[name='"+a+"']").val("")}var i=$(e).repeaterVal();i=JSON.stringify(i.group),i=r.fixjson(i,!1),jQuery("textarea[name='"+a+"']").val(i)}),500)},LoadRepeater:function(e,a,t,r,s){var i=this;if("Edit"==r)setTimeout((function(){if(void 0!==$.fn.repeater){if(0!=jQuery(e).css("opacity")){jQuery(e).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important");var l="repeater"+Math.floor(1e3*Math.random()+1),d=Math.floor(1e3*Math.random()+1),n='<div class="parsrepeater '+l+'" data-repater-name="'+l+'" data-name="'+jQuery(e).attr("name")+'">\n<div data-repeater-list="group">\n    <div data-repeater-item>\n        <input class="inputElement repaterfield'+d+'" type="text" name="repeater" value=""/>\n        <input data-repeater-delete type="button" value="'+app.vtranslate("Delete")+'" class="btn btn-danger deleteRepeater'+d+'"/>\n    </div>\n</div>\n<input data-repeater-create type="button" value="'+app.vtranslate("Add")+'" class="btn addButton btn-default module-buttons addRepeater'+d+'"/>\n</div>';jQuery(e).after(n);var o=jQuery(e).val();o=(o=o.replace(/\(\(\(/g,"{")).replace(/\)\)\)/g,"}"),o=i.fixjson(o,!0);var u=[],p=$("."+l).repeater({initEmpty:!0,defaultValues:{repeater:""},show:function(){$(this).slideDown("slow")},hide:function(e){$(this).slideUp(e)},isFirstItemUndeletable:!0});i.isJson(o)?u=jQuery.parseJSON(o):(u=""!==o?[{repeater:o}]:[{repeater:""}],jQuery(e).val(JSON.stringify(u))),p.setList(u),$(document).on("input propertychange",".repaterfield"+d,(function(e){var a=$(this).closest('div[class^="parsrepeater"]').data("repater-name"),t=$(this).closest('div[class^="parsrepeater"]').data("name");i.setRepeaterValue("."+a,t,!1)})),$(document).on("click",".deleteRepeater"+d,(function(e){var a=$(this).closest('div[class^="parsrepeater"]').data("repater-name"),t=$(this).closest('div[class^="parsrepeater"]').data("name");i.setRepeaterValue("."+a,t,!0)})),$(document).on("click",".addRepeater"+d,(function(e){var a=$(this).closest('div[class^="parsrepeater"]').data("repater-name"),t=$(this).closest('div[class^="parsrepeater"]').data("name");i.setRepeaterValue("."+a,t,!1)}))}}else ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/RepeaterJS/repeater.js",(function(){i.LoadRepeater(e,a,t,r,s)}))}),1e3);else{s=(s=(s=s.trim()).replace(/\(\(\(/g,"{")).replace(/\)\)\)/g,"}"),s=i.fixjson(s,!0);var l=[];l=i.isJson(s)?jQuery.parseJSON(s):""!==s?[{repeater:s}]:[{repeater:""}];var d='<div class="repeaterField">';$.each(l,(function(e,a){d=d+a.repeater+"</br>"})),d+="</div>",jQuery(e).html(d)}},isMicrophoneAllowed:function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||"undefined"!=typeof document&&document.documentMode&&!(navigator.userAgent.indexOf("Edge")>-1))return!0;navigator.permissions.query({name:"microphone"}).then((function(e){return"denied"!==e.state}))},LoadVoiceRecorder:function(e,a,t,r,s){var i=this;if("Edit"==r)setTimeout((function(){if("function"==typeof Recorder){if(0!=jQuery(e).css("opacity")){jQuery(e).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important");var l="recorder"+Math.floor(1e3*Math.random()+1),d='<div class="recording-field"><span class="recordButton btn btn-info start'+l+'"><i class="glyphicon glyphicon-record"></i></span><span class="pauseButton btn btn-warning pause'+l+'" disabled><i class="glyphicon glyphicon-pause"></i></span><span class="stopButton btn btn-danger stop'+l+'" disabled><i class="glyphicon glyphicon-stop"></i></span><br><br><ul class="recordingsList" style="list-style: none;margin-bottom: 1rem;"></ul></div>';jQuery(e).after(d),$(".pauseButton").attr("disabled",!0),$(".stopButton").attr("disabled",!0),i.isMicrophoneAllowed()?($(".start"+l).click(startRecording),$(".stop"+l).click(stopRecording),$(".pause"+l).click(pauseRecording)):$(".start"+l).click((function(){app.helper.showErrorNotification({message:"Microphone is not detected or Can not access microphone"})}));var n=jQuery.trim(jQuery(e).text()),o=n?n.split("||"):[];jQuery.each(o,(function(a,t){if(t=jQuery.trim(t)){var r="index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file="+encodeURIComponent(t),s=jQuery("<audio></audio>"),i=jQuery("<li></li>"),l=jQuery("<a></a>"),d=6e4*(new Date).getTimezoneOffset();new Date(Date.now()-d).toISOString().slice(0,-1);s.attr("controls",!0),s.attr("src",r),l.attr("href",r),l.attr("download",r),l.html("<br><i class='btn btn-info glyphicon glyphicon-download'></i>"),i.append(s),i.append(l);var n=jQuery("<i class='btn btn-success glyphicon glyphicon-ok' disabled=\"true\"></i>");i.append(n);var o=jQuery('<i data-file="'+r+'" data-file-value="'+t+"\" class='btn btn-danger glyphicon glyphicon-remove'></i>");i.append(o),o.click((function(){var a=jQuery(this).closest("li");app.helper.showProgress();var t=jQuery(this).data("file");if(t){var r=jQuery(this).closest("td.fieldValue").find("textarea"),s=jQuery(this).data("file-value"),i=jQuery(e).attr("name");if(jQuery('input[name="record"]').length)var l=jQuery('input[name="record"]').val();else l=app.getRecordId();jQuery.ajax({url:"index.php?module=ParsVT&action=ActionAjax&mode=removeFile",data:{file_path:t,parrent_record_id:l,field_name:i},async:!1,success:function(e){var t=r.text().split("||");r.text(ParsVTCustomFields_Js.arrayRemove(t,s).join("||")),a.remove(),app.helper.hideProgress()},error:function(e,a,t){app.helper.hideProgress()}})}else a.remove(),app.helper.hideProgress()})),jQuery(e).next().find(".recordingsList").append(i)}}))}}else ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/recorder-js/recorder.js",(function(){i.LoadVoiceRecorder(e,a,t,r,s)}))}),500);else{var l=jQuery.trim("List"==r?jQuery(e).closest("td.listViewEntryValue").data("rawvalue"):jQuery(e).text()),d=l?l.split("||"):[];jQuery(e).find("ul.recordingsListParsVT").length||(jQuery(e).html('<ul class="recordingsListParsVT" style="list-style: none;margin-bottom: 1rem;"></ul>'),jQuery.each(d,(function(a,t){if(t=jQuery.trim(t)){var s="index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file="+encodeURIComponent(t),i=jQuery("<audio></audio>"),l=jQuery("<li></li>"),d=jQuery("<a></a>"),n=6e4*(new Date).getTimezoneOffset();new Date(Date.now()-n).toISOString().slice(0,-1);if(i.attr("controls",!0),i.attr("src",s),d.attr("href",s),d.attr("download",s),d.html("<br><i class='btn btn-info glyphicon glyphicon-download'></i>"),l.append(i),l.append(d),jQuery(e).find(".recordingsListParsVT").append(l),"List"==r)return!1}})))}},LoadBDCITY:function(e){var a="Unknown";switch(e.substr(0,3)){case"169":a="Azar shahr";break;case"170":a="Oskou";break;case"149":case"150":a="Aahr";break;case"171":a="Bostan abad";break;case"168":a="Bonab";break;case"136":case"137":case"138":a="Tabriz";break;case"545":a="Turkmenchai";break;case"505":a="Jolfa";break;case"636":a="Charoimagh";break;case"164":case"165":a="sarab";break;case"172":a="Shabestar";break;case"623":a="Sufian";break;case"506":a="ajab shir";break;case"519":a="Cliber";break;case"154":case"155":a="Maragheh";break;case"567":a="Varzaghan";break;case"173":a="Harris";break;case"159":case"160":a="Hashtrood";break;case"604":a="Horand";break;case"274":case"275":a="Orumieh";break;case"295":a="Oshnavieh";break;case"637":a="Anzal";break;case"292":a="Bukan";break;case"492":a="Poldasht";break;case"289":a="Piranshahr";break;case"677":a="Takht Soleyman";break;case"294":a="Takab";break;case"493":a="Chaypareh";break;case"279":case"280":a="khoy";break;case"288":case"692":a="Sardasht";break;case"284":case"285":a="Salmas";break;case"638":a="Silvaneh";break;case"291":a="Siah Cheshmeh (Chaldoran)";break;case"640":a="Shot";break;case"293":a="Shahien dezh";break;case"675":a="Keshavarz";break;case"282":case"283":a="Maku";break;case"286":case"287":a="Mahabad";break;case"296":case"297":a="Miandoab";break;case"290":a="Naghdeh";break;case"400":case"401":a="Asadabad";break;case"404":case"405":a="Bahar";break;case"397":a="Toyserkan";break;case"398":case"399":a="Razan";break;case"647":a="Shara va pishkhar";break;case"502":a="Famenin";break;case"584":a="Qolqol rud";break;case"402":case"403":a="Kabodarahang";break;case"392":case"393":a="Malayer";break;case"395":case"396":a="Nahavand";break;case"386":case"387":a="Hamedan";break;case"503":a="Abarkuh";break;case"444":a="Ardakan";break;case"551":a="Ashkezar";break;case"447":a="Bafgh";break;case"561":a="Bahabad";break;case"445":a="Taft";break;case"718":a="Dastgardan";break;case"83":a="Tabas";break;case"446":a="Mehriz";break;case"448":a="Maybod";break;case"552":a="Nayer";break;case"543":a="Harat and Marvast";break;case"442":case"443":a="Yazd";break;case"51":a="Ashtiyan";break;case"052":case"053":a="Arak";break;case"58":a="Tafresh";break;case"55":a="Khomein";break;case"617":a="Khandab";break;case"57":a="Delijan";break;case"618":a="zarand markazi";break;case"059":case"060":a="Saveh";break;case"061":case"062":a="Sarband";break;case"544":a="Farahan";break;case"56":a="Mahalat";break;case"571":a="vafs";break;case"593":a="Hendudur";break;case"667":a="Abu Musa";break;case"348":a="Bastak";break;case"586":a="Bashaghard";break;case"338":case"339":a="Bandar Abbas";break;case"343":case"344":a="Bandar Lengeh";break;case"346":a="Jask";break;case"337":a="Haji Abad";break;case"554":a="Khamir";break;case"469":a="Rudan";break;case"537":a="Fin";break;case"345":a="Qeshm";break;case"470":a="Gavbandi";break;case"341":case"342":a="Minab";break;case" 483":case"484":a="Azna";break;case"557":a="Oshtoriyan";break;case"418":a="Alshatr";break;case"416":case"417":a="Oligodarz";break;case"412":case"413":a="Boroujerd";break;case"592":a="Papi";break;case"612":a="Chaghlundy";break;case"613":a="Chegeni";break;case"406":case"407":a="Khorram abad";break;case"421":a="Doroud";break;case"598":a="Romashkan";break;case"419":a="Kuhdasht";break;case"385":a="Malavi (pol dokhtar)";break;case"420":a="Noorabad (Delfan)";break;case"528":a="Veysian";break;case"213":case"214":a="Amol";break;case"205":case"206":a="Babol";break;case"498":a="Babolsar";break;case"568":a="Bandpey";break;case"711":a="Bandpey sharghi";break;case"217":case"218":a="Behshar";break;case"221":a="Tonekabon";break;case"582":a="Joybar";break;case"483":a="Chalous";break;case"625":a="Chamestan";break;case"576":a="Chahar dangeh";break;case"578":a="Doodange";break;case"227":a="Ramsar";break;case"208":case"209":a="Sari";break;case"225":a="Swadkouh";break;case"577":a="Shirgah";break;case"712":a="Abbas Abad";break;case"215":case"216":a="Ghaemshahr";break;case"626":a="Kajour";break;case"627":a="Kelardasht";break;case"579":a="Galougah";break;case"713":a="Mindoroud";break;case"499":a="Neka";break;case"222":a="Noor";break;case"219":case"220":a="Noushahr";break;case"500":case"501":a="Haraz va Mahmoudabad";break;case"623":a="Azadshahr";break;case"497":a="Agha ghala";break;case"223":a="Bandar torkaman";break;case"689":a="Bandar Gaz";break;case"487":a="Ramian";break;case"226":a="Ali Abad";break;case"224":a="Kurdkouy";break;case"486":a="kalaleh";break;case"211":case"212":a="Gorgan";break;case"628":a="Gomeishan";break;case"202":case"203":a="Gonbad-e Qavus";break;case"531":a="Marveh tapeh";break;case"488":a="Minudasht";break;case"261":a="Astara";break;case"273":a="Astaneh";break;case"630":a="amlash";break;case"264":a="Bandar Anzali";break;case"518":a="Khomam";break;case"631":a="Rahim Abad";break;case"258":case"259":a="Rasht";break;case"570":a="Rezvanshahr";break;case"265":a="Roodbar";break;case"268":case"269":a="Rossdar";break;case"653":a="Sangar";break;case"517":a="Siyahkal";break;case"569":a="shaft";break;case"267":a="Someeh sara";break;case"262":case"263":a="Talesh";break;case"593":a="Amarlou";break;case"266":a="Fouman";break;case"693":a="Kochesfehan";break;case"271":case"272":a="Lahijan";break;case"694":a="Lasht-e nagha";break;case"270":a="Langrod";break;case"516":a="Masal va Shanderman";break;case"333":case"334":a="Islam Abad";break;case"691":a="Bayangan";break;case"323":case"322":a="Paveh";break;case"595":a="Salas Babajani";break;case"395":a="Javanroud";break;case"641":a="Homeyl";break;case"596":a="Ravansar";break;case"336":a="Sar Pul Zahab";break;case"335":a="Songor";break;case"496":a="Sahneh";break;case"337":a="gasr Shirin";break;case"324":case"325":a="Kermanshah";break;case"394":a="Kerend";break;case"330":a="Cangavar";break;case"332":a="guilan gharb";break;case"331":a="Hersin";break;case"687":a="Basht";break;case"422":case"423":a="Boyer Ahmad (Yasuj)";break;case"599":a="Bahmani";break;case"600":a="Charosa";break;case"688":a="Doruhan";break;case"424":case"425":a="Kohkiloyeh (Dehdasht)";break;case"426":a="Gachsaran (Duganbadan)";break;case"550":a="Landeh";break;case"697":a="Margoon";break;case"384":a="Baneh";break;case"377":case"378":a="Bijar";break;case"558":a="Dehgolan";break;case"385":a="Dyvandreh";break;case"646":a="Sarvabad";break;case"375":case"376":a="Saghez";break;case"372":case"373":a="Sanandaj";break;case"379":case"380":a="Gorveh";break;case"383":a="Kamyaran";break;case"674":a="Korani";break;case"381":case"382":a="Marivan";break;case"676":a="Namshir";break;case"722":a="Arzonieh";break;case"542":a="Anar";break;case"312":case"313":a="Baft";break;case"317":a="Bardsir";break;case"310":case"311":a="Bam";break;case"302":case"303":a="Jiroft";break;case"583":a="raber";break;case"321":a="Raver";break;case"382":a="Rain";break;case"304":case"305":a="Rafsanjan";break;case"536":a="Roudbar Kahnouj";break;case"605":a="Regan";break;case"308":case"309":a="Zarand";break;case"306":case"307":a="Sirjan";break;case"319":a="Shahdad";break;case"313":case"314":a="Shahr babak";break;case"606":a="Amber abad";break;case"320":a="Fahraj";break;case"698":a="Galeh ganj";break;case"298":case"299":a="Kerman";break;case"535":a="Kohbnan";break;case"315":case"316":a="Kahnouj";break;case"318":a="Golbaf";break;case"607":a="Mahan";break;case"608":a="Manujan";break;case"508":a="Abic";break;case"538":a="Avaj";break;case"728":a="Alborz";break;case"509":a="Boine Zahra";break;case"438":case"439":a="Takestan";break;case"580":a="Roudbar Alamut";break;case"590":a="Roudbar shahrestan";break;case"559":a="Zia Abad";break;case"588":a="Tarom selfi";break;case"431":case"432":a="gazvin";break;case"037":case"038":a="gom";break;case"702":a="Kahak";break;case"240":case"241":a="Abadeh";break;case"670":a="Abadeh Tashak";break;case"648":a="Arsanjan";break;case"252":a="Estahban";break;case"678":a="Eshkanan";break;case"253":a="Eghlid";break;case"649":a="Ouz";break;case"513":a="Bavanat";break;case"546":a="Beyza";break;case"671":a="Juyom";break;case"246":case"247":a="Jahrom";break;case"654":a="Haji Abad (Zarrin Dasht)";break;case"548":a="Kharameh";break;case"547":a="Khsht va komarej";break;case"655":a="Kafr";break;case"248":case"249":a="Darab";break;case"253":a="Sepidan";break;case"514":a="Sarvestan";break;case"665":a="Sadat Abad";break;case"673":a="Shibkouh";break;case"228":case"229":case"230":a="Shiraz";break;case"679":a="Farashband";break;case"256":case"257":a="Fasa";break;case"244":case"245":a="Firooz abad";break;case"681":a="Ghonghori (khoram bid)";break;case"723":a="Girukarzin";break;case"236":case"237":a="Kazeroon";break;case"683":a="kuar";break;case"656":a="krash";break;case"250":case"251":a="Larestan";break;case"515":a="Lamerd";break;case"242":case"243":a="Marvdasht";break;case"238":case"239":a="Mamasani";break;case"657":a="Mehr";break;case"255":a="Neyriz";break;case"684":a="Eyvanki";break;case"700":a="Bastam";break;case"642":a="Beyarjomand";break;case"457":a="Damghan";break;case"456":a="Semnan";break;case"458":case"459":a="Shahroud";break;case"460":a="Garmsar";break;case"530":a="Mahdishahr";break;case"520":a="Miami";break;case"358":case"359":a="Iranshahr";break;case"682":a="Bazman";break;case"703":a="Bampur";break;case"364":case"365":a="Chabahar";break;case"371":a="Khash";break;case"701":a="Dashtiyari";break;case"720":a="Rask";break;case"366":case"367":a="Zabul";break;case"704":a="Zabuli";break;case"361":case"362":a="Zahedan";break;case"369":case"370":a="Saravan";break;case"635":a="Sarbaz";break;case"668":a="Sib va soran";break;case"533":a="Shahraki va naroei (Zahak)";break;case"705":a="Shib Ab";break;case"699":a="Fanuj";break;case"669":a="gasrgand";break;case"725":a="Konarak";break;case"597":a="Lashar (espakeh)";break;case"611":a="Mirjaveh";break;case"525":a="Nick shahr";break;case"181":a="Abadan";break;case"527":a="Aghajari";break;case"585":a="Arvand kenar";break;case"685":a="Omidieh";break;case"663":a="andika";break;case"192":case"193":a="Andimeshk";break;case"174":case"175":a="Ahvaz";break;case"183":case"184":a="Izeh";break;case"481":a="Bagh malek";break;case"706":a="Bandar emam Khomeini ";break;case"194":case"195":a="Bandar mahshar";break;case"185":case"186":a="Behbahan";break;case"182":a="Khorramshahr";break;case"199":case"200":a="Dezful";break;case"198":a="Dashe Azadegan";break;case"662":a="Ramshir";break;case"190":case"191":a="Ramhormoz";break;case"189":a="Shadegan";break;case"707":a="Shaver";break;case"526":a="Sush";break;case"187":case"188":a="Shushtar";break;case"729":a="Gotvand";break;case"730":a="Lali";break;case"196":case"197":a="Masjed Soleyman";break;case"661":a="Hondijan";break;case"680":a="Hoveizeh";break;case"643":a="Ahmad abad";break;case"562":a="Bajestan";break;case"572":a="Bradaskan";break;case"74":a="Taibad";break;case"644":a="Takht jolgeh";break;case"072":case"073":a="Torbat jam";break;case"069":case"070":a="Torbat heydarieh";break;case"521":a="Joghtai";break;case"573":a="Jouin";break;case"522":a="Chenarran";break;case"724":a="Khalil Abad";break;case"76":a="Khaf";break;case"77":a="Dragaz";break;case"650":a="Rashtkhar";break;case"574":a="Zeber khan";break;case"078":case"079":a="Sabzevar";break;case"81":a="Sarakhs";break;case"84":a="Fariman";break;case"651":a="Faiz abad";break;case"086":case"087":a="guchan";break;case"089":case"090":a="Kashmar";break;case"553":a="Kalat";break;case"91":a="Gonabad";break;case"092":case"093":case"094":a="Mashhad";break;case"97":a="Mashhad mantaghe2";break;case"98":a="Mashhad mantaghe3";break;case"96":a="Mashhad mantaghe1";break;case"105":case"106":a="neyshabour";break;case"63":a="Esfarin";break;case"067":case"068":a="Bojnord";break;case"75":a="Jajarm";break;case"591":a="Razu o jargalan";break;case"82":a="Shirvan";break;case"635":a="Faruj";break;case"524":a="Mane va Samelgan";break;case"468":a="Ardal";break;case"465":a="Broujen";break;case"461":case"462":a="Shahr e Kord";break;case"467":a="Farsan";break;case"632":a="Flard";break;case"555":a="Koohrang";break;case"633":a="Kiyar";break;case"629":a="Gandman";break;case"466":a="Lordegan";break;case"696":a="Miyankoh";break;case"721":a="Bashroyeh";break;case"064":case"065":a="Birjand";break;case"523":a="darmiyan";break;case"652":a="zirkoh";break;case"719":a="Sarayan";break;case"716":a="Sarbisheh ";break;case"85":a="Ferdous";break;case"88":a="Gaenat";break;case"563":a="Nehbandan";break;case"529":a="Bandar Deilm";break;case"353":a="Bandar ganaveh";break;case"349":case"350":a="Bushehr";break;case"355":a="Tangestan";break;case"609":a="Jam";break;case"351":case"352":a="Dashtestan";break;case"354":a="Dashti";break;case"732":a="Delvar";break;case"357":a="Dair";break;case"532":a="Saad Abad";break;case"610":a="Shabankara";break;case"356":a="Kangan";break;case"556":a="Eslamshahr";break;case"658":a="Pakdasht";break;case"001":case"002":case"003":case"004":case"005":case"006":case"007":case"008":a="Tehran markazi";break;case"11":a="Tehran jonob";break;case"20":a="Tehran shargh";break;case"25":a="Tehran shomal";break;case"15":a="Tehran gharb";break;case"43":a="Damavand";break;case"666":a="Robat Karim";break;case"489":a="Savojbolagh";break;case"044":case"045":a="Shemiran";break;case"048":case"049":a="Shahr rey";break;case"490":case"491":a="Shahriar";break;case"695":a="Taleghan";break;case"659":a="Firoozkooh";break;case"031":case"032":a="Karaj";break;case"664":a="Kahrizak";break;case"717":a="Nazarabad";break;case"041":case"042":a="Varamin";break;case"471":case"472":a="Omoure khareje";break;case"454":a="Abdanan";break;case"581":a="arkhazi (malekshahi)";break;case"449":case"450":a="Ilam";break;case"616":a="Ivan";break;case"534":a="Badreh";break;case"455":a="Dareh shahr";break;case"451":a="Dehloran";break;case"726":a="Zarin Abad";break;case"634":a="Shirvan Lumar";break;case"453":a="Shirvan va Chardavol";break;case"727":a="Mussan";break;case"452":a="Mehran";break;case"145":case"146":a="Ardebil";break;case"731":a="Arshagh";break;case"690":a="Angout";break;case"601":a="Bileh savar";break;case"504":a="Pars abad";break;case"163":a="Khalkhal";break;case"714":a="Khouresh Rustam";break;case"715":a="Sarein";break;case"566":a="Sanjabad (Kosar)";break;case"166":case"167":a="Meshkin shahr";break;case"161":case"162":a="Moghan";break;case"686":a="Namin";break;case"603":a="Naeir";break;case"619":a="Aran va Bidgol";break;case"118":a="Ardestan";break;case"127":case"128":case"129":a="Esfahan";break;case"620":a="Bagh Bahadoran";break;case"621":a="Boeing va Miandasht";break;case"549":a="Tiran va karan";break;case"564":a="Jarghoyeh";break;case"575":a="Chadagan";break;case"113":case"114":a="Khomeini shahr";break;case"122":a="Khansar";break;case"540":a="Khor va Biannak";break;case"660":a="Dolat abad";break;case"120":a="Semirom";break;case"512":a="Semirom sofla (Dehagan)";break;case"510":case"511":a="Shahin Shahr";break;case"119":a="Shahreza";break;case"115":a="Fereydan";break;case"112":a="Fereydoun Shahr";break;case"110":case"111":a="Falavarjan";break;case"125":case"126":a="Kashan";break;case"565":a="Kohpayeh";break;case"121":a="Golpayegan";break;case"116":case"117":a="Lenjan (Zarinshahr)";break;case"541":a="Mobarake";break;case"622":a="Meymeh";break;case"124":a="Naein";break;case"108":case"109":a="Najaf Abad";break;case"123":a="Natanz";break;case"Motefareghe":a="Motefateghe az hame ostanha";break;case"428":case"427":a="Zanjan";break;case"507":a="Malekan";break;case"158":a="Marand";break;case"615":a="Abhar va Khoramdareh";break;case"152":case"153":a="Miyaneh"}return app.vtranslate(a)},LoadCCN:function(e){var a="Pasargad Bank",t=[{id:"Melli Bank",rule:/^603799\d{10}/g},{id:"Sepah Bank",rule:/^589210\d{10}/g},{id:"Toseeh Saderat Bank",rule:/^627648\d{10}/g},{id:"Sanat Madan Bank",rule:/^627961\d{10}/g},{id:"KeshavarziBank",rule:/^603770\d{10}/g},{id:"Maskan Bank",rule:/^628023\d{10}/g},{id:"Post Bank",rule:/^628023\d{10}/g},{id:"Tosse Taavon Bank",rule:/^502908\d{10}/g},{id:"Eghtesad Novin Bank",rule:/^627412\d{10}/g},{id:"Parsian Bank",rule:/^622106\d{10}/g},{id:a,rule:/^639347\d{10}/g},{id:a,rule:/^502229\d{10}/g},{id:"Karafarin Bank",rule:/^627488\d{10}/g},{id:"Saman Bank",rule:/^621986\d{10}/g},{id:"Sina Bank",rule:/^639346\d{10}/g},{id:"Sarmayeh Bank",rule:/^639607\d{10}/g},{id:"Ayandeh Bank",rule:/^636214\d{10}/g},{id:"Shahr Bank",rule:/^502806\d{10}/g},{id:"Dey Bank",rule:/^502938\d{10}/g},{id:"Saderat Bank",rule:/^603769\d{10}/g},{id:"Mellat Bank",rule:/^610433\d{10}/g},{id:"Tejarat Bank",rule:/^627353\d{10}/g},{id:"Refah Bank",rule:/^589463\d{10}/g},{id:"Ansar Bank",rule:/^627381\d{10}/g},{id:"Resalat Bank",rule:/^504172\d{10}/g},{id:"Hekmat Bank",rule:/^636949\d{10}/g},{id:"Gardeshgari Bank",rule:/^505416\d{10}/g},{id:"Mehr Iran Bank",rule:/^606373\d{10}/g},{id:"Toseeh Bank",rule:/^628157\d{10}/g},{id:"Ghavamin Bank",rule:/^639599\d{10}/g},{id:"Tejarat Bank",rule:/^585983\d{10}/g},{id:"Iran Zamin Bank",rule:/^505785\d{10}/g},{id:"JBC",rule:/^(?:2131|1800|35\d{3})\d{11}/g},{id:"Discover",rule:/^6(?:011|5[0-9]{2})[0-9]{12}/g},{id:"Diners Club",rule:/^3(?:0[0-5]|[68][0-9])[0-9]{11}/g},{id:"Visa Card",rule:/^4[0-9]{12}(?:[0-9]{3})/g},{id:"Master Card",rule:/^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/g}];e=e.replace(/[^0-9.]/g,"");for(var r=0;r<t.length;r++)if(t[r].rule.test(e))return app.vtranslate(t[r].id);return app.vtranslate("Unknown Bank")},LoadIBAN:function(e){for(var a=[{id:"Markazi Bank",ibanrule:/^IR\d{2}010\d{19}/g,cardrule:/d{16}/g},{id:"Sanat Madan Bank",ibanrule:/^IR\d{2}011\d{19}/g,cardrule:/d{16}/g},{id:"Mellat Bank",ibanrule:/^IR\d{2}012\d{19}/g,cardrule:/d{16}/g},{id:"Refah Bank",ibanrule:/^IR\d{2}013\d{19}/g,cardrule:/d{16}/g},{id:"Maskan Bank",ibanrule:/^IR\d{2}014\d{19}/g,cardrule:/d{16}/g},{id:"Sepah Bank",ibanrule:/^IR\d{2}015\d{19}/g,cardrule:/d{16}/g},{id:"Keshavarzi Bank",ibanrule:/^IR\d{2}016\d{19}/g,cardrule:/d{16}/g},{id:"Melli Bank",ibanrule:/^IR\d{2}017\d{19}/g,cardrule:/d{16}/g},{id:"Tejarat Bank",ibanrule:/^IR\d{2}018\d{19}/g,cardrule:/d{16}/g},{id:"Saderat Bank",ibanrule:/^IR\d{2}019\d{19}/g,cardrule:/d{16}/g},{id:"Toseeh Saderat Bank",ibanrule:/^IR\d{2}020\d{19}/g,cardrule:/d{16}/g},{id:"Post Bank Bank",ibanrule:/^IR\d{2}021\d{19}/g,cardrule:/d{16}/g},{id:"Tosse Taavon Bank",ibanrule:/^IR\d{2}022\d{19}/g,cardrule:/d{16}/g},{id:"Tosse Institute Bank",ibanrule:/^IR\d{2}051\d{19}/g,cardrule:/d{16}/g},{id:"Ghavamin Bank",ibanrule:/^IR\d{2}052\d{19}/g,cardrule:/d{16}/g},{id:"Karafarin Bank",ibanrule:/^IR\d{2}053\d{19}/g,cardrule:/d{16}/g},{id:"Parsian Bank",ibanrule:/^IR\d{2}054\d{19}/g,cardrule:/d{16}/g},{id:"Eghtesad Novin Bank",ibanrule:/^IR\d{2}055\d{19}/g,cardrule:/d{16}/g},{id:"Saman Bank",ibanrule:/^IR\d{2}056\d{19}/g,cardrule:/d{16}/g},{id:"Pasargad Bank",ibanrule:/^IR\d{2}057\d{19}/g,cardrule:/d{16}/g},{id:"Sarmayeh Bank",ibanrule:/^IR\d{2}058\d{19}/g,cardrule:/d{16}/g},{id:"Sina Bank",ibanrule:/^IR\d{2}059\d{19}/g,cardrule:/d{16}/g},{id:"Mehr Iran Bank",ibanrule:/^IR\d{2}060\d{19}/g,cardrule:/d{16}/g},{id:"Shahr Bank",ibanrule:/^IR\d{2}061\d{19}/g,cardrule:/d{16}/g},{id:"Ayandeh Bank",ibanrule:/^IR\d{2}062\d{19}/g,cardrule:/d{16}/g},{id:"Ansar Bank",ibanrule:/^IR\d{2}063\d{19}/g,cardrule:/d{16}/g},{id:"Gardeshgari Bank",ibanrule:/^IR\d{2}064\d{19}/g,cardrule:/d{16}/g},{id:"Hekmat Bank",ibanrule:/^IR\d{2}065\d{19}/g,cardrule:/d{16}/g},{id:"Dey Bank",ibanrule:/^IR\d{2}066\d{19}/g,cardrule:/d{16}/g},{id:"Iran Zamin Bank",ibanrule:/^IR\d{2}069\d{19}/g,cardrule:/d{16}/g},{id:"Resalat Bank",ibanrule:/^IR\d{2}070\d{19}/g,cardrule:/d{16}/g},{id:"Kowsar Bank",ibanrule:/^IR\d{2}073\d{19}/g,cardrule:/d{16}/g},{id:"Mellal Bank",ibanrule:/^IR\d{2}075\d{19}/g,cardrule:/d{16}/g},{id:"Khavar Miyane Bank",ibanrule:/^IR\d{2}078\d{19}/g,cardrule:/d{16}/g},{id:"Iran Venezuela Bank",ibanrule:/^IR\d{2}095\d{19}/g,cardrule:/d{16}/g}],t=0;t<a.length;t++)if(a[t].ibanrule.test(e))return app.vtranslate(a[t].id);return app.vtranslate("Unknown Bank")},LoadPasswordField:function(e){ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/Password/strength.css","ParsVTPasswordField")},copyStringToClipboard:function(e){var a=document.createElement("textarea");a.innerText=e,document.body.appendChild(a),a.select(),a.focus(),document.execCommand("copy"),a.remove()},ShowPasswordField:function(e){var a=this,t=app.vtranslate("Copy Password"),r=a.cryptoPwd(e,!1),s=app.vtranslate("Copy to Clipboard")+'<br /><input class="inputElement" type="text" style="direction: ltr; text-align: left" value="'+r+'" readonly >',i={cancel:{label:app.vtranslate("Cancel"),className:"btn-default confirm-box-btn-pad pull-right"},confirm:{label:app.vtranslate("Copy"),className:"confirm-box-ok confirm-box-btn-pad btn-primary"}};app.helper.showConfirmationBox({title:t,message:s,buttons:i}).then((function(e){a.copyStringToClipboard(r)}),(function(e,a){}))},ShowRandomPassword:function(e){var a=this,t=app.vtranslate("Password Generator"),r=app.vtranslate("Generate New Password")+'<br /><div class="row"><div class="col-md-12"><div class="input-group">\n<input type="text" class="form-control" rel="gp" data-size="16" data-character-set="a-z,A-Z,0-9,#">\n<span class="input-group-btn"><button type="button" class="btn btn-default getNewPass"><span class="fa fa-refresh"></span></button></span>\n</div></div></div>',s={cancel:{label:app.vtranslate("Cancel"),className:"btn-default confirm-box-btn-pad pull-right"},confirm:{label:app.vtranslate("Use Password"),className:"confirm-box-ok confirm-box-btn-pad btn-primary"}};app.helper.showConfirmationBox({title:t,message:r,buttons:s}).then((function(t){var r=$('input[rel="gp"]').val(),s=a.cryptoPwd($('input[rel="gp"]'),!0);e.val(s),jQuery("#"+e.attr("name")+"_display").val(r),a.copyStringToClipboard(r)}),(function(e,a){})),$('input[rel="gp"]').each((function(){$(this).val(a.randPassword($(this)))}))},cryptoPwd:function(e,a){var t=e.val();if(""==t)return"";if(!0===a)return(r=window.btoa(t)).split("").reverse().join("");if(!1===a){var r=t.split("").reverse().join("");return window.atob(r)}return""},randPassword:function(e){var a=$(e).attr("data-character-set").split(","),t="";$.inArray("a-z",a)>=0&&(t+="abcdefghijklmnopqrstuvwxyz"),$.inArray("A-Z",a)>=0&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),$.inArray("0-9",a)>=0&&(t+="0123456789"),$.inArray("#",a)>=0&&(t+="![]{}()%&*$#^<>~@|");for(var r="",s=0;s<$(e).attr("data-size");s++)r+=t.charAt(Math.floor(Math.random()*t.length));return r},checkPasswordStrength:function(e){var a=e.data("target")+"_status";if(""===e.val())return!1;e.val().length<6?(jQuery("#"+a).removeClass(),jQuery("#"+a).addClass("strength_meter"),jQuery("#"+a).addClass("weak-password"),jQuery("#"+a).html(app.vtranslate("Weak"))):e.val().match(/([0-9])/)&&e.val().match(/([a-zA-Z])/)&&e.val().match(/([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/)?(jQuery("#"+a).removeClass(""),jQuery("#"+a).addClass("strength_meter"),jQuery("#"+a).addClass("strong-password"),jQuery("#"+a).html(app.vtranslate("Strong"))):(jQuery("#"+a).removeClass(),jQuery("#"+a).addClass("strength_meter"),jQuery("#"+a).addClass("medium-password"),jQuery("#"+a).html(app.vtranslate("Medium")))},searchCoordinates:function(e,a,t){var r=String(e).toString().trim().split(","),s=r[0],i=0;void 0!==r[1]&&(i=r[1]);var l=jQuery("body").data("language"),d="index.php?module=ParsVT&action=Fields&mode=searchCoordinates&lat="+s+"&lon="+i+"&accept-language="+l;$.ajax({url:d,type:"GET",dataType:"json",error:function(e){jQuery("#"+a+"_locationname").html("")},success:function(r){if(t||void 0===r.display_name){if(void 0!==r.address)""==(s=(void 0!==r.address.country?r.address.country+" - ":"")+(void 0!==r.address.state?r.address.state+" - ":"")+(void 0!==r.address.city?r.address.city:""))&&(s=e);else s=e}else{var s=r.display_name;if("fa_ir"==l){(s=r.display_name.split(",")).reverse();for(var i=0;i<s.length;i++)isNaN(s[i])||s.splice(i,1);s=s.join()}}jQuery("#"+a+"_locationname").html(s)}})},registerWeatherAutoComplete:function(e,a){var t=this;container=$("#"+e),container.find("input.autoComplete").autocomplete({minLength:"3",source:function(e,a){$.ajax({url:"index.php",dataType:"jsonp",data:{module:"ParsVT",action:"Fields",mode:"searchCities",term:e.term},success:function(e){var t=e;t.length<=0&&(t=new Array({label:app.vtranslate("JS_NO_RESULTS_FOUND"),type:"no results"})),a(t)}})},select:function(r,s){jQuery("input[name='"+a+"']").val(s.item.value),t.displayForcast(e,s.item.value),s.item.value=s.item.label,container.find("span.clearWeather").removeClass("hide"),jQuery("#"+a+"_display").attr("disabled","disabled"),jQuery("#"+a+"_display").prop("disbaled",!0),jQuery("#"+a+"_display").attr("readonly",!0)}})},registerCitiesListAutoComplete:function(e){$(document).on("input propertychange","#"+e,(function(a){if(""==$(this).val()||$(this).val().length<3){var t=e.replace("search_","target_");jQuery("#"+t).val("")}})),$("#"+e).autocomplete({minLength:"3",source:function(a,t){$.ajax({url:"index.php",dataType:"jsonp",data:{module:"ParsVT",action:"Fields",mode:"findCity",term:a.term,fieldname:e.replace("search_","")},success:function(e){var a=e;a.length<=0&&(a=new Array({label:app.vtranslate("JS_NO_RESULTS_FOUND"),type:"no results"})),t(a)}})},select:function(a,t){jQuery("#"+e).val(t.item.label);var r=e.replace("search_","target_");jQuery("#"+r).val(t.item.value),a.preventDefault()}})},displayForcast:function(e,a){var t="weather"+Math.floor(1e3*Math.random()+1),r='<div class="parsweatherwidget">\n    <div class="row">\n        <div class="col-sm-12 weathercity" id="'+t+'_locationname"></div>\n        <div class="col-sm-12 weatherheading"  id="'+t+'_weatherstatus"></div>\n        <div class="col-sm-6 parsweatherwidgeticon"><i class="wi " id="'+t+'_weathericon"></i></div>\n        <div class="col-sm-6">\n            <div class="col-sm-12 weathertemp" id="'+t+'_weathertemp"></div>\n            <div class="col-sm-12 weatherstatus" id="'+t+'_weatherwindSpeed"></div>\n            <div class="col-sm-12 weatherstatus" id="'+t+'_humidity"></div>\n            <div class="col-sm-12 weatherstatus" id="'+t+'_time"></div>\n        </div>\n    </div>\n</div>';jQuery("#"+e+"_forcast").html(r),this.searchCoordinates(a,t,!0),this.forecastWeather(a,t)},forecastWeather:function(e,a){var t=String(e).toString().trim().split(","),r=t[0],s=0;void 0!==t[1]&&(s=t[1]);var i="index.php?module=ParsVT&action=Fields&mode=getWeather&coordinate="+(e=r+","+s)+"&lang="+jQuery("body").data("language").substring(0,2);$.ajax({url:i,type:"GET",dataType:"json",error:function(e){jQuery("#"+a+"_locationname").html(""),jQuery("#"+a+"_weatherstatus").html(""),jQuery("#"+a+"_weathericon").removeClass("wi-*"),jQuery("#"+a+"_weathertemp").html(""),jQuery("#"+a+"_weatherwindSpeed").html(""),jQuery("#"+a+"_humidity").html("")},success:function(e){e.currently?(jQuery("#"+a+"_weatherstatus").html(e.currently.summary),jQuery("#"+a+"_weathericon").addClass("wi-"+e.currently.icon),jQuery("#"+a+"_weathertemp").html(e.currently.temperature+" "),jQuery("#"+a+"_weatherwindSpeed").html(app.vtranslate("Wind")+": "+e.currently.windSpeed+" km/h"),jQuery("#"+a+"_humidity").html(app.vtranslate("Humidity")+": "+e.currently.humidity+"%")):(jQuery("#"+a+"_locationname").html(""),jQuery("#"+a+"_weatherstatus").html(""),jQuery("#"+a+"_weathericon").removeClass("wi-*"),jQuery("#"+a+"_weathertemp").html(""),jQuery("#"+a+"_weatherwindSpeed").html(""),jQuery("#"+a+"_humidity").html(""))}})},searchCity:function(e,a){var t="http://nominatim.openstreetmap.org/search?format=json&q="+e+"&accept-language="+jQuery("body").data("language");$.ajax({url:t,type:"GET",dataType:"json",error:function(e){console.dir(e)},success:function(e){var a=e[0];callback(a)}})},registerNumtoStringMethod:function(){var e=this;$(document).on("change keyup","input.num2persian",(function(){var a=$(this).closest(".input-group").find(".input-group-addon").text();0==$(this).parent().parent().find("span.num2persiandiv").length?$(this).parent().after('<div style="clear:both;"></div><span style="color: #959595;" class="num2persiandiv">'+e.NumtoString(jQuery(this).val(),a)+"</span>"):$(this).parent().parent().find("span.num2persiandiv").html(e.NumtoString(jQuery(this).val(),a))}))},NumtoString:function(e,a){return"function"==typeof Num2persian?("."==parsvt_groupingseparator&&e.indexOf(parsvt_groupingseparator)>-1&&e.indexOf(parsvt_decimalseparator)<0||(e=(e=e.split(parsvt_groupingseparator).join("")).split(parsvt_decimalseparator).join(".")),/^[+-]?\d+(\.\d+)?$/.test(e)?""==a?e.toPersianLetter()+" "+a+"<br />  "+Math.floor(e/10).toPersianLetter()+" ":e.toPersianLetter()+" "+a:""):""},getMobileOperatingSystem:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":/windows/i.test(e)?"Windows":"unknown"},formElement:!1,getForm:function(){return!1===this.formElement&&(this.formElement=jQuery("#EditView")),this.formElement},getMultiRelatedElement:function(e,a){if(void 0===e&&(e=this.getForm()),this.relatedContactElement=jQuery("#"+a+"_display",e),0==this.relatedContactElement.length){let t=CSS.escape(a+"_display");this.relatedContactElement=jQuery("#"+t,e)}return this.relatedContactElement},addNewRecordToRelatedList:function(e,a,t,r){a.length<=0&&(a=this.getForm());var s=new Array;if(0==(i=jQuery("#"+t+"_display",a)).length){let e=CSS.escape(t+"_display");var i=jQuery("#"+e,a)}void 0===i.data("select2")&&this.registerMultiRelatedSpecificEvents(),jQuery(i.data("select2").container,a).find(".select2-search-choice").each((function(e,a){s.push(jQuery(a).data("select2-data"))}));for(var l=e.data,d=0;d<l.length;d++){var n=l[d];n.text=n.name,s.push(n)}if(i.select2("data",s),a.find(".quickCreateContent").length>0){a.find('[name="related'+r+'Info"]').data("value",s);var o=this.getMultiRelatedElement(a,t);o.length>0&&(jQuery('<input type="hidden" name="'+t+'list" /> ').appendTo(a).val(o.val().split(",").join(";")),a.find('[name="'+t+'"]').attr("name",""))}},fillRelatedRecords:function(e,a,t){void 0===e&&(e=this.getForm());var r=e.find('[name="related'+t+'Info"]').data("value");for(var s in r){var i=r[s];i.text=i.name,r[s]=i}var l=jQuery("input[name^='"+a+"']").val();""!=l&&r.push({name:jQuery("input[name^='"+a+"']").attr("data-displayvalue"),id:l,text:jQuery("input[name^='"+a+"']").attr("data-displayvalue")}),this.getMultiRelatedElement(e,a).select2("data",r)},registerMultiReferenceActions:function(e){var a=this;if(void 0===e)e=jQuery("input[name^='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'][type=hidden]");form=a.getForm(),e.length>0&&(a.referenceModulePopupRegisterEvent(form),a.registerReferenceCreate(form))},registerMultiRelatedSpecificEvents:function(){var e=this;form=this.getForm(),jQuery("input[name*='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'][type=hidden]").each((function(){if(!$(this).closest("tr").hasClass("relatedRecordsClone")&&!jQuery(this).hasClass("parsed")){jQuery(this).addClass("parsed");var a=jQuery(this).attr("name"),t=jQuery(this).parent().find("input[name=popupReferenceModule]").val();e.getMultiRelatedElement(form,a).select2({minimumInputLength:3,ajax:{url:"index.php?module="+t+"&action=BasicAjax&search_module="+t,dataType:"json",data:function(e,a){var t={};return t.search_value=e,t},results:function(e){for(var a in e.results=e.result,e.results){var t=e.result[a];t.text=t.label}return e},transport:function(e){return jQuery.ajax(e)}},multiple:!0,dropdownCss:{"z-index":"10001"}}),form.find('[name="'+a+'"]').on(Vtiger_Edit_Js.preReferencePopUpOpenEvent,(function(a){app.helper.showErrorNotification({message:app.vtranslate("LBL_CANT_SELECT_CONTACT_FROM_LEADS")});var t=jQuery(this).attr("name"),r=jQuery(this).parent().find("input[name=popupReferenceModule]").val();e.getMultiRelatedElement(form,t).select2({minimumInputLength:3,ajax:{url:"index.php?module=Contacts&action=BasicAjax&search_module=Contacts",dataType:"json",data:function(e,a){var t={};return t.search_value=e,t},results:function(e){for(var a in e.results=e.result,e.results){var t=e.result[a];t.text=t.label}return e},transport:function(e){return jQuery.ajax(e)}},multiple:!0,dropdownCss:{"z-index":"10001"}}),form.find('[name="'+t+'"]').on(Vtiger_Edit_Js.refrenceMultiSelectionEvent,(function(a,s){e.addNewRecordToRelatedList(s,form,t,r)})),e.fillRelatedRecords(form,t,r)})),e.fillRelatedRecords(form,a,t)}}))},registerReferenceCreate:function(e){var a=this;e.on("click",".createMultiReferenceRecord",(function(t){var r=jQuery(t.currentTarget),s=r.closest("td").find("input[name^='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'][type=hidden]").attr("name"),i=r.closest("td").find("input[name=popupReferenceModule]").val();a.referenceCreateHandler(e,s,i)}))},referenceCreateHandler:function(e,a,t){var r=this,s=Vtiger_Index_Js.getInstance(),i=t,l=jQuery("#quickCreateModules").find('[data-name="'+i+'"]');if(l.length<=0){var d={title:app.vtranslate("JS_NO_CREATE_OR_NOT_QUICK_CREATE_ENABLED")};app.helper.showAlertNotification(d)}l.trigger("click",[{callbackFunction:function(i){var l=s.getReferencedModuleName(e),d={};d.name=i._recordLabel,d.id=i._recordId,d.module=l,r.addNewRecordToRelatedList({data:[d]},[],a,t);var n=s.getParentElement(e.find('[value="'+l+'"]')),o=n.find('input[class="sourceField"]').attr("name"),u=n.find('input[name="'+o+'"]');s.autoFillElement=u,s.postRefrenceSearch(d,e),n.find('input[class="sourceField"]').trigger(Vtiger_Edit_Js.postReferenceQuickCreateSave,{data:i})}}])},setReferenceFieldValue:function(e,a){var t=e.find('input[class="sourceField"]').attr("name"),r=e.find('input[name="'+t+'"]'),s=t+"_display",i=e.find('input[name="'+s+'"]'),l=e.find('input[name="popupReferenceModule"]').val(),d=a.name,n=a.id;r.val(n),i.val(d).attr("readonly",!0),r.trigger(Vtiger_Edit_Js.referenceSelectionEvent,{source_module:l,record:n,selectedName:d}),i.validationEngine("closePrompt",i)},openPopUp:function(e,a,t){var r=this,s=Vtiger_Edit_Js.getInstance(),i=s.getParentElement(jQuery(e.target)),l=s.getPopUpParams(i);l.view="Popup";var d=!1;l.multi_select&&(d=!0),form=this.getForm();var n=jQuery('input[class="sourceField"]',i),o=jQuery.Event(Vtiger_Edit_Js.preReferencePopUpOpenEvent);(n.trigger(o),o.isDefaultPrevented())||Vtiger_Popup_Js.getInstance().showPopup(l,(function(e){var s=JSON.parse(e),i=new Array;for(var l in s){e={name:s[l].name,id:l};i.push(e),d||r.addNewRecordToRelatedList(e,form,a,t)}d&&r.addNewRecordToRelatedList({data:i},form,a,t),n.trigger(Vtiger_Edit_Js.postReferenceSelectionEvent,{data:s})}))},referenceModulePopupRegisterEvent:function(e){var a=this;e.off("click",".relatedMultiPopup"),e.on("click",".relatedMultiPopup",(function(e){var t=jQuery(e.currentTarget),r=t.closest("td").find("input[name^='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'][type=hidden]").attr("name");void 0===r&&(r=t.closest("td").find("input[name*='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'][type=hidden]").attr("name"));var s=t.closest("td").find("input[name=popupReferenceModule]").val();a.openPopUp(e,r,s)})),e.on("change",".referenceModulesList",(function(e){var t=jQuery(e.currentTarget),r=a.getParentElement(t).next(),s=t.val(),i=jQuery('input[name="popupReferenceModule"]',r).length?jQuery('input[name="popupReferenceModule"]',r):jQuery("input.popupReferenceModule",r),l=i.val();i.val(s),l!=s&&r.find(".clearReferenceSelection").trigger("click")}))},registerDisplayParsVTCustomFieldsControl:function(e,a){var t=this,r=app.getViewName();app.getModuleName();if("Edit"==r&&e&&"AutoFill"==a)jQuery("input[name^='"+supportedParsVTCustomFields.Plaque_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Plaque_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Plaque_Field.prefix+"]").each((function(){var e=jQuery(this).val();if(""!=e){var a=e.split("-");$("#"+jQuery(this).attr("name")+"_plaquePart1").val(a[0]),$("#"+jQuery(this).attr("name")+"_plaquePart2").val(a[1]),$("#"+jQuery(this).attr("name")+"_plaquePart3").val(a[2]),$("#"+jQuery(this).attr("name")+"_plaquePart4").val(a[3]);updatePlaqueVal(jQuery(this).attr("name"))}})),jQuery("input[name^='"+supportedParsVTCustomFields.MPlaque_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.MPlaque_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Plaque_Field.prefix+"]").each((function(){var e=jQuery(this).val();if(""!=e){var a=e.split("-");$("#"+jQuery(this).attr("name")+"_plaquePart1").val(a[0]),$("#"+jQuery(this).attr("name")+"_plaquePart2").val(a[1]),$("#"+jQuery(this).attr("name")+"_plaquePart3").val(a[2]),$("#"+jQuery(this).attr("name")+"_plaquePart4").val(a[3]);updatePlaqueVal(jQuery(this).attr("name"))}}));else if("Detail"==r&&e&&"convertLead"==a)jQuery("input[name^='"+supportedParsVTCustomFields.Upload_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Upload_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Upload_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Upload_Field.prefix+"]").each((function(){var e=jQuery(this).parents("td"),a=jQuery(this).attr("name");if(!e.html().includes("pvcf_upload_files")){var t=Math.floor(1e3*Math.random()+1);jQuery(this).addClass("upload"+t),e.prepend('<div  id="frm_'+a+'"><div class="fileUploadBtn btn btn-primary"><div><i class="fa fa-laptop"></i> '+app.vtranslate("JS_UPLOAD")+'</div><input  type="file" size="4"  class="'+t+'"  name="upload_'+a+'[]" onchange="ParsVTCustomFields_Js.pvcf_upload_files(\''+a+"', "+t+", 'div');\"/></div></div>"),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),e.append("<div style='clear: both'>")}})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Upload_Fields.prefix+"']").each((function(){jQuery(this).val();var e=jQuery(this).parents("div.fieldValue"),a=jQuery(this).attr("name");jQuery(this).attr("name");if(!e.html().includes("pvcf_upload_multiple_files")){var t=Math.floor(1e3*Math.random()+1);jQuery(this).addClass("upload"+t),e.prepend('<div  id = "frm_'+a+'"><div class="fileUploadBtn btn btn-primary"><div><i class="fa fa-laptop"></i> '+app.vtranslate("JS_UPLOAD")+' (M)</div><input  type="file" size="4" multiple class="'+t+'" name="upload_'+a+'[]" onchange="ParsVTCustomFields_Js.pvcf_upload_multiple_files(\''+a+"', "+t+", 'div');\"/></div></div>"),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),e.append("<div style='clear: both'>")}}));else if("Edit"==r||e&&"Edit"==a)t.registerMultiRelatedSpecificEvents(),$("input.currencyField").each((function(){var e=$(this);jQuery(this).addClass("num2persian"),"fa"==parsvt_page_language&&void 0!==parsvt_decimalseparator&&void 0!==parsvt_groupingseparator&&"function"!=typeof Num2persian&&ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/num2persian/num2persian.js",(function(){var a=e.closest(".input-group").find(".input-group-addon").text();0==e.parent().parent().find("span.num2persiandiv").length?e.parent().after('<div style="clear:both;"></div><span style="color: #959595;" class="num2persiandiv">'+t.NumtoString(e.val(),a)+"</span>"):e.parent().parent().find("span.num2persiandiv").html(t.NumtoString(e.val(),a))}))})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Repeater_Field.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Repeater_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Repeater_Field.prefix+"]").each((function(){t.LoadRepeater(this,e,a,"Edit","")})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"]").each((function(){jQuery(this).parent("td").html().includes("recording-field")||t.LoadVoiceRecorder(this,e,a,"Edit","")})),jQuery("input[name^='"+supportedParsVTCustomFields.Coordinate.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Coordinate.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Coordinate.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Coordinate.prefix+"]").each((function(){if(!jQuery(this).parent().html().includes("separator")){jQuery(this).addClass("sourceField");var e=jQuery(this).attr("name"),a=jQuery("#"+e+"_display"),r=jQuery(this).val(),s="",i=t.getMobileOperatingSystem();if("Android"!=i&&"iOS"!=i&&"Windows"!=i||(s="<li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('"+i+"', '"+e+'_display\', \'id\')">Open App</a></li><li role="separator" class="divider"></li>'),a.length<=0){var l='<div class="referencefield-wrapper"><div class="input-group"><input id="'+e+'_display" data-target="'+e+'" type="text" class="marginLeftZero autoComplete inputElement ui-autocomplete-input ParsVTgps" value="'+r+'" autocomplete="off" readonly><span data-target="'+e+'" class="input-group-addon setCoordinate cursorPointer" title="'+app.vtranslate("Set Map")+'"><i class="fa fa-map-marker"></i></span><div class="dropdown hide"  id="'+e+'_dropdown"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="fa fa-eye" title="'+app.vtranslate("JS_VIEW_RECORD")+'"></span&nbsp; <span class="caret"></span></button><ul class="dropdown-menu"><li><a onclick="ParsVTCustomFields_Js.OpenGpsWindow(\'parsvt\', \''+e+'_display\', \'id\')">View Map</a></li><li role="separator" class="divider"></li>'+s+"<li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('google', '"+e+"_display', 'id')\">Google Map</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('osm', '"+e+"_display', 'id')\">OpenStreetMap</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('waze', '"+e+"_display', 'id')\">Waze</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('yandex', '"+e+"_display', 'id')\">Yandex</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('parsijoo', '"+e+"_display', 'id')\">ParsiJoo</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('map.ir', '"+e+"_display', 'id')\">Map.IR</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('apple', '"+e+"_display', 'id')\">Apple</a></li></ul></div></div></div><br /><div id=\""+e+'_locationname" style="clear: both"></div>';jQuery(this).after(l),""!=r&&(jQuery("#"+e+"_dropdown").removeClass("hide"),t.searchCoordinates(r,e,!1)),$(document).on("click",".setgps",(function(e){var a=jQuery(this).data("gpstarget"),r=jQuery(this).attr("data-gpsvalue");r.length<=1&&(r=""),app.helper.hidePopup(),jQuery("#"+a+"_display").val(r),jQuery("input[name='"+a+"']").val(r),""==r?jQuery("#"+a+"_dropdown").addClass("hide"):(jQuery("#"+a+"_dropdown").removeClass("hide"),t.searchCoordinates(r,a,!1))})),$(document).on("click",".clearLocation",(function(e){app.helper.hidePopup();var a=jQuery(this).data("gpstarget");jQuery("#"+a+"_display").val(""),jQuery("input[name='"+a+"']").val(""),jQuery("#"+a+"_locationname").html(""),jQuery("#"+a+"_dropdown").addClass("hide")})),jQuery(".setCoordinate").on("click",(function(e){app.helper.hidePopup(),app.helper.showProgress();var a={view:"Coordinate",mode:"showGPSForm",module:"ParsVT",value:jQuery("#"+jQuery(this).data("target")+"_display").val(),target:jQuery(this).data("target")};app.request.post({data:a}).then((function(e,a){if(app.helper.hideProgress(),null===e){var t={};"undefined"!=typeof callback&&(t.cb=callback),app.helper.showPopup(a,t)}}))})),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important")}}})),jQuery("textarea").each((function(){var e=jQuery(this).attr("name"),a=app.getViewName();if(void 0!==e&&"Edit"==a&&e.substring(0,10)===supportedParsVTCustomFields.RTF_Description_Field.prefix&&jQuery(this).attr("id")!=e){var t=jQuery(this).parents("tr");void 0!==t&&t.children("td:empty").remove(),jQuery(this).attr("id",e),jQuery(this).removeAttr("data-validation-engine").addClass("ckEditorSource"),(new Vtiger_CkEditor_Js).loadCkEditor(jQuery(this))}})),jQuery("input[name^='"+supportedParsVTCustomFields.Upload_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Upload_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Upload_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Upload_Field.prefix+"]").each((function(){var e=jQuery(this).val(),a=jQuery(this).parents("table").parents("div").attr("class"),t=jQuery(this).parents("td"),r=jQuery(this).attr("name");if((!a.toLowerCase().includes("relatedblockslists")||r.toLowerCase().includes("relatedblockslists"))&&!t.html().includes("pvcf_upload_files")){var s=Math.floor(1e3*Math.random()+1);if(jQuery(this).addClass("upload"+s),t.prepend('<div  id="frm_'+r+'"><div class="fileUploadBtn btn btn-primary"><div><i class="fa fa-laptop"></i> '+app.vtranslate("JS_UPLOAD")+'</div><input  type="file" size="4"  class="'+s+'"  name="upload_'+r+'[]" onchange="ParsVTCustomFields_Js.pvcf_upload_files(\''+r+"', "+s+", 'td');\"/></div></div>"),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),""!=e&&"text"==jQuery(this).attr("type")){var i=e.split("$$");if(i.length>0){var l=jQuery(this).parent("td");if(l.find("span").remove(),l.find("img").remove(),i[2]&&i[2].indexOf("image")>-1){var d=i[0].replace(/\s+/g," ").trim(),n=["<span>","<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(e)+"','"+d+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download><img style="max-width:150px;max-height:150px;" src="'+d+'" /></a>','<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-field_name = "'+jQuery(this).attr("name")+'" data-file="'+e+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeThis(this)">',"</span>"].join("");l.append(n)}else{var o=i[0].replace(/\s+/g," ").trim(),u=(p=(p=o.split("/"))[p.length-1]).indexOf("_"),p=(u=(p=p.substr(u+1)).indexOf("_"),p.substr(u+1));n=["<span>","<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(e)+"','"+o+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download><i class="fa fa-download"  style="margin: 0 3px;"></i>'+p+"</a>",'<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-field_name = "'+jQuery(this).attr("name")+'"  data-file="'+e+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeThis(this)">',"</span>"].join("");l.append(n)}}}}})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Upload_Fields.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Upload_Fields.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Upload_Fields.prefix+"]").each((function(){var e=jQuery(this).val(),a=jQuery(this).parents("td"),t=jQuery(this).parents("table").parents("div").attr("class"),r=jQuery(this).attr("name"),s=jQuery(this).parent("td"),i=jQuery(this).attr("name");if((!t.toLowerCase().includes("relatedblockslists")||r.toLowerCase().includes("relatedblockslists"))&&!a.html().includes("pvcf_upload_multiple_files")){var l=Math.floor(1e3*Math.random()+1);if(jQuery(this).addClass("upload"+l),s.find("span").remove(),s.find("img").remove(),a.prepend('<div  id = "frm_'+r+'"><div class="fileUploadBtn btn btn-primary"><div><i class="fa fa-laptop"></i> '+app.vtranslate("JS_UPLOAD")+' (M)</div><input  type="file" size="4" multiple class="'+l+'" name="upload_'+r+'[]" onchange="ParsVTCustomFields_Js.pvcf_upload_multiple_files(\''+r+"', "+l+", 'td');\"/></div></div>"),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),s.append("<div style='clear: both'>"),""!=e&&jQuery(this).is("textarea")){var d=e.split("||");d.length>0&&$.each(d,(function(e,a){if(0!=a.length){var t=a.split("$$");if(t.length>0)if(t[2]&&t[2].indexOf("image")>-1){var l=t[0].replace(/\s+/g," ").trim(),d=['<div class="col-lg-1" style="width: 150px; height: 182px; max-width:150px;max-height:182px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;">',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+l+"','"+t[1]+"','"+t[2]+'\')"  href="javascript:void(0);" download><img style="max-width:120px;max-height:150px;" src="'+l+'" /></a>','<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-target_field= "'+r+'"  data-field_name = "'+i+'"  data-field_value = "'+a+'"   data-file="'+t[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeFile(this)">',"</div>"].join("");s.append(d)}else{var n=t[0].replace(/\s+/g," ").trim(),o=(e=(o=(o=n.split("/"))[o.length-1]).indexOf("_"),o.substr(e+1));d=['<div class="col-lg-1" style="width: 150px; height: 182px; max-width:150px;max-height:182px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;padding-top: 20px;">',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+n+"','"+t[1]+"','"+t[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><br />'+o+"</a><br>",'<input style="margin-right: 10px; margin-left: 10px;" class="btn btn-warning avfImageDelete" data-target_field= "'+r+'" data-field_name = "'+i+'"  data-field_value = "'+a+'"  data-file="'+t[0]+'" type="button" value="'+app.vtranslate("Delete")+'" onclick="ParsVTCustomFields_Js.removeFile(this)">',"</div>"].join("");s.append(d)}}}))}}})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Capture_Field.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Capture_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Capture_Field.prefix+"]").each((function(){var e=jQuery(this),a=jQuery(this).val(),t=jQuery(this).parents("td"),r=jQuery(this).parents("table").parents("div").attr("class"),s=jQuery(this).attr("name"),i=(s.toLowerCase(),jQuery(this).parent("td"));jQuery(this).attr("name");if((!r.toLowerCase().includes("relatedblockslists")||s.toLowerCase().includes("relatedblockslists"))&&!t.html().includes("start-camera")){var l="capturecamera_"+Math.floor(1e3*Math.random()+1);i.find("span").remove(),i.find("img").remove(),t.prepend('<div id="'+l+'"><div class="col-md-5" style="display: flex; align-items: center; flex-direction: column; gap: 5px;"><div class="btn btn-primary start-camera" style="width: clamp(200px, 20%, 250px);"><div><i class="fa fa-shu"></i> '+app.vtranslate("Start Camera")+'</div></div><video class="video" width="1024" height="768" autoplay style="border-radius:5px; display:none; width: 320px; height: 240px;"></video><div class="btn btn-primary click-photo" style="display: none; width: clamp(200px, 20%, 250px);"><div><i class="fa fa-camera"></i> '+app.vtranslate("Take Photo")+'</div></div><div class="btn btn-danger click-stop" style="display: none; width: clamp(200px, 20%, 250px);"><div><i class="fa fa-stop"></i> '+app.vtranslate("Stop Camera")+'</div></div></div><div class="col-md-5"  style="display: flex; align-items: center; flex-direction: column; gap: 5px;"><div class="dataurl-container" style="display: none; flex-direction: column; align-items: center;"><canvas class="canvas" width="1024" height="768" style="border-radius:5px;width: 320px; height: 240px;"></canvas><textarea class="dataurl hide" readonly></textarea><div class="action-field" style="margin-top:5px; gap: 5px; display: flex;" ><span class="btn btn-success savephoto" title="'+app.vtranslate("Save")+'"><i class="glyphicon glyphicon-ok-sign"></i></span><span class="btn btn-danger deletephoto" title="'+app.vtranslate("Delete")+'"><i class="glyphicon glyphicon-trash"></i></span></div></div></div><div class="col-md-2"></div></div>');let r=document.querySelector("#"+l+" .start-camera"),s=document.querySelector("#"+l+" .video"),n=document.querySelector("#"+l+" .click-photo"),o=document.querySelector("#"+l+" .click-stop"),u=document.querySelector("#"+l+" .canvas"),p=document.querySelector("#"+l+" .dataurl"),c=document.querySelector("#"+l+" .dataurl-container"),m=document.querySelector("#"+l+" .savephoto"),h=document.querySelector("#"+l+" .deletephoto");if(""!=a&&a.length>0){var d=new Image;d.onload=function(){u.getContext("2d").drawImage(d,0,0,u.width,u.height)},d.src=a,c.style.display="flex",m.disabled=!0,m.setAttribute("disabled","disabled"),h.disabled=!1,h.removeAttribute("disabled")}jQuery("#"+l).find(".deletephoto").on("click",(function(){jQuery("#"+l).find(".dataurl").val(""),e.val("");var a=u.getContext("2d");a.fillStyle="black",a.fillRect(0,0,u.width,u.height),m.disabled=!0,m.setAttribute("disabled","disabled"),h.disabled=!0,h.setAttribute("disabled","disabled")})),r.addEventListener("click",(async function(){let a=null;if(void 0!==navigator.mediaDevices){try{a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});var t=a.getTracks()[0].getSettings()}catch(e){return void app.helper.showErrorNotification({message:e.message})}s.srcObject=a,s.style.display="inline-block",r.style.display="none",n.style.display="inline-block",o.style.display="inline-block",o.addEventListener("click",(async function(){s.srcObject.getTracks().forEach((function(e){e.stop()})),s.style.display="none",r.style.display="inline-block",n.style.display="none",o.style.display="none"})),n.addEventListener("click",(function(){u.width=t.width,u.height=t.height,u.getContext("2d").drawImage(s,0,0,t.width,t.height);let e=u.toDataURL("image/jpeg");p.value=e,c.style.display="flex",h.disabled=!0,h.setAttribute("disabled","disabled"),m.disabled=!1,m.removeAttribute("disabled")})),jQuery("#"+l).find(".savephoto").on("click",(function(){var a=jQuery("#"+l).find(".dataurl").val();if(a.length>10){app.helper.showProgress();var t={module:"ParsVT",action:"ActionAjax",mode:"ajaxUploadPhotoForm"};t.imagedata=a,app.request.post({data:t}).then((function(a,t){null===a&&t.file?(app.helper.hideProgress(),e.val(t.file),m.disabled=!0,m.setAttribute("disabled","disabled"),h.disabled=!1,h.removeAttribute("disabled")):(app.helper.showErrorNotification({message:"Unknown Error"}),app.helper.hideProgress())}))}}))}else app.helper.showErrorNotification({message:"Webcam is not detected or Can not access camera"})})),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),i.append("<div style='clear: both'>")}})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Video_Field.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Video_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Video_Field.prefix+"]").each((function(){var e=jQuery(this),a=jQuery(this).val(),t=jQuery(this).parents("td"),r=jQuery(this).parents("table").parents("div").attr("class"),s=jQuery(this).attr("name"),i=(s.toLowerCase(),jQuery(this).parent("td"));jQuery(this).attr("name");if((!r.toLowerCase().includes("relatedblockslists")||s.toLowerCase().includes("relatedblockslists"))&&!t.html().includes("start-camera")){var l="capturecamera_"+Math.floor(1e3*Math.random()+1);i.find("span").remove(),i.find("img").remove(),t.prepend('<div id="'+l+'"><div class="col-md-5" style="display: flex; align-items: center; flex-direction: column; gap: 5px;"><div class="btn btn-primary start-camera" style="width: clamp(200px, 20%, 250px);"><div><i class="fa fa-shu"></i> '+app.vtranslate("Start Camera")+'</div></div><video class="video" width="1024" height="768" autoplay style="border-radius:5px; display:none; width: 320px; height: 240px;"></video><div class="btn btn-primary start-record" style="display: none; width: clamp(200px, 20%, 250px);"><div><i class="fa fa-video-camera"></i> '+app.vtranslate("Start Recording")+'</div></div><div class="btn btn-warning pause-record" style="display: none; width: clamp(200px, 20%, 250px);"><div><i class="fa fa-video-camera"></i> '+app.vtranslate("Stop Recording")+'</div></div><div class="btn btn-danger stop-record" style="display: none; width: clamp(200px, 20%, 250px);"><div><i class="fa fa-stop"></i> '+app.vtranslate("Stop Camera")+'</div></div></div><div class="col-md-5"  style="display: flex; align-items: center; flex-direction: column; gap: 5px;"><div class="dataurl-container" style="display: none; flex-direction: column; align-items: center;"><video class="videoplayer" width="320" height="240" controls controlslist="nodownload" oncontextmenu="return false;" style="display:none;border-radius:5px;width: 320px; height: 240px;" type="video/webm">\n    Your browser does not support the video tag.<a id="download-video" download="test.webm">Download Video</a>\n</video><textarea class="dataurl hide" readonly></textarea><div class="action-field" style="margin-top:5px; gap: 5px; display: flex;" ><a target="_blank" href="#" class="downloadvideo" disabled="disabled"><span class="btn btn-info" title="'+app.vtranslate("Download")+'"><i class="glyphicon glyphicon-download"></i></span></a><span class="btn btn-success savevideo" title="'+app.vtranslate("Save")+'"><i class="glyphicon glyphicon-ok-sign"></i></span><span class="btn btn-danger deletevideo" title="'+app.vtranslate("Delete")+'"><i class="glyphicon glyphicon-trash"></i></span></div></div></div><div class="col-md-2"></div></div>');let r=null,s=[],d=document.querySelector("#"+l+" .start-camera"),n=document.querySelector("#"+l+" .video"),o=document.querySelector("#"+l+" .start-record"),u=document.querySelector("#"+l+" .pause-record"),p=document.querySelector("#"+l+" .stop-record"),c=document.querySelector("#"+l+" .videoplayer"),m=document.querySelector("#"+l+" .dataurl"),h=document.querySelector("#"+l+" .dataurl-container"),f=document.querySelector("#"+l+" .savevideo"),v=document.querySelector("#"+l+" .deletevideo"),y=document.querySelector("#"+l+" .downloadvideo");""!=a&&a.length>0&&(c.src=a,y.href=a,c.style.display="inline-block",c.setAttribute("controlsList","nodownload"),y.disabled=!1,y.removeAttribute("disabled"),h.style.display="flex",f.disabled=!0,f.setAttribute("disabled","disabled"),v.disabled=!1,v.removeAttribute("disabled")),jQuery("#"+l).find(".deletevideo").on("click",(function(){jQuery("#"+l).find(".dataurl").val(""),e.val(""),c.src="",c.style.display="inline-block",c.setAttribute("controlsList","nodownload"),f.disabled=!0,f.setAttribute("disabled","disabled"),v.disabled=!0,v.setAttribute("disabled","disabled"),y.disabled=!0,y.setAttribute("disabled","disabled")})),d.addEventListener("click",(async function(){let a=null;if(void 0!==navigator.mediaDevices){try{a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})}catch(e){return void app.helper.showErrorNotification({message:e.message})}n.srcObject=a,n.style.display="inline-block",d.style.display="none",o.style.display="inline-block",p.style.display="inline-block",p.addEventListener("click",(async function(){null!==r&&r.stop(),n.style.display="none",d.style.display="inline-block",o.style.display="none",p.style.display="none",u.style.display="none",a.getTracks().forEach((e=>{"live"==e.readyState&&e.stop()}))})),u.addEventListener("click",(function(){r.stop(),o.style.display="inline-block",u.style.display="none"})),o.addEventListener("click",(function(){r=new MediaRecorder(a,{mimeType:"video/webm"}),r.addEventListener("dataavailable",(function(e){s.push(e.data)})),r.addEventListener("stop",(function(){var e=new Blob(s,{type:"video/webm"}),a=new window.FileReader;a.readAsDataURL(e),a.onloadend=function(){base64data=a.result,m.value=base64data,h.style.display="flex",v.disabled=!0,v.setAttribute("disabled","disabled"),f.disabled=!1,f.removeAttribute("disabled")};let t=URL.createObjectURL(e);y.href=t,c.src=y,c.style.display="inline-block",c.setAttribute("controlsList","nodownload"),y.disabled=!1,y.removeAttribute("disabled")})),r.start(1e3),o.style.display="none",u.style.display="inline-block"})),jQuery("#"+l).find(".savevideo").on("click",(function(){var a=jQuery("#"+l).find(".dataurl").val();if(a.length>10){app.helper.showProgress();var t={module:"ParsVT",action:"ActionAjax",mode:"ajaxUploadVideoForm"};t.videodata=a,app.request.post({data:t}).then((function(a,t){null===a&&t.file?(app.helper.hideProgress(),e.val(t.file),f.disabled=!0,f.setAttribute("disabled","disabled"),v.disabled=!1,v.removeAttribute("disabled")):(app.helper.showErrorNotification({message:"Unknown Error"}),app.helper.hideProgress())}))}}))}else app.helper.showErrorNotification({message:"Webcam is not detected or Can not access camera"})})),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),i.append("<div style='clear: both'>")}})),jQuery("input[name^='"+supportedParsVTCustomFields.IBAN_Code.prefix+"'], input[name*='_"+supportedParsVTCustomFields.IBAN_Code.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.IBAN_Code.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.IBAN_Code.prefix+"]").each((function(){jQuery(this).attr("data-rule-IBAN","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).attr("maxlength","26"),jQuery(this).attr("placeholder","IR"),jQuery(this).css("direction","LTR"),jQuery(this).addClass("ParsVTIBAN");var e=jQuery(this).val();if(26===e.length){var a=t.LoadIBAN(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),jQuery("input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Multi_Related_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Multi_Related_Field.prefix+"]").each((function(){t.registerMultiReferenceActions(jQuery(this))})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Password_Field.prefix+"'], textarea[name*='_"+supportedParsVTCustomFields.Password_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Password_Field.prefix+"]").each((function(){var e=jQuery(this).attr("name"),a=jQuery("#"+e+"_display"),r=t.cryptoPwd(jQuery(this),!1);if(a.length<=0){var s='<div class="input-group"><input id="'+e+'_display" data-target="'+e+'" type="password" class="marginLeftZero autoComplete inputElement ui-autocomplete-input ParsVTPWD" value="'+r+'" autocomplete="off"><span data-target="'+e+'" class="input-group-addon generatePassword cursorPointer" title="'+app.vtranslate("Generate Password")+'"><i class="fa fa-refresh"></i></span><span data-target="'+e+'" class="input-group-addon copyPassword cursorPointer" title="'+app.vtranslate("Copy")+'"><i class="fa fa-copy"></i></span></div><div class="strength_meter" id="'+e+'_status">'+app.vtranslate("Strength")+"</div>";jQuery(this).after(s),jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important"),jQuery(a).attr("data-rule-pwd","true"),jQuery(a).attr("data-rule-illegal","true"),jQuery(a).attr("data-password",jQuery(this).attr("id")),""!=r&&t.checkPasswordStrength($("#"+e+"_display")),t.LoadPasswordField(this)}})),jQuery("input[name^='"+supportedParsVTCustomFields.Weather_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Weather_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Weather_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Weather_Field.prefix+"]").each((function(){var e=jQuery(this).parent().html();if(""!=e&&!e.includes("clearWeather")){ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/weather/css/weather-icons.css","parsvtweather");var a=jQuery(this).attr("name"),r=jQuery(this).val();jQuery(this).attr("style","opacity: 0 !important; width: 0 !important; height: 0 !important");var s=Math.floor(1e3*Math.random()+1),i='<div class="referencefield-wrapper" id="weather'+s+'">\n   <div class="input-group">\n      <input id="'+a+'_display" name="'+a+'_display" data-fieldname="'+a+'" data-fieldtype="reference" type="text" class="marginLeftZero autoComplete inputElement ui-autocomplete-input" value="'+r+'" placeholder="'+app.vtranslate("JS_MIN_SEARCH_KEY_LENGTH")+'" autocomplete="off" aria-invalid="false">      <span class="input-group-addon cursorPointer clearWeather hide"><i class="fa fa-times-circle"></i></span>   </div>\n</div><div id="weather'+s+'_forcast"></div>';jQuery(this).after(i),t.registerWeatherAutoComplete("weather"+s,a),""!==r&&(t.displayForcast("weather"+s,r),container.find("span.clearWeather").removeClass("hide"),setTimeout((function(){""!=jQuery("#weather"+s+"_forcast").find("div.weathercity").html()&&jQuery("#"+a+"_display").val(jQuery("#weather"+s+"_forcast").find("div.weathercity").html()),jQuery("#"+a+"_display").attr("disabled","disabled"),jQuery("#"+a+"_display").prop("disbaled",!0),jQuery("#"+a+"_display").attr("readonly",!0)}),2e3)),$(".clearWeather").click((function(e){jQuery(e.currentTarget).addClass("hide"),jQuery("#"+a+"_display").removeAttr("disabled"),jQuery("#"+a+"_display").removeAttr("disabled"),jQuery("#"+a+"_display").prop("readonly",!1),jQuery("#"+a+"_display").attr("readonly",!1),jQuery("#"+a+"_display").val(""),jQuery("input[name='"+a+"']").val(""),jQuery("#weather"+s+"_forcast").html("")}))}})),jQuery("input[name^='"+supportedParsVTCustomFields.Rating_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Rating_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Rating_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Rating_Field.prefix+"]").each((function(){jQuery(this).attr("data-rule-integer","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).attr("readonly","readonly"),t.LoadRateJS(this,!1,e,a,!1,!1)})),jQuery("input[name^='"+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"]").each((function(){jQuery(this).attr("data-rule-integer","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).attr("readonly","readonly"),t.LoadRateJS(this,!1,e,a,!0,!1)})),jQuery("input[name^='"+supportedParsVTCustomFields.Credit_Card_Number.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Credit_Card_Number.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Credit_Card_Number.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Credit_Card_Number.prefix+"]").each((function(){jQuery(this).attr("data-rule-CCN","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).attr("maxlength","19"),jQuery(this).css("direction","LTR"),jQuery(this).addClass("ParsVTCCN");var e=jQuery(this).val();if(19===e.length){var a=t.LoadCCN(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),jQuery("input[name^='"+supportedParsVTCustomFields.Gdate_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Gdate_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Gdate_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Gdate_Field.prefix+"]").each((function(){jQuery(this).attr("data-rule-ParsVTDate","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).attr("readonly","readonly"),t.LoadDatePicker(this,e,a)})),jQuery("input[name^='"+supportedParsVTCustomFields.Iran_Mobile.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Iran_Mobile.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Iran_Mobile.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Iran_Mobile.prefix+"]").each((function(){jQuery(this).attr("maxlength","14"),jQuery(this).attr("data-rule-iranianmobile","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='"+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"]").each((function(){jQuery(this).attr("maxlength","39"),jQuery(this).attr("data-rule-ip2location","true"),jQuery(this).attr("data-rule-illegal","false")})),jQuery("textarea[name^='"+supportedParsVTCustomFields.Grid_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Grid_Field.prefix+"_'], textarea[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Grid_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Grid_Field.prefix+"]").each((function(){ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/jsgrid/jsgrid-theme.min.css","jsgrid");var e=jQuery(this).closest("div.grid-div-parent"),a=jQuery("body").data("language").substring(0,2);ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/jsgrid/jsgrid.min.js",(function(){ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/jsgrid/i18n/"+a+".js",(function(){"en"!=a&&jsGrid.locale(a),t.registerJSGridTableFields(e)}))}))})),jQuery("input[name^='"+supportedParsVTCustomFields.Color_Picker_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Color_Picker_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Color_Picker_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Color_Picker_Field.prefix+"]").each((function(){t.LoadColorPicker(this,e,a,"Edit")})),jQuery("input[name^='"+supportedParsVTCustomFields.National_ID.prefix+"'], input[name*='_"+supportedParsVTCustomFields.National_ID.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.National_ID.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.National_ID.prefix+"]").each((function(){jQuery(this).attr("maxlength","10"),jQuery(this).attr("data-rule-nationalcode","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).addClass("ParsVTNATIONALCODE");var e=jQuery(this).val();if(10===e.length){var a=t.LoadBDCITY(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),jQuery("input[name^='"+supportedParsVTCustomFields.National_CODE.prefix+"'], input[name*='_"+supportedParsVTCustomFields.National_CODE.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.National_CODE.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.National_CODE.prefix+"]").each((function(){jQuery(this).attr("maxlength","11"),jQuery(this).attr("data-rule-legalnationalcode","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='"+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"'], input[name*='_"+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"]").each((function(){jQuery(this).attr("maxlength","10"),jQuery(this).attr("data-rule-irpostalcode","true"),jQuery(this).attr("data-rule-illegal","true"),jQuery(this).addClass("IRAN_POSTAL_CODE")})),jQuery("input[name^='"+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"'], input[name*='_"+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"]").each((function(){jQuery(this).attr("maxlength","12"),jQuery(this).attr("data-rule-taxfilenumber","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='"+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"'], input[name*='_"+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"]").each((function(){jQuery(this).attr("maxlength","12"),jQuery(this).attr("data-rule-iranvatid","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='siccode']").each((function(){jQuery(this).attr("maxlength","12"),jQuery(this).attr("data-rule-iranvatid","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='parsvt_vatid']").each((function(){jQuery(this).attr("maxlength","12"),jQuery(this).attr("data-rule-iranvatid","true"),jQuery(this).attr("data-rule-illegal","true")})),jQuery("input[name^='"+supportedParsVTCustomFields.Barcode_Field.prefix+"'], input[name*='_"+supportedParsVTCustomFields.Barcode_Field.prefix+"_'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Barcode_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Barcode_Field.prefix+"]").each((function(){jQuery(this).attr("data-rule-barcode","true"),jQuery(this).attr("data-rule-illegal","true")}));else if("Detail"==r||e&&"Detail"==a){var s=new RegExp("^[^A-Za-z--------]*[---]");jQuery.each(jQuery(".fieldValue span.value"),(function(e,a){var t=jQuery(this),r=t.text().trim();s.test(r)||t.css({direction:"ltr"})})),jQuery("[id*='fieldValue_parsvt_pdflink'], [class*='parsvt_pdflink']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("href")){var a=$("<div/>").html(e).text();jQuery(this).html("<div style='direction: ltr; text-align: left'><a href='"+a.replace(/\s/g,"")+"' target='_blank'>"+a+"</a></div>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove()})),jQuery("a[class*='urlField']").each((function(){var e=jQuery(this).attr("href");""!=e&&(e.includes("http://modules/ParsVT/ws/API/V2/Tools/Retrieve")||e.includes("https://modules/ParsVT/ws/API/V2/Tools/Retrieve"))&&(e=(e=e.replace("http://","")).replace("https://",""),jQuery(this).attr("href",e))})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Coordinate.prefix+"'], [class*='"+supportedParsVTCustomFields.Coordinate.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();jQuery(this).next("span").remove();var a=$("<div/>").html(e).text().replace(/\s/g,"");if(""!=e&&-1===e.indexOf("input-group")){a=$("<div/>").html(e).text().replace(/\s/g,"");var r="gps"+Math.floor(1e3*Math.random()+1);if(""!=a){var s="",i=t.getMobileOperatingSystem();"Android"!=i&&"iOS"!=i&&"Windows"!=i||(s="<li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('"+i+"', '"+a+'\', \'value\')">Open App</a></li><li role="separator" class="divider"></li>');var l='<div class="input-group"><div class="dropdown"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="fa fa-eye" title="'+app.vtranslate("JS_VIEW_RECORD")+'"></span&nbsp; <span class="caret"></span></button>'+a+'<ul class="dropdown-menu"  style="position: relative;z-index:9999"><li><a onclick="ParsVTCustomFields_Js.OpenGpsWindow(\'parsvt\', \''+a+'\', \'value\')">View Map</a></li><li role="separator" class="divider"></li>'+s+"<li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('google', '"+a+"', 'value')\">Google Map</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('osm', '"+a+"', 'value')\">OpenStreetMap</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('waze', '"+a+"', 'value')\">Waze</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('yandex', '"+a+"', 'value')\">Yandex</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('parsijoo', '"+a+"', 'value')\">ParsiJoo</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('map.ir', '"+a+"', 'value')\">Map.IR</a></li><li role=\"separator\" class=\"divider\"></li><li><a onclick=\"ParsVTCustomFields_Js.OpenGpsWindow('apple', '"+a+"', 'value')\">Apple</a></li></ul></div></div><br /><div id=\""+r+'_locationname" style="clear: both"></div>';jQuery(this).html(l),t.searchCoordinates(a,r,!1)}}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Upload_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Upload_Field.prefix+"']").each((function(){if(jQuery(this).hasClass("value")){var e=jQuery(this);jQuery(this).attr("title","")}else e=jQuery(this).find("span.value");if(0!=e.length){for(var a=e.html().trim(),r=e.next("span"),s=t.validURL(a);r.length>0;)r.remove(),r=e.next("span");if(""!=a&&(-1!==a.indexOf("$$")||s)&&!jQuery(this).find("a").length){var i=a.split("$$");if(i.length>0)if(void 0!==i[2]&&-1!==i[2].indexOf("image")||s&&t.checkURL(value)){var l=i[0].replace(/\s+/g," ").trim();jQuery(this).html("<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+l+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download><img style="max-width:150px;max-height:150px;" src="'+l+'" /></a> <br> <a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+l+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download> <i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+l+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i></a>')}else if(void 0!==i[2]&&(i[2].indexOf("video/mp4")>-1||i[2].indexOf("video/ogg")>-1||i[2].indexOf("video/webm")>-1)){var d=i[0].replace(/\s+/g," ").trim(),n=i[2].replace(/\s+/g," ").trim();jQuery(this).html('<video width="235" height="125" controls><source src="'+d+'" type="'+n+'"><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+d+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download>Your browser does not support the video tag.<a/></video><br /><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+d+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a>  <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+d+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i></a>')}else if(void 0!==i[2]&&(i[2].indexOf("audio/mpeg")>-1||i[2].indexOf("audio/ogg")>-1||i[2].indexOf("audio/wav")>-1||i[2].indexOf("audio/mp3")>-1)){var o=i[0].replace(/\s+/g," ").trim(),u=(n=i[2].replace(/\s+/g," ").trim(),(p=(p=(c=i[0].replace(/\s+/g," ").trim()).split("/"))[p.length-1]).indexOf("_")),p=p.substr(u+1);jQuery(this).html('<audio controls><source src="'+o+'" type="'+n+'"><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+o+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download>Your browser does not support the video tag.<a/></audio><br /><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+c+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+o+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i> '+p+"</a><br>")}else{u=(p=(p=(c=i[0].replace(/\s+/g," ").trim()).split("/"))[p.length-1]).indexOf("_"),p=p.substr(u+1);var c,m="";m="D"==ParsVTCustomFields_Js.getPreviewType(c,i[2])?"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+c+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><br />'+p+"</a><br>":"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+c+"','"+i[1]+"','"+i[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+c+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><br />'+p+"</a><br>",jQuery(this).html(m)}}}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Upload_Fields.prefix+"'], [class*='"+supportedParsVTCustomFields.Upload_Fields.prefix+"']").each((function(){if(jQuery(this).hasClass("value")){var e=jQuery(this);jQuery(this).attr("title","")}else e=jQuery(this).find("span.value");if(0!=e.length){for(var a=e.html().trim(),r=e.next("span"),s=t.validURL(a);r.length>0;)r.remove(),r=e.next("span");var i=new Array;if(""!=a&&(-1!==a.indexOf("$$")||-1!==a.indexOf("||")||s)&&!jQuery(this).find("a").length){var l=(a=(a=a.replace(/^\s+/g,"")).replace(/\s+$/g,"")).split("||");l.length>0&&$.each(l,(function(e,a){if(0!=a.length){var r=a.split("$$");if(s=t.validURL(a),r.length>0)if(void 0!==r[2]&&r[2].indexOf("image")>-1||s&&t.checkURL(a)){var l=r[0].replace(/\s+/g," ").trim(),d=['<div class="col-lg-1" style="width: 150px; height: 150px; max-width:150px;max-height:150px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;">',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+l+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><img style="max-width:120px;max-height:150px;" src="'+l+'" /></a><br> <a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+l+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download> <i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+l+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i></a>',"</div>"].join("");i.push(d)}else if(void 0!==r[2]&&(r[2].indexOf("video/mp4")>-1||r[2].indexOf("video/ogg")>-1||r[2].indexOf("video/webm")>-1)){var n=r[0].replace(/\s+/g," ").trim();d=['<div class="col-lg-1" style="width: 270px; height: 150px; max-width:270px;max-height:150px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;">','<video width="235" height="125" controls><source src="'+n+'" type="'+(u=r[2].replace(/\s+/g," ").trim())+'"><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+n+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download>Your browser does not support the video tag.<a/></video>',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+n+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+n+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i></a>',"</div>"].join("");i.push(d)}else if(void 0!==r[2]&&(r[2].indexOf("audio/mpeg")>-1||r[2].indexOf("audio/ogg")>-1||r[2].indexOf("audio/wav")>-1||r[2].indexOf("audio/mp3")>-1)){var o=r[0].replace(/\s+/g," ").trim(),u=r[2].replace(/\s+/g," ").trim(),p=(e=(p=(p=(c=r[0].replace(/\s+/g," ").trim()).split("/"))[p.length-1]).indexOf("_"),p.substr(e+1));d=['<div class="col-lg-1" style="width: 330px; height: 150px; max-width:330px;max-height:150px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;">','<br /><audio controls><source src="'+o+'" type="'+u+'"><a onclick="ParsVTCustomFields_Js.previewFile(\''+encodeURIComponent(a)+"','"+o+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download>Your browser does not support the audio element.<a/></audio>',"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+o+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+o+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 5px;"></i> '+p+"</a><br>","</div>"].join("");i.push(d)}else{var c;e=(p=(p=(c=r[0].replace(/\s+/g," ").trim()).split("/"))[p.length-1]).indexOf("_"),p=p.substr(e+1),d=['<div class="col-lg-1" style="width: 150px; height: 150px; max-width:150px;max-height:150px;background-color: #f3f3f3; border: 1px solid #dcdcdc;text-align: center;padding-top: 20px;">',"D"==ParsVTCustomFields_Js.getPreviewType(c,r[2])?"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+c+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><br />'+p+"</a><br>":"<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+c+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-eye"  style="margin: 0 3px;"></i></a> <a onclick="window.open(\'index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+c+'\', \'_blank\')"  href="javascript:void(0);" download style="overflow-wrap: break-word;"><i class="fa fa-download"  style="margin: 0 3px;"></i><br />'+p+"</a><br>","</div>"].join("");i.push(d)}}})),jQuery(this).html(i.join(""))}}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Password_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Password_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("showpassword")){var a=$("<div/>").html(e).text().replace(/\s/g,""),t="pwd"+Math.floor(1e3*Math.random()+1);""!=a&&jQuery(this).html('<a class="btn btn-warning showpassword" hreft="#" data-target="'+t+'" style="max-width: 200px">'+app.vtranslate("Copy to Clipboard")+'</a><input style="display: none" type="hidden" value="'+a+'" id="'+t+'">')}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.RTF_Description_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.RTF_Description_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&-1==e.indexOf("hidecontents")){var a=$("<div/>").html(e).text();jQuery(this).html(a+"<div class='hide hidecontents'></div>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Telegram_ID.prefix+"'], [class*='"+supportedParsVTCustomFields.Telegram_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("tg://resolve")){var a=$("<div/>").html(e).text();jQuery(this).html("<a href='tg://resolve?domain="+a.replace(/\s/g,"")+"'>"+a+"</a>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Color_Picker_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Color_Picker_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=!1;if(jQuery(this).hasClass("value")){var s=jQuery(this);jQuery(this).attr("title",""),r=!0}else s=jQuery(this).find("span.value");if(0!=s.length){for(var i=s.html().trim(),l=s.next("span");l.length>0;)l.remove(),l=s.next("span");if(""!=i&&-1===i.indexOf("input")){var d=$("<div/>").html(i).text();if(r)jQuery(this).html('<input type="color" value="'+d.replace(/\s/g,"")+'" readonly disabled>');else{var n="color"+Math.floor(1e3*Math.random()+1);jQuery(this).html('<input id="'+n+'" type="text" value="'+d.replace(/\s/g,"")+'">');var o=jQuery("#"+n);t.LoadColorPicker(o,e,a,"Details")}}jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Whatsapp_ID.prefix+"'], [class*='"+supportedParsVTCustomFields.Whatsapp_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html(),a=$("<div/>").html(e).text();""!=e&&""!=a.replace(/\s/g,"")&&(jQuery(this).html("<a onclick='ParsVTCustomFields_Js.opentWhatsapp(\""+a.replace(/\s/g,"")+"\")' href='#'>"+a+"</a>"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Instagram.prefix+"'], [class*='"+supportedParsVTCustomFields.Instagram.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("instagram_feed")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");jQuery(this).html('<a href="https://instagram.com/'+i.replace(/\s/g,"")+'" style="text-align:center;display: block;">'+i+'</a><div id="'+s+'instagram" class="instagram_feed"></div>'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadInstagramFeed(jQuery("#"+s),e,a,s+"instagram",i)}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Weather_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Weather_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("parsweatherwidget")){var a=$("<div/>").html(e).text().replace(/\s/g,"");if(""!=a){ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/weather/css/weather-icons.css","parsvtweather");var r="weather"+Math.floor(1e3*Math.random()+1),s='<div class="parsweatherwidget">\n    <div class="row">\n        <div class="col-sm-12 weathercity" id="'+r+'_locationname"></div>\n        <div class="col-sm-12 weatherheading"  id="'+r+'_weatherstatus"></div>\n        <div class="col-sm-6 parsweatherwidgeticon"><i class="wi " id="'+r+'_weathericon"></i></div>\n        <div class="col-sm-6">\n            <div class="col-sm-12 weathertemp" id="'+r+'_weathertemp"></div>\n            <div class="col-sm-12 weatherstatus" id="'+r+'_weatherwindSpeed"></div>\n            <div class="col-sm-12 weatherstatus" id="'+r+'_humidity"></div>\n            <div class="col-sm-12 weatherstatus" id="'+r+'_time"></div>\n        </div>\n    </div>\n</div>';jQuery(this).html(s),t.searchCoordinates(a,r,!0),t.forecastWeather(a,r)}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Twitter.prefix+"'], [class*='"+supportedParsVTCustomFields.Twitter.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("twitter_feed")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");""!=i&&i.includes("#")?jQuery(this).html('<a href="https://twitter.com/hashtag/'+i.replace("#","")+'" style="text-align:center;display: block;">'+i+'</a><ul id="'+s+'twitter" class="twitter_feed"></ul>'):""!=i&&jQuery(this).html('<a href="https://twitter.com/'+i.replace(/\s/g,"")+'" style="text-align:center;display: block;">'+i+'</a><ul id="'+s+'twitter" class="twitter_feed"></ul>'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadTwitterFeed(jQuery("#"+s),e,a,"#"+s+"twitter",i)}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Iran_Mobile.prefix+"'], [class*='"+supportedParsVTCustomFields.Iran_Mobile.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).html();jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Capture_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Capture_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text().replace(/\s+/g," ").trim();""==a||e.includes("img")||(jQuery(this).html('<a href="index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+encodeURIComponent(a)+'" download target="_blank"><img style="max-width:150px;max-height:150px;border-radius: 5px" src="'+a+'" /></a>'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Video_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Video_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text().replace(/\s+/g," ").trim();""==a||e.includes("download")||(jQuery(this).html('<a target="_blank"  href="'+a+'"><span class="btn btn-info" title="'+app.vtranslate("Download")+'"><i class="glyphicon glyphicon-download"></i></span></a>&nbsp;<a onClick="javascript:ParsVTCustomFields_Js.PlayVideo(\''+a+'\');" href="#"><span class="btn btn-success" title="'+app.vtranslate("Play")+'"><i class="glyphicon glyphicon-play-circle"></i></span></a>'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.IP2LOCATION_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text().replace(/\s+/g," ").trim();""==a||e.includes("getIPInfo")||(jQuery(this).html("<a onClick=\"javascript:ParsVTCustomFields_Js.getIPInfo('"+a+'\');" data-html="true" data-toggle="tooltip" title="'+a+'"><i className="fa fa-map-marker icon" aria-hidden="true"></i>'+a+"</a>"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove())}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Validated_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Validated_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Cities_field.prefix+"'], [class*='"+supportedParsVTCustomFields.Cities_field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e);jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Countries_field.prefix+"'], [class*='"+supportedParsVTCustomFields.Countries_field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e);jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Multicurrency_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Multicurrency_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e);jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.QR_Code.prefix+"'], [class*='"+supportedParsVTCustomFields.QR_Code.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("chart.apis.google.com")&&!e.includes("api.qrserver.com")){var a=$("<div/>").html(e).text().trim();jQuery(this).next("span").remove();var t=encodeURIComponent(a),r=150;a.length>400?r=400:a.length>200?r=300:a.length>100&&(r=200),""!=t&&jQuery(this).html("<span style='white-space: normal; vertical-align: middle; display: inline-block;'><img src='https://api.qrserver.com/v1/create-qr-code/?size="+r+"x"+r+"&data="+t+"'></span><span style='width: 49%; white-space: normal; vertical-align: middle; display: inline-block;'>"+e+"</span>"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Credit_Card_Number.prefix+"'], [class*='"+supportedParsVTCustomFields.Credit_Card_Number.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("text-info")){var a=$("<div/>").html(e).text();if(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),19===a.length){var r=t.LoadCCN(a);jQuery(this).html(a+"<div class='text-info'>"+r+"</div>")}else jQuery(this).html(a)}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.IBAN_Code.prefix+"'], [class*='"+supportedParsVTCustomFields.IBAN_Code.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("text-info")){var a=$("<div/>").html(e).text();if(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""),jQuery(this).next("span").remove(),26===a.length){var r=t.LoadIBAN(a);jQuery(this).html(a+"<div class='text-info'>"+r+"</div>")}else jQuery(this).html(a);jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.National_ID.prefix+"'], [class*='"+supportedParsVTCustomFields.National_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();a=(a=a.replace(/\n/g,"")).replace(/\s/g,"");jQuery(this).val();if(10===a.length){var r=t.LoadBDCITY(a);jQuery(this).html(a+"<div class='text-info'>"+r+"</div>"),jQuery(this).next("div").remove()}jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.National_CODE.prefix+"'], [id*='fieldValue_parsvt_nationalid'],  [class*='"+supportedParsVTCustomFields.National_CODE.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text(),t=unescape("%uD83C%uDF10");a.includes(t)||(""!=(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""))&&jQuery(this).html("<a onClick=\"ParsVTCustomFields_Js.openSsaa('"+a+'\'); return false;" href="#">'+t+" "+a+"</a>"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"'], [class*='"+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html(),a=$(this).attr("id");if(""!=e&&!e.includes("text-info")){var t=$("<div/>").html(e).text();if(t=(t=t.replace(/\n/g,"")).replace(/\s/g,""),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),10===t.length){var r={module:"ParsVT",action:"ACF",mode:"GetPostalCodeCity"};r.postalcode=t,"undefined"==typeof csrfMagicToken&&(r.tokenname=csrfMagicName),"undefined"==typeof csrfMagicToken&&(r.tokenval=csrfMagicToken),$.post("index.php",r,(function(e){e.success&&e.result&&jQuery("#"+a).html(t+"<div class='text-info'>"+e.result+"</div>")}))}else jQuery("#"+a).html(t);jQuery("#"+a).next("span").remove(),jQuery("#"+a).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"'], [class*='"+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"'], [id*='fieldValue_parsvt_vatid'], [class*='"+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=unescape("%uD83C%uDF10"),t=$("<div/>").html(e).text();""==(t=(t=t.replace(/\n/g,"")).replace(/\s/g,""))||e.includes("txtNatIDNO")||jQuery(this).html('<a class="txtNatIDNO" onClick="ParsVTCustomFields_Js.openEVAT(\''+t+'\'); return false;" href="#">'+a+" "+t+"</a>"),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Rating_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Rating_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("inputElement")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");jQuery(this).html('<input id="'+s+'" type="text" class="inputElement hide" value="'+i+'">'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadRateJS(jQuery("#"+s),!0,e,a,!1,!1)}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("inputElement")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");jQuery(this).html('<input id="'+s+'" type="text" class="inputElement hide" value="'+i+'">'),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadRateJS(jQuery("#"+s),!0,e,a,!0,!1)}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Gdate_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Gdate_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Date_Time_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Date_Time_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();jQuery(this).html(a),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Barcode_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Barcode_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Iran_Mobile.prefix+"'], [class*='"+supportedParsVTCustomFields.Iran_Mobile.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Plaque_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Plaque_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.MPlaque_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.MPlaque_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.DigitalSignature_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.DigitalSignature_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.UsersList.prefix+"'], [class*='"+supportedParsVTCustomFields.UsersList.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).find("span").not(".value").remove(),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Repeater_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Repeater_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("repeaterField")){var s=$("<div/>").html(r).text();t.LoadRepeater(this,e,a,"Details",s),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("repeaterField")){var s=$("<div/>").html(r).text();t.LoadVoiceRecorder(this,e,a,"Details",s),jQuery(this).find("span.edit").remove(),jQuery(this).find("span.action").remove(),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery("[id*='fieldValue_"+supportedParsVTCustomFields.Grid_Field.prefix+"'], [class*='"+supportedParsVTCustomFields.Grid_Field.prefix+"']").each((function(){jQuery(this).parent().find("span.hide").remove(),jQuery(this).parent().find("span.action").remove(),jQuery(this).find("span.value").removeClass("value")}))}else"List"==r&&(jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.DigitalSignature_Field.prefix+"'], .listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Iran_Mobile.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Futronic_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Signotec_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Encrypted_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Repeater_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).attr("title").trim();if(jQuery(this).attr("title",""),""!=r&&!r.includes("repeaterField")){var s=$("<div/>").html(r).text();t.LoadRepeater(this,e,a,"Details",s),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Voice_Recorder_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).attr("title").trim();if(jQuery(this).attr("title",""),""!=r&&!r.includes("repeaterField")){var s=$("<div/>").html(r).text();t.LoadVoiceRecorder(this,e,a,"List",s),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Telegram_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""))||e.includes("tg://resolve")||jQuery(this).html("<span class='fieldValue'><span class='value'><a href='tg://resolve?domain="+a.replace(/\s/g,"")+"'>"+a+"</a></span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Weather_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==(a=a.replace(/\s/g,""))||e.includes("Coordinate")||jQuery(this).html("<span class='Coordinate'>"+a+"</span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Whatsapp_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""))||e.includes("whatsapp")||(jQuery(window).width()>1024?jQuery(this).html("<span class='fieldValue'><span class='value'><a target= '_blank' href='https://web.whatsapp.com/send?phone="+a.replace(/\s/g,"")+"'>"+a+"</a></span></span>"):jQuery(this).html("<span class='fieldValue'><span class='value'><a href='whatsapp://send?phone="+a.replace(/\s/g,"")+"'>"+a+"</a></span></span>")),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Twitter.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Instagram.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Password_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""))||e.includes("Password_Field")||jQuery(this).html("<span class='fieldValue Password_Field'><span class='value'>*****</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Cities_field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Cities_field")||jQuery(this).html("<span class='fieldValue Cities_field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Countries_field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Countries_field")||jQuery(this).html("<span class='fieldValue Countries_field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.RTF_Description_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).find("span.value");if(0!=e.length){var a=jQuery(this).attr("title"),t=e.html().trim();""!=a&&-1==t.indexOf("hidecontents")&&(jQuery(this).html("<span class='fieldValue RTF_Description_Field'><span class='value'>"+a+"<div class='hide hidecontents'></div></span></span>"),jQuery(this).attr("title",e.html().trim()),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Capture_Field.prefix+"']").each((function(){var e=jQuery(this).find("span.value");if(0!=e.length){for(var a=jQuery(this).attr("title").trim(),t=e.parent().next("span");t.length>0;)t.remove(),t=e.next("span");if(""!=a&&!jQuery(this).find("img").length)(a=a.replace(/\s+/g," ").trim()).length>0&&jQuery(this).html('<a href="index.php?module=ParsVT&action=ActionAjax&mode=downloadFile&file='+encodeURIComponent(a)+'" download target="_blank"><img style="max-width:150px;max-height:150px;border-radius: 5px" src="'+a+'" /></a>');jQuery(this).attr("title",""),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Video_Field.prefix+"']").each((function(){var e=jQuery(this).find("span.value");if(0!=e.length){for(var a=jQuery(this).attr("title").trim(),t=e.parent().next("span");t.length>0;)t.remove(),t=e.next("span");if(""!=a&&!jQuery(this).find("img").length)(a=a.replace(/\s+/g," ").trim()).length>0&&jQuery(this).html('<a target="_blank" href="'+a+'"><span class="btn btn-info" title="'+app.vtranslate("Download")+'"><i class="glyphicon glyphicon-download"></i></span></a>');jQuery(this).attr("title",""),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Upload_Field.prefix+"']").each((function(){var e=jQuery(this).find("span.value");if(0!=e.length){for(var a=jQuery(this).attr("title").trim(),t=e.parent().next("span");t.length>0;)t.remove(),t=e.next("span");if(""!=a&&-1!==a.indexOf("$$")&&!jQuery(this).find("a").length){var r=a.split("$$");if(r.length>0)if(void 0!==r[2]&&-1!==r[2].indexOf("image")){var s=r[0].replace(/\s+/g," ").trim();jQuery(this).html("<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+s+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><img style="max-width:150px;max-height:150px;" src="'+s+'" /></a>')}else{var i=r[0].replace(/\s+/g," ").trim(),l=(d=(d=i.split("/"))[d.length-1]).indexOf("_"),d=d.substr(l+1);jQuery(this).html("<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(a)+"','"+i+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><i class="fa fa-download" style="margin: 0 3px;"></i>'+d+"</a>")}}jQuery(this).attr("title",""),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Upload_Fields.prefix+"']").each((function(){var e=jQuery(this).find("span.value");if(0!=e.length){for(var a=jQuery(this).attr("title").trim(),t=e.parent().next("span");t.length>0;)t.remove(),t=e.next("span");if(""!=a&&-1!==a.indexOf("$$")&&!jQuery(this).find("a").length){var r=a.split("||"),s=!1;r.length>0&&$.each(r,(function(a,t){if(0!=t.length){if(s)return!1;var r=t.split("$$");if(r.length>0)if(s=!0,void 0!==r[2]&&r[2].indexOf("image")>-1){var i=r[0].replace(/\s+/g," ").trim();jQuery(e).html("<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(r[0])+"','"+i+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><img style="max-width:150px;max-height:150px;" src="'+i+'" /></a>')}else{var l=r[0].replace(/\s+/g," ").trim(),d=(a=(d=(d=l.split("/"))[d.length-1]).indexOf("_"),a=(d=d.substr(a+1)).indexOf("_"),d.substr(a+1));jQuery(e).html("<a onclick=\"ParsVTCustomFields_Js.previewFile('"+encodeURIComponent(r[0])+"','"+l+"','"+r[1]+"','"+r[2]+'\')"  href="javascript:void(0);" download><i class="fa fa-download" style="margin: 0 3px;"></i>'+d+"</a>")}}}))}jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),jQuery(this).attr("title","")}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.QR_Code.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e&&!e.includes("http://chart.apis.google.com")){var a=$("<div/>").html(e).text(),t=(a=a.replace(/\n/g,"")).replace(/\n/g,"");t=t.replace(/\s/g,""),jQuery(this).next("span").remove();var r=encodeURI(a);""!=t&&jQuery(this).html("<span class='fieldValue QR_Code'><span class='value' style='white-space: normal; vertical-align: middle; display: inline-block;'><img src='http://chart.apis.google.com/chart?cht=qr&chld=L|4&chs=150x150&chl="+r+"'></span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Barcode_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Barcode_Field")||jQuery(this).html("<span class='fieldValue Barcode_Field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Date_Time_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Date_Time_Field")||jQuery(this).html("<span class='fieldValue Date_Time_Field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Rating_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("inputElement")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");jQuery(this).html('<span class="fieldValue"><span class="value"><input id="'+s+'" type="text" class="inputElement hide" value="'+i+'"></span></span>'),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadRateJS(jQuery("#"+s),!0,e,a,!1,!1)}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Emotion_Rating_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var r=jQuery(this).html();if(""!=r&&!r.includes("inputElement")){var s="rate"+Math.floor(1e3*Math.random()+1),i=$("<div/>").html(r).text().replace(/\s/g,"");jQuery(this).html('<span class="fieldValue"><span class="value"><input id="'+s+'" type="text" class="inputElement hide" value="'+i+'"></span></span>'),jQuery(this).next("span").remove(),jQuery(this).next("span").remove(),t.LoadRateJS(jQuery("#"+s),!0,e,a,!0,!0)}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.National_CODE.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("National_CODE")||jQuery(this).html("<span class='fieldValue National_CODE'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.UsersList.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).next("span").remove(),jQuery(this).next("span").remove())})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.National_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("National_ID")||jQuery(this).html("<span class='fieldValue National_ID'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.IRAN_VAT_ID.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("IRAN_VAT_ID")||jQuery(this).html("<span class='fieldValue IRAN_VAT_ID'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.TAX_FILE_NUMBER.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("TAX_FILE_NUMBER")||jQuery(this).html("<span class='fieldValue TAX_FILE_NUMBER'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.IBAN_Code.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("IBAN_Code")||jQuery(this).html("<span class='fieldValue IBAN_Code'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Multi_Related_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Credit_Card_Number.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Credit_Card_Number")||jQuery(this).html("<span class='fieldValue Credit_Card_Number'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Gdate_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Gdate_Field")||jQuery(this).html("<span class='fieldValue Gdate_Field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.IRAN_POSTAL_CODE.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("IRAN_POSTAL_CODE")||jQuery(this).html("<span class='fieldValue IRAN_POSTAL_CODE'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Color_Picker_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==a||e.includes("Color_Picker_Field")||jQuery(this).html("<span class='fieldValue Color_Picker_Field'><span class='value'>"+a+"</span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Coordinate.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%");var e=jQuery(this).html();if(""!=e){var a=$("<div/>").html(e).text();""==(a=(a=a.replace(/\n/g,"")).replace(/\s/g,""))||e.includes("Coordinate")||jQuery(this).html("<span class='fieldValue Coordinate'><span class='value'><a  onclick='ParsVTCustomFields_Js.OpenGpsWindow(\"google\", \""+a+'", "value")\'>'+a+"</a></span></span>"),jQuery(this).next("span").remove(),jQuery(this).next("span").remove()}})),jQuery(".listViewEntryValue[data-name*='"+supportedParsVTCustomFields.Multicurrency_Field.prefix+"']").each((function(){jQuery(this).closest("td").prev().css("width","8%"),""!=jQuery(this).attr("title")&&(jQuery(this).attr("title",""),jQuery(this).find("span.edit").remove())})),jQuery("#listViewContent table thead tr.searchRow th  div input.Citiesfield[data-field-type=citiesfield]").each((function(){jQuery(this).closest("th").find("input.operatorValue").val("c");var e=$(this).attr("id");t.registerCitiesListAutoComplete(e)})),jQuery("#listViewContent table thead tr.searchRow th  div input[data-field-type=countries]").each((function(){jQuery(this).closest("th").find("input.operatorValue").val("c")})),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/serialtip/jquery.serialtip.css","parsvtdatepicker"),jQuery("#listViewContent table thead tr.searchRow th  div input.listSearchContributor[data-field-type=double]:not(.parsrangeslider), #listViewContent table thead tr.searchRow th  div input.listSearchContributor[data-field-type=integer]:not(.parsrangeslider), #listViewContent table thead tr.searchRow th  div input.listSearchContributor[data-field-type=currency]:not(.parsrangeslider), #listViewContent table thead tr.searchRow th  div input.listSearchContributor[data-field-type=percentage]:not(.parsrangeslider)").each((function(){jQuery(this).addClass("parsrangeslider"),jQuery(this).attr("autocomplete","off")})),"function"!=typeof serialtip&&ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/serialtip/jquery.serialtip.js",(function(){$(document).find("#serialtip").length>0&&$(document).find("#serialtip").remove(),$(".parsrangeslider").serialtip($(this))})));$(document).trigger("ParsVTFieldDisplayed")},getQueryParams:function(e){if(void 0!==e){e=e.toString().split("+").join(" ");for(var a,t={},r=/[?&]?([^=]+)=([^&]*)/g;a=r.exec(e);)t[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return t}},registerKeys:function(e,a){var t=app.getViewName(),r=this;"Edit"==t||e&&"Edit"==a?($(".IRAN_POSTAL_CODE").keyup((function(){var e=$(this).val(),a=$(this).attr("id");if(10===e.length){var t={module:"ParsVT",action:"ACF",mode:"GetPostalCodeCity"};t.postalcode=e,"undefined"==typeof csrfMagicToken&&(t.tokenname=csrfMagicName),"undefined"==typeof csrfMagicToken&&(t.tokenval=csrfMagicToken),$.post("index.php",t,(function(e){e.success&&e.result?(jQuery("#"+a).next("div").remove(),jQuery("#"+a).after("<div class='text-info'>"+e.result+"</div>")):jQuery("#"+a).next("div").remove()}))}else jQuery("#"+a).next("div").remove()})),$(document).on("click",".getNewPass",(function(){var e=$(this).closest("div").find('input[rel="gp"]');e.val(r.randPassword(e))})),$(".copyPassword").unbind().click((function(){var e=jQuery(this).data("target");r.ShowPasswordField(jQuery('textarea[name="'+e+'"]'))})),$(".generatePassword").unbind().click((function(){var e=jQuery(this).data("target");r.ShowRandomPassword(jQuery('textarea[name="'+e+'"]'))})),$(".ParsVTPWD").keyup((function(e){r.checkPasswordStrength($(this));var a=$(this).data("target");jQuery('textarea[name="'+a+'"]').val(r.cryptoPwd($(this),!0))})),$(".ParsVTNATIONALCODE").keyup((function(){var e=$(this).val();if(10===e.length){var a=r.LoadBDCITY(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),$(".ParsVTCCN").keyup((function(){var e=$(this).val().split("-").join("");if(e.length>0&&(e=e.match(new RegExp(".{1,4}","g")).join("-")),$(this).val(e),19===e.length){var a=r.LoadCCN(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),$(".ParsVTIBAN").keyup((function(){var e=$(this).val();if(26===e.length){var a=r.LoadIBAN(e);jQuery(this).next("div").remove(),jQuery(this).after("<div class='text-info'>"+a+"</div>")}else jQuery(this).next("div").remove()})),$(".dateField.advcdate").datepicker().on("changeDate",(function(e){var a=$(this).data("key").replace("_date",""),t=$("#"+a+"_time").val();""==t&&(t=r.DisplayCurrentTime($("#"+a+"_time").data("format")),$("#"+a+"_time").val(t)),$("input[name='"+a+"']").val($(this).val()+" "+t)})),$(".timepicker-default.advcdate").on("input",(function(){var e=$(this).data("key").replace("_time",""),a=$("#"+e+"_date").val();""==a&&(a=r.DisplayCurrentTime($("#"+e+"_date").data("today")),$("#"+e+"_date").val(a)),$("input[name='"+e+"']").val(a+" "+$(this).val())})),$(".timepicker-default.advcdate").on("changeTime",(function(){var e=$(this).data("key").replace("_time",""),a=$("#"+e+"_date").val();""==a&&(a=r.DisplayCurrentTime($("#"+e+"_date").data("today")),$("#"+e+"_date").val(a)),$("input[name='"+e+"']").val(a+" "+$(this).val())})),$(document).on("click",".advfieldChange",(function(e){var a=jQuery(e.currentTarget).data("name");jQuery("#advfieldBlock_"+a).show()})),$("select[id^='"+supportedParsVTCustomFields.UsersList.prefix+"']").on("change",(function(){var e=$(this).data("name"),a=$(this).val();null!=a?(a=a.sort((function(e,a){return e-a})),$("input[name="+e+"]").val(a.join(","))):$("input[name="+e+"]").val("")})),$("select[data-name*='"+supportedParsVTCustomFields.UsersList.prefix+"']").on("change",(function(){var e=$(this).parent().find('input[name*=relatedblockslists][name*="'+supportedParsVTCustomFields.UsersList.prefix+'"]'),a=$(this).val();null!=a?(a=a.sort((function(e,a){return e-a})),e.val(a.join(","))):e.val("")})),$("input[name^='"+supportedParsVTCustomFields.Date_Time_Field.prefix+"'], input[name*=relatedblockslists][name*="+supportedParsVTCustomFields.Date_Time_Field.prefix+"], input[name*=tableblocks][name*="+supportedParsVTCustomFields.Date_Time_Field.prefix+"]").on("input",(function(){var e=$(this).data("key").replace("_date",""),a=$("#"+e+"_time").val();""==a&&(a=r.DisplayCurrentTime($("#"+e+"_time").data("format")),$("#"+e+"_time").val(a)),$("input[name='"+e+"']").val($(this).val()+" "+a)})),jQuery("select[name*='country_fieldName_"+supportedParsVTCustomFields.Cities_field.prefix+"'], select[name*=country_fieldName_][name*="+supportedParsVTCustomFields.Cities_field.prefix+"],select[name*='country_fieldName_"+supportedParsVTCustomFields.Countries_field.prefix+"'], select[name*=country_fieldName_][name*="+supportedParsVTCustomFields.Countries_field.prefix+"]").change((function(e){var a=$(e.target).find(":selected"),t=jQuery(e.currentTarget).data("name");if(a.is("option"))if(jQuery("input[name='"+t+"']").val(a.val()),""!=a.val()){var r={module:"ParsVT",action:"ACF",mode:"GetCities"};r.country=a.val(),r.fieldname=t,"undefined"==typeof csrfMagicToken&&(r.tokenname=csrfMagicName),"undefined"==typeof csrfMagicToken&&(r.tokenval=csrfMagicToken),$.post("index.php",r,(function(e){if(e.success){if(e.result){var r=a.text();jQuery("select[name*='city_fieldName_"+t+"']").parent().show(),jQuery("#Show_Advcf_"+t).html(r),jQuery("#Show_Advcf_"+t).data("country",r)}else jQuery("select[name*='city_fieldName_"+t+"']").parent().hide(),jQuery("select[name*='county_fieldName_"+t+"']").parent().hide();jQuery("#Show_Advcf_"+t).data("country-id",a.val()),jQuery("select[name*='city_fieldName_"+t+"']").html(""),jQuery("select[name*='county_fieldName_"+t+"']").html(""),jQuery("select[name*='city_fieldName_"+t+"']").append(e.result),jQuery("select[name*='city_fieldName_"+t+"']").select2(),jQuery("select[name*='county_fieldName_"+t+"']").select2()}}))}else jQuery("#Show_Advcf_"+t).html(""),jQuery("select[name*='city_fieldName_"+t+"']").html(""),jQuery("select[name*='county_fieldName_"+t+"']").html(""),jQuery("select[name*='city_fieldName_"+t+"']").select2(),jQuery("select[name*='county_fieldName_"+t+"']").select2(),jQuery("select[name*='city_fieldName_"+t+"']").parent().hide(),jQuery("select[name*='county_fieldName_"+t+"']").parent().hide()})),jQuery("select[name*='city_fieldName_"+supportedParsVTCustomFields.Cities_field.prefix+"'], select[name*=city_fieldName_][name*="+supportedParsVTCustomFields.Cities_field.prefix+"],select[name*='city_fieldName_"+supportedParsVTCustomFields.Countries_field.prefix+"'], select[name*=city_fieldName_][name*="+supportedParsVTCustomFields.Countries_field.prefix+"]").change((function(e){var a=$(e.target).find(":selected"),t=jQuery(e.currentTarget).data("name");if(a.is("option"))if(jQuery("input[name='"+t+"']").val(a.val()),""!=a.val()){var r={module:"ParsVT",action:"ACF",mode:"GetCounties"};r.city=a.val(),r.fieldname=t,"undefined"==typeof csrfMagicToken&&(r.tokenname=csrfMagicName),"undefined"==typeof csrfMagicToken&&(r.tokenval=csrfMagicToken),$.post("index.php",r,(function(e){if(e.success){if(e.result){var r=a.text();jQuery("select[name*='county_fieldName_"+t+"']").parent().show();var s=jQuery("#Show_Advcf_"+t).data("country");jQuery("#Show_Advcf_"+t).html(s+" - "+r),jQuery("#Show_Advcf_"+t).data("city",r)}else jQuery("select[name*='county_fieldName_"+t+"']").parent().hide();jQuery("#Show_Advcf_"+t).data("city-id",a.val()),jQuery("select[name*='county_fieldName_"+t+"']").html(""),jQuery("select[name*='county_fieldName_"+t+"']").append(e.result),jQuery("select[name*='county_fieldName_"+t+"']").select2()}}))}else{jQuery("#Show_Advcf_"+t).html(jQuery("#Show_Advcf_"+t).data("country"));var s=jQuery("#Show_Advcf_"+t).data("country-id");jQuery("input[name='"+t+"']").val(s),jQuery("select[name*='county_fieldName_"+t+"']").html(""),jQuery("select[name*='county_fieldName_"+t+"']").select2(),jQuery("select[name*='county_fieldName_"+t+"']").parent().hide()}})),jQuery("select[name*='county_fieldName_"+supportedParsVTCustomFields.Cities_field.prefix+"'], select[name*=county_fieldName_][name*="+supportedParsVTCustomFields.Cities_field.prefix+"],select[name*='county_fieldName_"+supportedParsVTCustomFields.Countries_field.prefix+"'], select[name*=county_fieldName_][name*="+supportedParsVTCustomFields.Countries_field.prefix+"]").change((function(e){var a=$(e.target).find(":selected"),t=jQuery(e.currentTarget).data("name");if(a.is("option"))if(jQuery("input[name='"+t+"']").val(a.val()),""!=a.val()){var r=a.text(),s=jQuery("#Show_Advcf_"+t).data("country"),i=jQuery("#Show_Advcf_"+t).data("city");jQuery("#Show_Advcf_"+t).html(s+" - "+i+" - "+r)}else{jQuery("#Show_Advcf_"+t).html(jQuery("#Show_Advcf_"+t).data("country")+" - "+jQuery("#Show_Advcf_"+t).data("city"));var l=jQuery("#Show_Advcf_"+t).data("city-id");jQuery("input[name='"+t+"']").val(l)}}))):"Detail"==t&&$("body").on("click",".showpassword",(function(){jQuery(this).unbind();var e=jQuery(this).data("target");r.ShowPasswordField(jQuery('input[id="'+e+'"]'))}))},registerEventsField:function(){var e=this;ParsVTCustomFields_Js.loadScript("layouts/v7/modules/ParsVT/resources/datepicker/datepicker.min.js",(function(){})),ParsVTCustomFields_Js.loadCSS("layouts/v7/modules/ParsVT/resources/datepicker/datepicker.min.css","parsvtdatepicker"),"undefined"==typeof CkEditor&&ParsVTCustomFields_Js.loadScript("libraries/jquery/ckeditor/ckeditor.js",(function(){ParsVTCustomFields_Js.loadScript("libraries/jquery/ckeditor/adapters/jquery.js",(function(){ParsVTCustomFields_Js.loadScript("layouts/vlayout/modules/Vtiger/resources/CkEditor.js",(function(){}))}))})),e.registerDisplayParsVTCustomFieldsControl(!1,!1),e.registerNumtoStringMethod(),e.createUITypeOption(),e.registerKeys(!1,!1)},createUITypeOption:function(){if("LayoutEditor"==app.getModuleName()){for(var e in supportedParsVTCustomFields)supportedParsVTCustomFields.hasOwnProperty(e)&&$("select[name=fieldType]").append(new Option(app.vtranslate(supportedParsVTCustomFields[e].name),e,!1,!1));ParsVTCustomFields_Js.checkADVCF(),ParsVTCustomFields_Js.overwriteFunctionAddCustomField()}$("[name='layoutEditorModules']").change((function(){var e="index.php?module=LayoutEditor&parent=Settings&view=Index&sourceModule="+$(this).val();location.href=e}))}}),jQuery(document).ready((function(e){window.onbeforeunload=null;var a=new ParsVTCustomFields_Js;a.registerEventsField(),a.registerMultiReferenceActions(),e(document).on("click",".fieldBlockContainer .relatedBtnAddMore",(function(){setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),a.registerKeys(!0,"Edit")}),1500)})),"Leads"==app.getModuleName()&&"Detail"==app.getViewName()&&e(document).on("shown.bs.modal",(function(t){e("#convertLeadContainer").length>0&&setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"convertLead"),a.registerKeys(!0,"Edit")}),1500)})),jQuery(document).ajaxComplete((function(t,r,s){var i=s.data,l=s.url;void 0===i&&s.url&&(i=s.url);var d=window.location.href.split("?");if(null!=i.indexOf)if(i.indexOf("?")>-1)var n=i.split("?")[1];else n=[i,i];else n=["",""];if(null!=l.indexOf)if(l.indexOf("?")>-1)var o=l.split("?")[1];else o=[l,l];else o=["",""];var u=a.getQueryParams(d[1]),p=a.getQueryParams(n),c=a.getQueryParams(o);if(void 0!==p&&void 0!==c&&(p=Object.assign({},p,c)),void 0===u)return!1;if(void 0===p.module||["SmartNotification","ControlLayoutFields","Notifications","ParsVTPayment","Whatsapp","DynamicBlocks","ParsVT","Calendar"].includes(p.module))return!1;var m=a.getQueryParams(i);void 0!==p&&("QuickCreateAjax"==p.view||"MassActionAjax"==p.view&&"showMassEditForm"==p.mode)?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),a.registerKeys(!0,"Edit"),e(document).trigger("postQuickCreateLoad")}),2e3):"Edit"==u.view&&void 0!==p&&"generateTableBlocksEditForm"===p.mode&&"TableBlock"===p.module?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),void 0!==p.id&&e("#dataTable"+p.id).closest("table").trigger("postTableBlockLoad")}),2e3):"Edit"==u.view&&void 0!==p&&"getMappingFields"==p.mode&&"FieldAutofill"==p.module?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"AutoFill"),e(document).trigger("postFieldAutoFill")}),2e3):"Detail"!=u.view||"showRelatedList"!=u.mode||void 0===p||"showDetailViewByMode"!=p.mode&&"showRelatedList"!=p.mode?"List"==u.view&&void 0!==p&&u.module==p.module&&"RecordQuickPreview"==p.view?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Detail"),e(document).trigger("postListViewLoad")}),1500):"Detail"==u.view&&void 0!==p&&"RelatedBlocksLists"==p.module&&"MassActionAjax"==p.view&&"generateNewBlock"==p.mode?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),a.registerKeys(!0,"Edit"),void 0!==p.blockid&&e(".relatedblockslists"+p.blockid).trigger("postRelatedBlockLoad")}),1500):"Edit"==u.view&&void 0!==p&&"RelatedBlocksLists"==p.module&&"MassActionAjax"==p.view&&"generateNewBlock"==p.mode?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),a.registerKeys(!0,"Edit"),void 0!==p.id&&e(".relatedblockslists"+p.id).closest("table").trigger("postRelatedBlockLoad")}),1500):"Edit"==u.view&&void 0!==p&&"RelatedBlocksLists"==p.module&&"MassActionAjax"==p.view&&"generateEditView"==p.mode?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Edit"),a.registerKeys(!0,"Edit"),void 0!==p.id&&e(".relatedblockslists"+p.id).trigger("postRelatedBlockLoad")}),1500):"Detail"==u.view&&void 0!==p&&"RelatedBlocksLists"==p.module&&"MassActionAjax"==p.view&&"generateDetailView"==p.mode?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"Detail"),a.registerKeys(!0,"Edit"),void 0!==p.blockid&&e(".relatedblockslists"+p.blockid).trigger("postRelatedBlockLoad")}),1500):"List"==u.view&&void 0!==p&&u.module==p.module&&"List"==p.view?setTimeout((function(){a.registerDisplayParsVTCustomFieldsControl(!0,"List")}),1500):"Detail"!=u.view||"showDetailViewByMode"!=u.mode&&"SaveAjax"!=m.action||void 0===p||u.module!=p.module||"showDetailViewByMode"!=p.mode&&"Edit"!=p.view||setTimeout((function(){var t=void 0!==p&&p.view?p.view:u.view;a.registerDisplayParsVTCustomFieldsControl(!0,t),a.registerKeys(!0,t),e(document).trigger("postDetailViewLoad")}),1500):setTimeout((function(){var t=void 0!==p&&p.view?p.view:u.view;a.registerDisplayParsVTCustomFieldsControl(!0,t),a.registerKeys(!0,t),e(document).trigger("postRelatedListLoad")}),1500),void 0!==typeof s&&null!==typeof s.data&&"string"==typeof s.data&&s.data&&s.data.indexOf("mode=unHide")>-1&&ParsVTCustomFields_Js.hideAllSmartChangeButtonForACF()})),ParsVTCustomFields_Js.hideAllSmartChangeButtonForACF();var t=e(".module-extensions .listViewFilter").find("a[href^='javascript:ParsVTCustomFields_Js.initData_MapView()']").attr("href");null!=t&&e(".module-extensions .listViewFilter").find("a[href^='javascript:ParsVTCustomFields_Js.initData_MapView()']").attr("href",t.split("&")[0])}));
