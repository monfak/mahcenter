/* ********************************************************************************
 * The content of this file is subject to the ParsVT.com Modules License("License");
 * You may not use this file except in compliance with the License
 * The Initial Developer of the Original Code is ParsVT.com
 * Portions created by ParsVT.com. are Copyright(C) ParsVT Team
 * All Rights Reserved.
 * ****************************************************************************** */
function initData_ParsVTTooltipManager(){var e=jQuery.url(),i=e.param("module"),t=e.param("view"),a=e.param("requestMode");if("Calendar"===i&&(i=e.param("mode")),"fa_ir"===jQuery("body").data("language"))var d="top right",l="bottom center",n=1,o=1;else d="top left",l="bottom center",n=1,o=1;function r(e,t,a){if("Detail"==e||"Edit"==e||"quickCreate"==e){if("quickCreate"==e)var r=a;else r=i;jQuery.ajax({type:"POST",url:"index.php",data:{module:"ParsVT",action:"Fields",mode:"getFieldTooltipInfo",sourceModule:r,sourceView:e},success:function(a){if(a.result.success)for(var r=a.result.data,s=0;s<r.length;s++)if(null!=r[s].helpinfo&&""!=r[s].helpinfo){data_decoded=jQuery("<div/>").html(r[s].helpinfo).text();var p=r[s].icon;if(app.convertUrlToDataParams,"Detail"==e){var u='<img class="ttm_icon" id="qtip_'+r[s].fieldid+'" src="'+p+'" width="16px;" height="16px;" style="vertical-align: middle; margin:0 5px; cursor: pointer;">';if("summary"==t)jQuery(".summaryView").find('[data-name="'+r[s].fieldname+'"]').closest("tr.summaryViewEntries").find("td.fieldLabel > label:first").append(u),1==r[s].preview_type?jQuery("#qtip_"+r[s].fieldid).attr("i",s).off("click").on("click",(function(){var e=jQuery("<div/>").html(r[jQuery(this).attr("i")].helpinfo).text();app.helper.showPopup('<div class="modal-dialog modal-lg" style="width: 600px;"><div class="modal-content"><div class="modal-body"><div>'+e+"</div></div></div></div>")})):jQuery("#qtip_"+r[s].fieldid).qtip({content:data_decoded,show:{when:{event:"click"}},position:{my:d,at:l,adjust:{x:o,y:n}},style:{classes:"qtip-blue"},hide:{when:{event:"unfocus"}}});else{var c=a.result.default_record_view;if(null==t)if("summary"==c){var f=jQuery(".summaryView").find('[data-name="'+r[s].fieldname+'"]').closest("tr.summaryViewEntries").find("td.fieldLabel > label"),m=jQuery("#"+i+"_detailView_fieldLabel_"+r[s].fieldname+" span:first");0==f.length&&1==m.length?m.append(u):f.append(u)}else jQuery("#"+i+"_detailView_fieldLabel_"+r[s].fieldname+" span:first").append(u);else jQuery("#"+i+"_detailView_fieldLabel_"+r[s].fieldname+" span:first").append(u);1==r[s].preview_type?jQuery("#qtip_"+r[s].fieldid).attr("i",s).off("click").on("click",(function(){var e=jQuery("<div/>").html(r[jQuery(this).attr("i")].helpinfo).text();app.helper.showPopup('<div class="modal-dialog modal-lg" style="width: 600px;"><div class="modal-content"><div class="modal-body"><div>'+e+"</div></div></div></div>")})):jQuery("#qtip_"+r[s].fieldid).qtip({content:data_decoded,show:{when:{event:"click"}},position:{my:d,at:l,adjust:{x:o,y:n}},style:{classes:"qtip-blue"},hide:{when:{event:"unfocus"}}})}}else if("Edit"==e){u='<img id="qtip_'+r[s].fieldid+'" src="'+p+'" width="16px;" height="16px;" style="vertical-align: middle; margin:0 5px;cursor: pointer;">';jQuery('textarea[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").append(u),jQuery('input[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").append(u),jQuery('select[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").append(u),1==r[s].preview_type?jQuery("#qtip_"+r[s].fieldid).attr("i",s).off("click").on("click",(function(){var e=jQuery("<div/>").html(r[jQuery(this).attr("i")].helpinfo).text();app.helper.showPopup('<div class="modal-dialog modal-lg" style="width: 600px;"><div class="modal-content"><div class="modal-body"><div>'+e+"</div></div></div></div>")})):jQuery("#qtip_"+r[s].fieldid).qtip({content:data_decoded,show:{when:{event:"click"}},position:{my:d,at:l,adjust:{x:o,y:n}},style:{classes:"qtip-blue"},hide:{when:{event:"unfocus"}}})}else{u='<img id="qtip2_'+r[s].fieldid+'" src="'+p+'" width="16px;" height="16px;" style="vertical-align: middle; margin:0 5px;cursor: pointer; ">';jQuery('form[name="QuickCreate"] textarea[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").find("label:first").append(u),jQuery('form[name="QuickCreate"] input[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").find("label:first").append(u),jQuery('form[name="QuickCreate"] select[name="'+r[s].fieldname+'"]').closest(".fieldValue").prev("td").find("label:first").append(u),1==r[s].preview_type?jQuery("#qtip2_"+r[s].fieldid).attr("i",s).off("click").on("click",(function(){var e=jQuery("<div/>").html(r[jQuery(this).attr("i")].helpinfo).text();app.helper.showPopup('<div class="modal-dialog modal-lg" style="width: 600px;"><div class="modal-content"><div class="modal-body"><div>'+e+"</div></div></div></div>")})):jQuery("#qtip2_"+r[s].fieldid).qtip({content:data_decoded,show:{when:{event:"click"}},position:{my:d,at:l,adjust:{x:o,y:n}},style:{classes:"qtip-blue qtipzindex9999"},hide:{when:{event:"unfocus"}}})}}}})}}r(t,a),window.init_ttm_ajax=0,jQuery(".quickCreateModule").click((function(){!function e(){jQuery(".quickCreateContent").length>0?($("<style type='text/css'> .qtipzindex9999 { z-index: 99999 !important; } </style>").appendTo("body"),r("quickCreate",null,jQuery(".quickCreateContent").parent().find("input[name=module]").val())):setTimeout((function(){e()}),50)}()})),jQuery(document).ajaxComplete((function(e,i,t){var a=t.url;if(a.indexOf("view=Detail")>-1&&(a.indexOf("mode=showDetailViewByMode")>-1||a.indexOf("mode=showCustomDetailViewTab")>-1)&&-1==a.indexOf("http")){!function e(){jQuery("#detailView").length>0?r("Detail",a.indexOf("requestMode=summary")>-1?"summary":"full"):setTimeout((function(){e()}),50)}()}}))}jQuery(document).ready((function(){setTimeout((function(){initData_ParsVTTooltipManager()}),1e3)}));
