### مقدمه 
Cron اختصار یافته کلمات Command Run On میباشد. Cron به نام UNIX Scheduler نیز معروف است.

cron در واقع یک پروسس سیستمی است که به طور خودکار وظایف مشخص شده در وهله های زمانی معین را برای شما انجام میدهد.

Cron قابلیتی در سیستم عامل است که یک دستور یا اسکریپت را روی سرور شما زمان بندی میکند تا به طور خودکار در زمان و تاریخ مشخص شده اجرا شود.


 <br>
 <br>
 
 ###وظایف زمانبندی در ویتایگر (Crontabs)
وظایف زمان‌بندی به صورت دوره‌ای در بکگراند CRM اجرا می‌شود تا وظایف مختلف به صورت خودکار و بدون نیاز به انجام کاری توسط کاربر انجام دهد.

###مروری بر زمانبندی
با فرض این که برنامه ی کرون جاب (cron job) به همراه نرم افزار نصب و فعال شده باشد، منوی زمانبندی که زیر مشاهده میکنید امکان فعال یا غیرفعال ساختن برخی از اقدامات خودکار سیستمی را فراهم می سازد.


<table class="table table-condensed table-bordered bordered">
	<thead>
		<tr>
			<th>#</th>
			<th>نام وظیفه</th>
			<th>شرح</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1.</td>
			<td>گردش کار</td>
			<td>ارسال ایمیل، ایجاد رویدادها و وظایف، به روز رسانی فیلدها، ایجاد رکورد، و فراخوانی توابع سفارشی توسط این وظیفه انجام می شود.</td>
		</tr>
		<tr>
			<td>2.</td>
			<td>ارسال یادآور</td>
			<td>ارسال یادآوری ایمیلی که برای یادآوری رویداد آینده برای کاربران توسط این وظیفه انجام می‌شود.</td>
		</tr>
		<tr>
			<td>3.</td>
			<td>فاکتور تکراری</td>
			<td>صورت‌حساب‌های تکرارشونده که به‌طور خودکار از سوابق سفارش فروش ایجاد می‌شوند، توسط این زمانبندی اجرا می‌شوند.</td>
		</tr>
		<tr>
			<td>4.</td>
			<td>اسکنر ایمیل</td>
			<td>ایمیل‌های دریافتی اسکن می‌شوند و با کمک زمان‌بندی، رکوردهای مناسب به‌طور خودکار ایجاد می‌شوند.</td>
		</tr>
		<tr>
			<td>5.</td>
			<td>واردات برنامه ریزی شده</td>
			<td>اگر فایل ایمپورت شما حاوی بیش از 1000 رکورد باشد، قرار است عملیات import شما با کمک این وظیفه تکمیل شود.</td>
		</tr>
		<tr>
			<td>6.</td>
			<td>تهیه نسخه پشتیبان بانک اطلاعاتی</td>
			<td>برای تهیه نسخه پشتیبان بانک اطلاعاتی به صورت خودکار از این وظیفه استفاده می شود.</td>
		</tr>
		<tr>
			<td>7.</td>
			<td>همگام سازی خودکار تقویم / مخاطبین گوگل</td>
			<td>برای همگام سازی Google Contacts/Calendar با Vtiger و بالعکس، که شما را از هر دو طرف به روز نگه می دارد.</td>
		</tr>
		<tr>
			<td>8.</td>
			<td>گزارشات برنامه ریزی شده</td>
			<td>برای ارسال گزارش ها با فرمت csv. یا اکسل در فواصل زمانی معین برای کاربران خاص از طریق ایمیل از این وظیفه استفاده می شود.</td>
		</tr>
		<tr>
			<td>9.</td>
			<td>قوانین به اشتراک گذاری</td>
			<td>برای ایجاد فایل های سطوح دسترسی کاربران در نرم افزارهایی که بیش از 30 کاربر دارند از این وظیفه استفاده می شود.</td>
		</tr>
		<tr>
			<td>10.</td>
			<td>گزارشات برنامه ریزی شده</td>
			<td>برای ارسال گزارش ها با فرمت csv. یا اکسل در فواصل زمانی معین برای کاربران خاص از طریق ایمیل از این وظیفه استفاده می شود.</td>
		</tr>
		<tr>
			<td>10.</td>
			<td>ارسال پیامک گردش کارهای زمانبندی از طریق صف</td>
			<td>برای ارسال پیام کوتاه از طریق کمپین ها از این وظیفه استفاده می شود.</td>
		</tr>
	</tbody>
</table>

اطلاعات موجود در این فهرست به تنظیمات سایر ماژول های نرم افزار برمی گردد. به عنوان مثال تنظیمات ماژول گردش کار اقداماتی که می بایست توسط کرون جاب گردش کار انجام شود را مشخص می کند.

در این قسمت شما به عنوان کاربر مدیر می توانید ماوس خود را بر روی ماژول مورد نظر برده و برای "ویرایش" آن بر روی آیکون   کلیک کنید.

 
 <br>
 <br>

### اضافه کردن وظایف زمانبندی سفارشی
برای اضافه کردن وظایف زمانبندی سفارشی فایل موجود در مسیر زیر را

از
```
modules/ParsVT/models/override/CronTasks.php.rename
```

به 

```
modules/ParsVT/models/override/CronTasks.php
```

تغییر نام دهید و آن را ویرایش نمایید

داخل فایل یه متغیر به نام $custom_crons وجود دارد که برای هر وظیفه زمانبندی سفارشی امکان اضافه کردن یک آرایه به فرمت زیر را دارد:

* پارامتر name که نام وظیفه زمانبندی که در بخش [وظایف زمانبندی](index.php?module=CronTasks&parent=Settings&view=List) نمایش داده می شود و حتما باید به صورت انگلیسی وارد شود 
* پارامتر description که توضیحات وظیفه زمانبندی که در بخش [وظایف زمانبندی](index.php?module=CronTasks&parent=Settings&view=List) نمایش داده می شود و به کاربران در باره وظیفه و شرایط اجرا توضیحاتی ارائه می کند 
* پارامتر handler_file که مسیر فایل PHP برای اجرای وظیفه فراخوانی می شود. این مسیر میتواند به صورت نام فایل در پوشه modules/ParsVT/crontabs/ یا مسیر کامل وارد شود 
*  پارامتر دوم آدرس فایلی که تابع وب سرویس در آن آورده شده است
*  پارامتر frequency که دوره تناوب اجرای وظیفه را به ثانیه دارد و حداقل باید 60 ثانیه باشد
* پارامتر اختیاری module که برای فعال سازی وظیفه بر روی ماژول مورد نظر استفاده می شود و درصورت وارد نشدن ماژول ParsVT را به عنوان پیش فرض در نظر خواهد گرفت 


> ``📝`` نکته:
> *  در صورتی که پارامترهای module یا handler_file به صورت صحیح وارد نشود وظیفه وارد شده امکان فعال سازی نخواهد داشت
> * برای حذف وظیفه زمانبندی کافی است پارامتر module یا handler_file را به مقداری نامعتبر تغییر دهید تا وظیفه مورد نظر از سیستم حذف شود
> * در فایل تنظیمات که نمونه کرون با نام Sample Crontab جهت آشنایی بیشتر شما آورده شده است که پس از کلیک بر به صورت خودکار ایجاد می شود


 پس از انجام موارد فوق بر روی **فعال سازی وظایف زمانبندی سفارشی** کلید کنید 


<br>

<br>
<br>
